<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>使用hexo deploy之后github pages就报404</title>
      <link href="/2025/03/20/b29103fc/"/>
      <url>/2025/03/20/b29103fc/</url>
      
        <content type="html"><![CDATA[<p>配置好了仓库和域名,也启用了强制 https 加密,本来一开始是可以用的,结果只要推送了网页的更新,github 就会报 404 错误,而且仓库设置中 Page 页面的自定义域也会变成空的,这是为什么?</p><p>很神奇对不对 😄</p><p>此问题一般是 git 强制将所有的本地文件完整推送到了 github page 的仓库导致的,从而覆盖了整个仓库的文件,导致把 CNAME 文件也给覆盖了.只需要在本地的仓库文件夹的 source 中新建 CNAME 文件,注意不要有后缀名,然后在里面填写上你的域名就可以,要保持跟之前你在”自定义域”中填写的保持一致就可以.</p><p>写完了保存,然后再执行</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo clean &amp;&amp; hexo deploy</span><br></pre></td></tr></table></figure><p>就可以了.</p>]]></content>
      
      
      <categories>
          
          <category> Hexo </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 踩坑记录 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>银行家算法</title>
      <link href="/2022/05/15/3bfd1783/"/>
      <url>/2022/05/15/3bfd1783/</url>
      
        <content type="html"><![CDATA[<h4 id="1-死锁的概念"><a href="#1-死锁的概念" class="headerlink" title="1.死锁的概念"></a>1.死锁的概念</h4><h5 id="（1）-什么是死锁"><a href="#（1）-什么是死锁" class="headerlink" title="（1）.什么是死锁"></a>（1）.什么是死锁</h5><p>在并发环境下，各进程因竞争资源而造成的一种<strong>互相等待对方手里的资源，导致各进程都阻塞，都无法向前推进</strong>的现象，就是“死锁”。发生死锁后若无外力干涉，这些进程都将无法向前推进。</p><span id="more"></span><p><img src="https://s1.ax1x.com/2022/05/15/ORAPbV.png" alt="ORAPbV.png">]</p><h5 id="（2）-死锁，饥饿，死循环的-区别"><a href="#（2）-死锁，饥饿，死循环的-区别" class="headerlink" title="（2）.死锁，饥饿，死循环的 区别"></a>（2）.死锁，饥饿，死循环的 区别</h5><p>死锁：各进程互相等待对方手里的资源，导致各进程都阻塞，无法向前推进的现象。</p><p>饥饿：由于长期得不到想要的资源，某进程无法向前推进的现象。比如：在短进程优先（SPF）算法中，若有源源不断的短进程到来，则长进程一直得不到处理机，从而发生长进程“饥饿”。</p><p>死循环：某进程执行过程中一直跳不出某个循环的现象。有时是因为程序逻辑 BUG 导致的，有时是因为程序猿故意设计的。</p><blockquote><p>上面三个问题都是进程无法顺利向前推进的现象（故意设计的死循环除外）。</p><p>死锁一定是“循环等待对方手里的资源”导致的，因此如果有死锁现象，那<strong>至少有两个或两个以上的进程同时发生死锁</strong>。发生死锁的进程一定处于阻塞态。</p><p>饥饿<strong>可能是只有一个进程发生饥饿</strong>。发生饥饿的进程既可能是阻塞态（如长期得不到需要的 I&#x2F;O 设备），也有可能是就绪态（长期得不到处理机）。</p><p>死循环可能只有一个进程发生死循环。死循环的进程可以上处理机运行（可以是运行态），只不过无法像期待的那样顺利推进。死锁和饥饿问题是由于操作系统分配资源策略不合理导致的，而死循环是由于代码逻辑的错误导致的。<strong>死锁和饥饿是管理者（操作系统）的问题，死循环是被管理者的问题</strong>。</p></blockquote><h5 id="（3）-死锁产生的必要条件"><a href="#（3）-死锁产生的必要条件" class="headerlink" title="（3）.死锁产生的必要条件"></a>（3）.死锁产生的必要条件</h5><p>产生死锁必须同时满足以下四个条件，只要其中任意一条件不成立，死锁就不会发生。</p><blockquote><ul><li><strong>互斥条件</strong>：只有对必须互斥使用的资源的争抢彩会导致死锁（如打印机设备）。像内存，扬声器这种可以同时让多个进程使用的资源是不会导致死锁的（因为进程不用阻塞等待这种资源）。</li><li><strong>不剥夺条件</strong>：进程所获得的资源在未使用完之前，<strong>不能由其他进程强行夺走</strong>，只能主动释放。</li><li><strong>请求和保持条件</strong>：进程<strong>已经保持了至少一个资源</strong>，但是又提出了新的资源<strong>请求</strong>，而该资源又被其他进程占有，此时请求进程被堵塞，但又对自己已有的资源<strong>保持</strong>不放。</li><li><strong>循环等待条件</strong>：存在一种进程<strong>资源的循环等待链</strong>，链中的每一个进程已获得的资源同时被下一个进程所请求。</li></ul><blockquote><p><strong>注意，发生死锁时一定有循环等待，但是发生循环等待时未必死锁</strong>（循环等待是死锁的必要不充分条件）。</p><p>如果同类资源的数量大于 1，则即使有循环等待，也未必发生死锁。但如果系统中每类资源都只有一个，那循环等待就是死锁的充分必要条件了。</p></blockquote></blockquote><h5 id="（4）什么时候会发生死锁"><a href="#（4）什么时候会发生死锁" class="headerlink" title="（4）什么时候会发生死锁"></a>（4）什么时候会发生死锁</h5><p>1．对系统资源的竟争。各进程对不可剥夺的资源（如打印机）的竞争可能引起死锁，对可剥夺的资源(CPU）的竞争是不会引起死锁的。</p><p>2．进程推进顺序非法。请求和释放资源的顺序不当，也同样会导致死锁。例如，并发执行的进程 P1. P2 分别申请并占有了资源 R1. R2，之后进程 P1 又紧接着申请资源 R2，而进程 P2 又申请资源 R1. 两者会因为申请的资源被对方占有而阻塞，从而发生死锁。</p><p>3．信号量的使用不当也会造成死锁。如生产者一消费者问题中，如果实现互斥的 P 操作在实现同步的 P 操作之前，就有可能导致死锁。（可以把互斥信号量、同步信号量也看做是一种抽象的系统资源）</p><blockquote><ul><li>总之，对不可剥夺资源的不合理分配，可能导致死锁。</li></ul></blockquote><h5 id="（5）-死锁的处理策略"><a href="#（5）-死锁的处理策略" class="headerlink" title="（5）.死锁的处理策略"></a>（5）.死锁的处理策略</h5><p>1．预防死锁。破坏死锁产生的四个必要条件中的一个或几个。<br>2．避免死锁。用某种方法防止系统进入不安全状态，从而避免死锁（银行家算法）<br>3．死锁的检测和解除。允许死锁的发生，不过操作系统会负责检测出死锁的发生，然后采取某种措施解除死锁。</p><h5 id="（6）-知识回顾"><a href="#（6）-知识回顾" class="headerlink" title="（6）.知识回顾"></a>（6）.知识回顾</h5><p><img src="https://s1.ax1x.com/2022/05/15/ORnBaq.png" alt="ORnBaq.png"></p><h4 id="2-死锁处理的策略"><a href="#2-死锁处理的策略" class="headerlink" title="2.死锁处理的策略"></a>2.死锁处理的策略</h4><h5 id="（1）破坏互斥条件"><a href="#（1）破坏互斥条件" class="headerlink" title="（1）破坏互斥条件"></a>（1）破坏互斥条件</h5><p><strong>互斥条件</strong>：只有对必须互斥使用的资源的争抢才会导致死锁。</p><blockquote><p>如果把只能互斥使用的资源改造为允许共享使用，则系统不会进入死锁状态。比如：<strong>SPOOLIng 技术</strong>。 操作系统可以采用 SPOOLIng 技术把独占设备在逻辑上改造成共享设备。比如，用 SPOOLIng 技术将打印机改造为共享设备。。。</p><p><img src="https://s1.ax1x.com/2022/05/15/ORKx8f.png" alt="ORKx8f.png"></p><p>SPOOLing 技术引入了一个中间进程里管理对互斥资源的访问。输出进程会把对打印机的请求排成队列，在队列里依次完成访问。使用了 SPOOLing 技术后，在各个进程看来，自己对打印机资源的使用请求立即就被接收处理了，不需要再阻塞等待。</p><p>该策略的<strong>缺点</strong>：并不是所有的资源都可以改造成可共享使用的资源，并且为了系统安全，很多地方还必须保护这种互斥性，因此，<strong>很多时候都无法破坏互斥条件</strong>。</p></blockquote><h5 id="（2）破坏不剥夺条件"><a href="#（2）破坏不剥夺条件" class="headerlink" title="（2）破坏不剥夺条件"></a>（2）破坏不剥夺条件</h5><p><strong>不剥夺条件</strong>：进程所获得的资源在未使用完之前，<strong>不能由其他进程强行夺走</strong>，只能主动释放。</p><blockquote><p>破坏不剥夺条件：</p><p>方案一：当某个进程请求新的资源得不到满足时，它必须立即释放保持的所有资源，待以后需要时 再重新申请。也就是说，即使某些资源尚未使用完，也需要主动释放，从而破坏了不可剥夺条件。</p><p>方案二：当某个进程需要的资源被其他进程所占有的时候，可以由操作系统协助，将想要的资源强 行剥夺。这种方式一般需要考虑各进程的优先级（比如：剥夺调度方式，就是将处理机资源强行剥 夺给优先级更高的进程使用）</p><p>该策略的<strong>缺点</strong>： 1.实现起来比较复杂。 2．释放己获得的资源可能造成前一阶段工作的失效。因此这种方法一般只适用于易保存和恢复状态的资源，如 CPU。3. 反复的申请和释放资源会增加系统开销，降低系统吞吐量。4. 若采用方案 1，意味着只要暂时得不到某个资源，之前获得的那些资源就需要放弃，以后再重新申请。如果一直发生这样的情况，就会导致金饥饿。</p></blockquote><h5 id="（3）破坏请求和保持条件"><a href="#（3）破坏请求和保持条件" class="headerlink" title="（3）破坏请求和保持条件"></a>（3）破坏请求和保持条件</h5><p><strong>请求和保持条件</strong>：进程<strong>已经保持了至少一个资源</strong>，但又提出了新的资源<strong>请求</strong>，而该资源又被其他进程占有，此时请求进程被阻塞，但又对自己已有的资源<strong>保持</strong>不放。</p><blockquote><p>可以采取<strong>静态分配</strong>方法，即进程在运行前一次申请完它所需要的全部资源，在它的资源未被满足之前，不让他投入运行。一旦投入运行后，这些资源就一直归他所有，该进程就不会再请求别的任何资源了。</p><p>该策略实现起来简单，但也有明显的<strong>缺点</strong>：</p><p>有些资源可能只需要用很短的时间，因此如果进程的整个运行期间都一直保持着所有资源，就会造成严重的资源浪费，<strong>资源利用率极低</strong>。另外，该策略也有<strong>可能导致某些进程饥饿</strong>。</p><p>如：</p><p>假设有 A 类进程，B 类进程和 C 类进程，A 类进程需要资源 1，B 类进程需要资源 2，C 类进程同时需要资源 1 和资源 2.假设此时一直有源源不断的 A 类进程或 B 类进程进入并占有资源，则 C 类进程会一直得不到需要的资源。</p><p><img src="https://s1.ax1x.com/2022/05/16/OfxYa4.png" alt="OfxYa4.png"></p></blockquote><h5 id="（4）破坏循环等待条件"><a href="#（4）破坏循环等待条件" class="headerlink" title="（4）破坏循环等待条件"></a>（4）破坏循环等待条件</h5><p><strong>循环等待条件</strong>：存在一种进程<strong>资源的循环等待链</strong>，链中的每一个进程已获得的资源同时被下一个进程所请求。</p><blockquote><p>可采用<strong>顺序资源分配法</strong>。首先给系统中的资源编号，规定每个进程<strong>必须按编号递增的顺序请求资源</strong>，同类资源（即编号相同的资源）一次申请完。</p><p>原理分析：一个进程只有已占有小编号的资源时，才有资格申请更大编号的资源。按此规则，已持有大编号资源的进程不可能逆向地回来申请小编号的资源，从而就不会产生循环等待的现象。</p><p>假设系统中共有 10 个资源，编号为 1，2，．．．．．10</p><p>P1 进程占有 1 号和 3 号资源，P2 进程占有 2 号和 4 号资源，P3 进程占有 5 号和 7 号资源。在任何一个时刻，总有一个进程拥有的资源编号是最大的，那这个进程申请之后的资源必然畅通无阻。因此，不可能出现所有进程都阻塞的死锁现象。</p><p><img src="https://s1.ax1x.com/2022/05/16/Ofz0Yj.png" alt="Ofz0Yj.png"></p><p>该策略的<strong>缺点</strong>：</p><p>1．不方便增加新的设备，因为可能需要重新分配所有的编号：</p><p>2．进程实际使用资源的顺序可能和编号递增顺序不一致，会导致资源浪费：</p><p>3．必须按规定次序申请资源，用户编程麻烦。</p></blockquote><h5 id="（5）知识回顾"><a href="#（5）知识回顾" class="headerlink" title="（5）知识回顾"></a>（5）知识回顾</h5><p><img src="https://s1.ax1x.com/2022/05/16/Ofzz9A.png" alt="Ofzz9A.png"></p><h4 id="3-死锁处理的策略——避免死锁"><a href="#3-死锁处理的策略——避免死锁" class="headerlink" title="3.死锁处理的策略——避免死锁"></a><font color=red>3.死锁处理的策略——避免死锁</font></h4><h5 id="（1）什么是安全序列"><a href="#（1）什么是安全序列" class="headerlink" title="（1）什么是安全序列"></a>（1）什么是安全序列</h5><p>你是一位成功的银行家，手里掌握着 100 个亿的资金..</p><p>有三个企业想找你贷款，分别是企业 B、企业 A、企业 T，为描述方便，简称<strong>BAT</strong>。</p><p><img src="https://s1.ax1x.com/2022/05/16/OhpeaD.png" alt="OhpeaD.png"></p><p>B 表示： “大哥，我最多会跟你借 70 亿..”</p><p>A 表示： “大哥，我最多会跟你借 40 亿.</p><p>T 表示： “大哥，我最多会跟你借 50 亿…”</p><p><strong>然而.江湖中有个不成文的规矩：如果你借给企业的钱总数达不到企业提出的最大要求，那么不管你之前给企业借了多少钱，那些钱都拿不回来了.</strong></p><p>刚开始， BAT 三个企业分别从你这儿借了 20、10、30 亿</p><p><img src="https://s1.ax1x.com/2022/05/16/OhpQxI.png" alt="OhpQxI.png"></p><center>最大需求 - 已借走 = 最多还会借</center><p>手里还有 40 亿。此时，B 还想借 30 亿，你敢借吗？假如答应了 B 的请求……</p><p><img src="https://s1.ax1x.com/2022/05/16/Oh9U0K.png" alt="Oh9U0K.png"></p><p>手里还剩 10 亿。只剩下 10 亿，如果 BAT 都提出要再借 20 亿的请求，然么任何一个企业的需求都得不到满足。所以给 B 借走 30 亿的资金是不安全的…</p>]]></content>
      
      
      <categories>
          
          <category> OS学习笔记 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>二十三、多生产者，消费者问题</title>
      <link href="/2022/05/10/f16ecf85/"/>
      <url>/2022/05/10/f16ecf85/</url>
      
        <content type="html"><![CDATA[<h4 id="1-问题描述"><a href="#1-问题描述" class="headerlink" title="1.问题描述"></a>1.问题描述</h4><p>桌子上有一只盘子，每次只能向其中放入一个水果，爸爸专向盘子中放水果，妈妈专向盘子中放橘子，儿子专等着吃盘子中的橘子，女儿专等着吃盘子中的苹果。只有盘子为空时，爸爸或妈妈才可向盘子中放一个水果。仅当盘子中有自己需要的水果时，儿子或女儿可以从盘子中取出水果。用 PV 操作实现上述过程。</p><span id="more"></span><p>可以将盘子看做大小为 1，初始为空的缓冲区，爸爸和妈妈分别看做生产者进程 1 和生产者进程 2，女儿和儿子看做消费者进程 1 和消费者进程 2，</p><blockquote><p>1.关系分析：找出</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> OS学习笔记 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 操作系统 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>二十二、生产者消费者问题</title>
      <link href="/2022/05/01/e8309ad7/"/>
      <url>/2022/05/01/e8309ad7/</url>
      
        <content type="html"><![CDATA[<h4 id="1-问题描述"><a href="#1-问题描述" class="headerlink" title="1.问题描述"></a>1.问题描述</h4><p>系统中有一组生产者进程和一组消费者进程，生产者进程每次生产一个产品放入缓冲区，消费者进程每次从缓冲区中去除一个产品并使用。（这里的“产品”理解为某种数据）</p><span id="more"></span><p>生产者、消费者<strong>共享一个初始为空、大小为n的缓冲区。</strong></p><p>只有<strong>缓冲区没满</strong>时，生产者才能把产品放入缓冲区。</p><p>只有<strong>缓冲区不空</strong>时，消费者才能从中取走产品，否则必须等待。</p><p><img src="https://s1.ax1x.com/2022/05/01/OC1z3q.png"></p><p>生产者进程每次生产一个产品，消费者进程每次取走一个产品。当缓冲区为满时，只能阻塞生产者进程，切换为消费者进程取走产品。只要缓冲区中又大于或等于1个可用的空间时就可以唤醒生产者进程继续生产。</p><p><img src="https://s1.ax1x.com/2022/05/01/OC3t2t.png" alt="OC3t2t.png"></p><p>当缓冲区为空，消费者进程就没有可以被取走的产品了，只能阻塞消费者进程，等待产品被放入缓冲区。</p><p><img src="https://s1.ax1x.com/2022/05/01/OC8AL8.png" alt="OC8AL8.png"></p><p>缓冲区属于临界资源，各个进程必须互斥地访问。如果不属于临界资源，则各生产者进程并发地执行时由于无法控制执行进度，有可能导致两个进程同时访问缓冲区的同一块区域导致数据冲突。</p><p><strong>如何用信号量机制（P、V操作）实现生产者、消费者进程的这些功能？</strong></p><p>信号量机制可以实现互斥、同步、对一类系统资源的申请和释放。</p><p>互斥：设置初始值为1的互斥信号量。</p><p>同步：设置初始值为0的同步信号量（实现“一前一后”）</p><p>申请和释放资源：设置一个信号量，初始值为资源的数量（本质上也是属于“同步问题”，若无空闲资源，则申请自愿的进程需要等待别的进程释放资源后才能据需执行下去）</p><blockquote><p>分析：</p><p>1.关系分析：找出题目中描述的各个进程，分析它们之间的同步关系。</p><ul><li>只有<strong>缓冲区没满</strong>时，生产者才能把产品放入缓冲区。这个属于同步关系。缓冲区没满时，生产者要等待消费者取走产品。</li><li>只有<strong>缓冲区不空</strong>时，消费者才能从中取走产品，否则必须等待。这个也属于同步关系。缓冲区为空时（即没有产品时），消费者要等待生产者生产商品。</li><li>只有<strong>缓冲区不空</strong>时，消费者才能从中取走产品，否则必须等待。这个属于互斥关系。</li></ul><p>2.整理思路，根据各进程的操作流程确定P、V操作的大致顺序。</p><p>生产者每次要消耗（P）一个空闲缓冲区，并生产（V）一个产品。消费者者每次要消耗（P）一个产品，并释放一个空闲的缓冲区（V）。往缓冲区放入，取走产品需要互斥。</p><p>3.设置信号量。设置需要的信号量，并根据题目题目条件确定信号量初值（互斥信号量初值一般为1，同步信号量的初始值要看对应资源的初始值是多少）</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">semaphore mutex = <span class="number">1</span>;  <span class="comment">//互斥信号量，实现进程互斥访问。</span></span><br><span class="line">semaphore empty = n;  <span class="comment">//同步信号量，表示空闲缓冲区的数量。</span></span><br><span class="line">semaphore full = <span class="number">0</span>;   <span class="comment">//同步信号量，表示产品的数量，也即非空缓冲区的数量。</span></span><br></pre></td></tr></table></figure></blockquote><h4 id="2-如何实现"><a href="#2-如何实现" class="headerlink" title="2.如何实现"></a>2.如何实现</h4><p>根据上面设置的信号量，实现响应代码：</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//生产者进程</span></span><br><span class="line">producer()&#123;</span><br><span class="line">    <span class="keyword">while</span>(<span class="number">1</span>)&#123;</span><br><span class="line">        生产一个产品;</span><br><span class="line">        P(empty);   <span class="comment">//消耗一个空闲缓冲区</span></span><br><span class="line">        P(mutex);   <span class="comment">//实现进程互斥</span></span><br><span class="line">        把产品放入缓冲区;</span><br><span class="line">        V(mutex);   </span><br><span class="line">        V(full);    <span class="comment">//增加一个产品</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//消费者进程</span></span><br><span class="line">consumer()&#123;</span><br><span class="line">    <span class="keyword">while</span>(<span class="number">1</span>)&#123;</span><br><span class="line">        P(full);   <span class="comment">//消耗一个产品（非空缓冲区）,此P操作用于实现进程同步</span></span><br><span class="line">        P(mutex);  <span class="comment">//此P操作用于实现进程互斥</span></span><br><span class="line">        从缓冲区取走一个产品;</span><br><span class="line">        V(mutex);</span><br><span class="line">        V(empty);   <span class="comment">//增加一个空闲缓冲区</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">P(mutex);</span></span><br><span class="line"><span class="comment">把产品放入缓冲区;</span></span><br><span class="line"><span class="comment">V(mutex);</span></span><br><span class="line"><span class="comment">上面的代码实现了进程互斥，实现互斥是在同一进程中进程一对PV操作</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">生产者进程的V(full)和消费者进程的P(full)用于实现两个进程的同步关系。即在其中一个一个进程中执行P，另一个进程中执行V</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure><h4 id="3-思考：能否改变相邻P，V操作的顺序？"><a href="#3-思考：能否改变相邻P，V操作的顺序？" class="headerlink" title="3.思考：能否改变相邻P，V操作的顺序？"></a>3.思考：能否改变相邻P，V操作的顺序？</h4><p><img src="https://s1.ax1x.com/2022/05/01/OCUYTK.png" alt="OCUYTK.png"></p><p>生产者生产产品和消费者消费产品从代码上看是放在PV操作之外。能不能放到PV操作之内呢？从逻辑上来看是没问题，可以让消费者从缓冲区中取出一个产品后就立即使用这个产品。但会导致临界区代码量变大，消费者进程在访问临界区的过程中就需要花费更多的时间，如果此时有别的进程也需要访问临界资源则消费者进程会被阻塞，会导致进程的并发度降低，尽量不要放入PV操作之中。</p><h4 id="4-知识回顾"><a href="#4-知识回顾" class="headerlink" title="4.知识回顾"></a>4.知识回顾</h4><p><img src="https://s1.ax1x.com/2022/05/01/OCaFhD.png" alt="OCaFhD.png"></p>]]></content>
      
      
      <categories>
          
          <category> OS学习笔记 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 操作系统 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>二十一、用信号量机制实现进程互斥、同步和前驱关系</title>
      <link href="/2022/04/27/a21ccea8/"/>
      <url>/2022/04/27/a21ccea8/</url>
      
        <content type="html"><![CDATA[<h4 id="1-信号量机制实现进程互斥"><a href="#1-信号量机制实现进程互斥" class="headerlink" title="1.信号量机制实现进程互斥"></a>1.信号量机制实现进程互斥</h4><ol><li>分析并发进程的关键活动，划定临界区（如：对临界资源打印机的访问就应放在临界区）</li><li>设置<strong>互斥信号量 mutex，初始值为 1</strong></li><li>在临界区之前执行 P(mutex)</li><li>在临界区之后执行 V(mutex)</li></ol><span id="more"></span><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//信号量机制实现互斥</span></span><br><span class="line">semaphore mutex=<span class="number">1</span>; <span class="comment">//初始化信号量</span></span><br><span class="line"></span><br><span class="line">P1()&#123;</span><br><span class="line">    ...</span><br><span class="line">    P(mutex); <span class="comment">//使用临界区资源前需要加锁</span></span><br><span class="line">    临界代码区段....</span><br><span class="line">    V(mutex); <span class="comment">//使用临界区资源后需要解锁</span></span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">P2()&#123;</span><br><span class="line">    ...</span><br><span class="line">    P(mutex);</span><br><span class="line">    临界代码区段....</span><br><span class="line">    V(mutex);</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//原理与上节类似</span></span><br></pre></td></tr></table></figure><p>注意：**对不同的临界资源需要设置不同的互斥信号量。P，V 操作必须成对出现。**缺少 P(mutex)就不能保证临界区资源的互斥访问。缺少 V(mutex)会导致资源永不被释放，等待进程永不被唤醒。</p><p><img src="https://s1.ax1x.com/2022/04/27/LLm4VH.png" alt="LLm4VH.png"></p><h4 id="2-信号量机制实现进程同步"><a href="#2-信号量机制实现进程同步" class="headerlink" title="2.信号量机制实现进程同步"></a>2.信号量机制实现进程同步</h4><p>进程同步：要让各并发进程按要求有序地推进</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//比如，P1、P2并发的执行，由于存在异步性，因此二者交替推进的次序是不确定的。</span></span><br><span class="line"><span class="comment">//若P2的“代码4”要基于P1的“代码1”和“代码2”的运行结果才能执行，那么我们就必须保证“代码4”一定是</span></span><br><span class="line"><span class="comment">//在“代码2”之后才会执行。</span></span><br><span class="line">P1()&#123;</span><br><span class="line">    代码<span class="number">1</span>;</span><br><span class="line">    代码<span class="number">2</span>;</span><br><span class="line">    代码<span class="number">3</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">P2()&#123;</span><br><span class="line">    代码<span class="number">4</span>;</span><br><span class="line">    代码<span class="number">5</span>;</span><br><span class="line">    代码<span class="number">6</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>用信号量实现进程同步：</p><ol><li>分析什么地方需要实现“同步关系”，即必须保证“一前一后”执行的两个操作（或两句代码）</li><li>设置<strong>同步信号量 S，初始值为 0</strong>。</li><li><strong>在“前操作”之后执行 V(S)；</strong></li><li><strong>在“后操作”之前执行 P(S)；</strong></li></ol><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//信号量机制实现同步</span></span><br><span class="line">semaphore S=<span class="number">0</span>; <span class="comment">//初始化同步信号量</span></span><br><span class="line"></span><br><span class="line">P1()&#123;</span><br><span class="line">    代码<span class="number">1</span>;</span><br><span class="line">    代码<span class="number">2</span>;</span><br><span class="line">    V(S);</span><br><span class="line">    代码<span class="number">3</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">P2()&#123;</span><br><span class="line">    P(S);</span><br><span class="line">    代码<span class="number">4</span>;</span><br><span class="line">    代码<span class="number">5</span>;</span><br><span class="line">    代码<span class="number">6</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">若先执行到V(S)操作，则S++后S=1.之后当执行到P(S)操作时，由于S=1，表示有可用资源，会执行S--，S的值变回0，P2的进程不会执行block原语，而是继续往下执行代码4.</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">若先执行到P(S)操作，由于S=0，S--后S=-1，表示此时没有可用资源，因此P操作中会执行block原语，主动请求阻塞。之后当执行完代码2，继而执行V(S)操作，S++，使S变回0由于此时有进程在该信号量对应的阻塞队列中，因此会在V操作中执行wakeup原语，唤醒P2进程。这样P2就可以继续执行代码4了。</span></span><br><span class="line"><span class="comment">这样就保证了代码4一定是在代码2之后执行。</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">这里有一点不理解。前面说过了同步信号量S=0时表示没有可用资源，但是如果先执行了P(S)操作，同步信号量S的值会变为-1并阻塞自己，当V(S)被执行后同步信号量S的值变为0并执行wakeup操作唤醒进程P2，若按照前面的陈述那么P2也会认为此时并没有可用资源，因为同步信号量S的值为0，这样P2进程不就饿死了吗？</span></span><br><span class="line"><span class="comment">不知道是不是我听漏了什么。</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure><h4 id="3-信号量机制实现前驱关系"><a href="#3-信号量机制实现前驱关系" class="headerlink" title="3.信号量机制实现前驱关系"></a>3.信号量机制实现前驱关系</h4><p>进程 P1 中有句代码 S1，P2 中有句代码 S2 一直到 P6。这些代码要求按照如下前驱图所示的顺序来执行。</p><p><img src="https://s1.ax1x.com/2022/04/27/LL3Vcn.png" alt="LL3Vcn.png"></p><p>每一对前驱关系都是一个进程同步问题（需要保证一前一后的操作）</p><p>因此：</p><ol><li>要<strong>为每一对前驱关系各设置一个同步变量</strong>a，b，c，d，e，f，g</li><li><strong>在“前操作”之后对相应的同步变量执行 V 操作</strong></li><li><strong>在“后操作”之前对相应的同步变量执行 P 操作</strong></li></ol><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line">P1()&#123;</span><br><span class="line">    ...</span><br><span class="line">    S1;</span><br><span class="line">    V(a);</span><br><span class="line">    V(B);</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br><span class="line">P2()&#123;</span><br><span class="line">    ...</span><br><span class="line">    P(a);</span><br><span class="line">    S2;</span><br><span class="line">    V(c);</span><br><span class="line">    V(d);</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br><span class="line">P3()&#123;</span><br><span class="line">    ...</span><br><span class="line">    P(b);</span><br><span class="line">    S3;</span><br><span class="line">    V(g);</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br><span class="line">P4()&#123;</span><br><span class="line">    ...</span><br><span class="line">    P(c);</span><br><span class="line">    S4;</span><br><span class="line">    V(e);</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br><span class="line">P5()&#123;</span><br><span class="line">    ...</span><br><span class="line">    P(d);</span><br><span class="line">    P(f);</span><br><span class="line">    S5;</span><br><span class="line">    V(f);</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br><span class="line">P6()&#123;</span><br><span class="line">    ...</span><br><span class="line">    P(e);</span><br><span class="line">    P(f);</span><br><span class="line">    P(g);</span><br><span class="line">    S6;</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>大概是这个样子：</p><p><img src="https://s1.ax1x.com/2022/04/27/LL8rIU.png" alt="LL8rIU.png"></p><h4 id="4-知识回顾"><a href="#4-知识回顾" class="headerlink" title="4.知识回顾"></a>4.知识回顾</h4><p><img src="https://s1.ax1x.com/2022/04/27/LLGPzj.png" alt="LLGPzj.png"></p>]]></content>
      
      
      <categories>
          
          <category> OS学习笔记 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 操作系统 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>二十、信号量机制</title>
      <link href="/2022/04/27/b091a7c2/"/>
      <url>/2022/04/27/b091a7c2/</url>
      
        <content type="html"><![CDATA[<h4 id="1-信号量机制"><a href="#1-信号量机制" class="headerlink" title="1.信号量机制"></a>1.信号量机制</h4><p>进程互斥的四种软件实现方式和进程互斥的三种硬件实现方式都存在一些问题。</p><p>1.在双标志检查法中，<strong>进入区的“检查”、‘上锁”操作无法一气呵成</strong>，从而导致了两个进程有可能同时进入临界区的问题。</p><p>2.所有的解决方案都<strong>无法实现“让权等待”</strong>。</p><p>1965年，荷兰学者迪杰斯特拉Dijkstra提出了一种卓有成效的实现进程互斥、同步的方法–<strong>信号量机制</strong></p><span id="more"></span><p>用户可以通过使用操作系统提供的<strong>一对原语</strong>来对<strong>信号量</strong>进行操作，从而很方便地实现了进程互斥、进程同步。<strong>信号量</strong>其实就是一个变量（可以是一个整数，也可以是更复杂的记录型信号量），可以用一个信号量来<strong>表示系统中的某种资源的数量</strong>。</p><p><strong>原语</strong>是一种特殊的程序段，其<strong>执行只能一气呵成，不可被中断。<strong>原语是由</strong>关中断&#x2F;开中断指令</strong>实现的，软件解决方案的主要问题是由“进入区的各种操作无法一气呵成”，因此如果能把进入区、退出区的操作都用原语实现，使这些操作能“一气呵成”就能避免问题。</p><p><strong>一对原语</strong>：<strong>wait（s）<strong>原语和</strong>signal（s）<strong>原语，可以把原语理解为我们自己写的函数，函数名称分别为wait和signal，括号里的</strong>信号量s</strong>其实就是函数调用时传入的一个参数。wait、signal原语常<strong>简称为P，V操作</strong>（来自荷兰语proberen和verhogen，意思是“尝试”和“增加”）。因此，wait（s）和signal（s）可被简写为<strong>P（s）和V（s）。</strong></p><h4 id="2-整形信号量"><a href="#2-整形信号量" class="headerlink" title="2.整形信号量"></a>2.整形信号量</h4><p>用一个<strong>整数型的变量</strong>作为信号量，来<strong>表示系统中的某种资源的数量。</strong></p><p>如：某计算机系统中有一台打印机：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> <span class="variable">S</span> <span class="operator">=</span> <span class="number">1</span>; <span class="comment">//初始化整形信号量S，表示当前系统中可用的打印机资源数</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">wait</span><span class="params">(<span class="type">int</span> S)</span>&#123;  <span class="comment">//wait原语，相当于“进入区”</span></span><br><span class="line">    <span class="keyword">while</span>(s &lt;= <span class="number">0</span>); <span class="comment">//如果资源数不够，就一直循环等待</span></span><br><span class="line">    S = S - <span class="number">1</span>;     <span class="comment">//如果资源数够，就占用一个资源</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">signal</span><span class="params">(<span class="type">int</span> S)</span>&#123; <span class="comment">//signal原语，相当于&quot;退出区&quot;</span></span><br><span class="line">    S = S + <span class="number">1</span>;      <span class="comment">//使用完资源后，在退出区释放资源</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//如果一个进程P0想要访问打印机，则其操作的伪代码为：</span></span><br><span class="line">...</span><br><span class="line">wait(S); <span class="comment">//进入区，申请自愿</span></span><br><span class="line">使用的印记资源... <span class="comment">//临界区，访问资源</span></span><br><span class="line">signal(S);  <span class="comment">//退出区，释放资源</span></span><br><span class="line">...</span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line"><span class="comment">//如果进程P1在进程P0正在放问打印机时想要访问打印机资源，只能一直执行wait(S)，等待进程P0释放</span></span><br><span class="line"><span class="comment">//临界区资源。</span></span><br><span class="line">...</span><br><span class="line">wait(S);</span><br><span class="line">访问打印机资源...</span><br><span class="line">signal(S);</span><br><span class="line">...</span><br></pre></td></tr></table></figure><p>信号量其与普通整数变量的区别：对信号量的操作只有三种，即 初始化、P操作、V操作。在wait原语中，“检查”和“上锁”一气呵成，避免了并发、异步导致的问题。但是如果信号量S为0，则其中的while语句会一直检查信号量S的占用情况，会一直占用处理机，不满足“让权等待”原则，会发生“忙等”。</p><h4 id="3-记录型信号量（重要）"><a href="#3-记录型信号量（重要）" class="headerlink" title="3.记录型信号量（重要）"></a>3.记录型信号量（<font color=red>重要</font>）</h4><p>整形信号量的缺陷是存在“忙等”的问题，因此人们又提出了“记录型信号量”，即用记录型数据结构表示的信号量。</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//信号量的数据结构</span></span><br><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span>&#123;</span></span><br><span class="line">    <span class="type">int</span> value;   <span class="comment">//剩余资源数</span></span><br><span class="line">    <span class="class"><span class="keyword">struct</span> <span class="title">process</span> *<span class="title">L</span>;</span>  <span class="comment">//等待队列</span></span><br><span class="line">&#125; semphore;</span><br><span class="line"></span><br><span class="line"><span class="comment">//某进程需要使用资源时，通过wait原语申请</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">wait</span><span class="params">(semaphore S)</span>&#123;</span><br><span class="line">    S.value--;</span><br><span class="line">    <span class="keyword">if</span>(S.value &lt; <span class="number">0</span>)&#123;  <span class="comment">//如果剩余资源不够，使用block原语使进程从运行态进入阻塞态，并把它挂到</span></span><br><span class="line">        block(S.L);   <span class="comment">//信号量S的等待队列（即阻塞队列）中</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//进程使用完资源后，通过signal原语释放</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">signal</span><span class="params">(semaphore S)</span>&#123;</span><br><span class="line">    S.value++;</span><br><span class="line">    <span class="keyword">if</span>(S.value&lt;=<span class="number">0</span>)&#123;  <span class="comment">//释放资源后，如果还有别的进程在等待这种资源，则使用wakeup原语唤醒</span></span><br><span class="line">        wakeup(S.L); <span class="comment">//等待队列中的一个进程，使该进程从阻塞态变为就绪态。</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>例：某计算机系统中有两台打印机，则可在初始化信号量S时将S.value的值设为2，队列S.L设置为空</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span>&#123;</span></span><br><span class="line">    <span class="type">int</span> value;    <span class="comment">//剩余资源数为2</span></span><br><span class="line">    <span class="class"><span class="keyword">struct</span> <span class="title">process</span> *<span class="title">L</span>;</span>  <span class="comment">//等待队列-→null</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//P0进程</span></span><br><span class="line">...</span><br><span class="line">wait(S);</span><br><span class="line">使用打印机...</span><br><span class="line">signal(S);</span><br><span class="line">...</span><br><span class="line">    </span><br><span class="line"><span class="comment">//P1进程</span></span><br><span class="line">...</span><br><span class="line">wait(S);</span><br><span class="line">使用打印机...</span><br><span class="line">signal(S);</span><br><span class="line">...</span><br><span class="line">    </span><br><span class="line"><span class="comment">//P2进程</span></span><br><span class="line">...</span><br><span class="line">wait(S);</span><br><span class="line">使用打印机..</span><br><span class="line">signal(S);</span><br><span class="line">...</span><br><span class="line">    </span><br><span class="line"><span class="comment">//P3进程</span></span><br><span class="line">...</span><br><span class="line">wait(S);</span><br><span class="line">使用打印机...</span><br><span class="line">signal(S);</span><br><span class="line">...</span><br><span class="line">    </span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">解释：有点啰嗦，能看得懂就行。</span></span><br><span class="line"><span class="comment">cpu首先为p0服务，P0使用wait原语检查剩余资源，系统中剩余打印机资源为2，可以分配给P0，value值减1变为1，P0可以使用打印机。之后cpu又为p1服务，P1使用wait原语检查剩余资源，系统中剩余打印机资源为1，value值减1变为0，可以分配给P1，P1可以使用打印机。再次cpu为P2服务，P2使用wait原语检查剩余打印机资源，系统中剩余打印机资源为0，资源已经暂时全部被占用，value值减1变为-1小于0，P2进程主动执行block原语，P2被挂载到了打印机的等待队列中，P3同理，value值变为-2.</span></span><br><span class="line"><span class="comment">value值为0时资源刚好被分配完，为-1时有一个进程在等待，为-2时有两个进程在等待。</span></span><br><span class="line"><span class="comment">当P0使用完成后，会执行signal原语释放打印机，value值加一变为-1，但此时value的值为-1仍然小于0，就说明此时等待队列中不止一个进程在等待打印机资源，进程P0会主动执行wakeup原语唤醒队列中的队头进程P2，P2从阻塞队列中被切换到就绪队列。待P2进程切换至运行态时，就可占用P0释放的打印机资源了。其余后续步骤同理。</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure><p>wait(S)和signal(S)也可记为P(S)，V(S)，这对原语用于<strong>实现系统资源的申请和释放</strong>。</p><p><strong>S.value的初始值</strong>表示系统中<strong>某种资源的数目。</strong></p><p>对信号量S的<strong>一次P操作</strong>意味着进程<strong>请求一个单位的该类资源</strong>，因此需要执行S.balue–，表示资源数减1，当S.value&lt;0时表示该类资源已分配完毕，因此进程应<strong>调用block原语进行自我阻塞</strong>（当前运行的进程从<strong>运行态切换为阻塞态</strong>），主动放弃处理机，并插入该类资源的等待队列S.L中。可见，该机制<strong>遵循了“让权等待的原则”</strong>，不会出现“忙等”的现象。</p><p>对信号量S的<strong>一次V操作</strong>意味着进程<strong>释放一个单位的该类资源</strong>，因此需要执行S.value++，表示资源数+1，若加一后仍是S.value&lt;&#x3D;0，表示依然有进程在等待该类资源，因此应<strong>调用wakeup原语唤醒等待队列中的第一个进程</strong>（被唤醒的进程从<strong>阻塞态切换为就绪态</strong>）。</p><h4 id="4-知识回顾"><a href="#4-知识回顾" class="headerlink" title="4.知识回顾"></a>4.知识回顾</h4><p><img src="https://s1.ax1x.com/2022/04/27/LLCHn1.png" alt="LLCHn1.png"></p>]]></content>
      
      
      <categories>
          
          <category> OS学习笔记 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 操作系统 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>十九、进程互斥的硬件实现方法</title>
      <link href="/2022/04/27/1033e17e/"/>
      <url>/2022/04/27/1033e17e/</url>
      
        <content type="html"><![CDATA[<p>这里什么都没写，先占个坑以后再写。</p><span id="more"></span>]]></content>
      
      
      <categories>
          
          <category> OS学习笔记 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 操作系统 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>十八、进程互斥的软件实现方法</title>
      <link href="/2022/04/26/f8b5844d/"/>
      <url>/2022/04/26/f8b5844d/</url>
      
        <content type="html"><![CDATA[<h4 id="1-单标志法"><a href="#1-单标志法" class="headerlink" title="1.单标志法"></a>1.单标志法</h4><p>算法思想：两个进程在<strong>访问完临界区后</strong>会把使用临界区的权限转交给另一个进程。也就是说<strong>每个进程进入临界区的权限只能被另一个进程赋予。</strong></p><span id="more"></span><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> turn = <span class="number">0</span>; <span class="comment">//turn表示当前允许进入临界区的进程号</span></span><br></pre></td></tr></table></figure><p><strong>P0进程</strong>：</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">while</span>(turn != <span class="number">0</span>);    ①<span class="comment">//进入区</span></span><br><span class="line">critical section;  ②<span class="comment">//临界区</span></span><br><span class="line">turn = <span class="number">1</span>;          ③<span class="comment">//退出区</span></span><br><span class="line">remainder section; ④<span class="comment">//剩余区</span></span><br></pre></td></tr></table></figure><p><strong>P1进程</strong>：</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">while</span>(turn != <span class="number">1</span>);    ⑤</span><br><span class="line">critical section;  ⑥</span><br><span class="line">turn = <span class="number">1</span>;          ⑦</span><br><span class="line">remainder section; ⑧</span><br></pre></td></tr></table></figure><p>turn的初始值为0，即刚开始只允许0号进程进入临界区。若P1先上处理机运行，则会一直卡在⑤。直到P1的时间片用完，发生调度，切换P0上处理机运行。</p><p>代码①不会卡住P0，P0可以正常访问临界区，在P0访问临界区期间即时切换回P1，由于turn的初始值未改变，P1依然会卡在⑤。只有P0在退出区将turn改为1后，P1才能进入临界区。</p><p>因此，该算法<strong>可以实现“同一时刻最多只允许一个进程访问临界区”</strong>。</p><p>turn表示当前允许进入临界区的进程号，而只有当前允许进入临界区的进程在访问了临界区之后，才会修改turn的值。也就是说，对于临界区的访问，一定是按照P0→P1→P0→P1→……这样轮流访问。这种必须“轮流访问”带来的问题是，如果此时允许进入临界区的进程是P0，而P0一直不访问临界区，那么虽然此时临界区空闲，但是并不允许P1访问。</p><p>因此，<strong>单标志法</strong>存在的主要问题是：<strong>违背“空闲让进”原则。</strong></p><h4 id="2-双标志先检查法"><a href="#2-双标志先检查法" class="headerlink" title="2.双标志先检查法"></a>2.双标志先检查法</h4><p>算法思想：设置一个布尔型数组flag[]，数组中的各个元素用来<strong>标记各进程想进入临界区的意愿</strong>，比如“flag[0]&#x3D;true”意味着0号进程P0现在想要进入临界区。每个进程在进入临界区之前检查当前有没有别的进程想进入临界区，如果没有，则把自身对应的标志flah[i]设置为ture，之后开始访问临界区。</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">bool flag[<span class="number">2</span>]; <span class="comment">//表示进入临界区意愿的数组</span></span><br><span class="line">flag[<span class="number">0</span>] = <span class="literal">false</span>;</span><br><span class="line">flag[<span class="number">1</span>] = <span class="literal">false</span>; <span class="comment">//刚开始设置为两个进程不想进入临界区</span></span><br></pre></td></tr></table></figure><p>P0进程：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">while</span>(flag[<span class="number">1</span>]);      ①</span><br><span class="line">flag[<span class="number">0</span>] = ture;      ②</span><br><span class="line">critical section;    ③</span><br><span class="line">flag[<span class="number">0</span>] = <span class="literal">false</span>;     ④</span><br><span class="line">remainder section;   </span><br></pre></td></tr></table></figure><p>P1进程：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">while</span>(flag[<span class="number">0</span>]);      ⑤  <span class="comment">//如果此时P0想进入临界区，P1就一直循环等待</span></span><br><span class="line">flag[<span class="number">1</span>] = <span class="literal">true</span>;      ⑥  <span class="comment">//标记为P1进程想要进入临界区</span></span><br><span class="line">critical section;    ⑦  <span class="comment">//访问临界区</span></span><br><span class="line">flag[<span class="number">1</span>] = <span class="literal">false</span>;     ⑧  <span class="comment">//访问完临界区，修改标记为P1不想使用临界区</span></span><br><span class="line">remainder section;</span><br></pre></td></tr></table></figure><p>若按照1,5,2,6,3,7的顺序执行，P0和P1将会同时访问临界区。因此，双标志检查法的<strong>主要问题</strong>是：**违反“忙则等待”原则。**原因在于，<strong>进入区</strong>的“检查”和“上锁”<strong>两个处理不是一气呵成的</strong>，“检查”后，“上锁”前可能发生进程切换。</p><h4 id="3-双标志后检查法"><a href="#3-双标志后检查法" class="headerlink" title="3.双标志后检查法"></a>3.双标志后检查法</h4><p>算法思想：双标志检查法的改版。前一个算法的问题是先“检查”后“上锁”，但是这两个操作又无法一气呵成，因此导致了两个进程同时进入临界区的问题。因此，人们又想到先“上锁”后“检查”的方法，来避免上述问题。</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">bool flag[<span class="number">2</span>]; <span class="comment">//表示进入临界区意愿的始祖</span></span><br><span class="line">flag[<span class="number">0</span>] = <span class="literal">false</span>;</span><br><span class="line">flag[<span class="number">1</span>] = <span class="literal">false</span>; <span class="comment">//刚开始设置为两个进程不想进入临界区</span></span><br></pre></td></tr></table></figure><p>P0进程：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">flag[<span class="number">0</span>] = ture;      ①</span><br><span class="line"><span class="keyword">while</span>(flag[<span class="number">1</span>]);      ②</span><br><span class="line">critical section;    ③</span><br><span class="line">flag[<span class="number">0</span>] = <span class="literal">false</span>;     ④</span><br><span class="line">remainder section;   </span><br></pre></td></tr></table></figure><p>P1进程：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">flag[<span class="number">1</span>] = <span class="literal">true</span>;      ⑤  <span class="comment">//如果此时P0想进入临界区，P1就一直循环等待</span></span><br><span class="line"><span class="keyword">while</span>(flag[<span class="number">0</span>]);      ⑥  <span class="comment">//标记为P1进程想要进入临界区</span></span><br><span class="line">critical section;    ⑦  <span class="comment">//访问临界区</span></span><br><span class="line">flag[<span class="number">1</span>] = <span class="literal">false</span>;     ⑧  <span class="comment">//访问完临界区，修改标记为P1不想使用临界区</span></span><br><span class="line">remainder section;</span><br></pre></td></tr></table></figure><p>若按照1,5,2,6….的顺序执行，P0和P1将都无法访问临界区。因此，双标志后检查法虽然<strong>解决了“忙则等待”的问题</strong>的问题，但是又<strong>违背了“空闲让进”和“有限等待”原则</strong>，会因各进程都长期无法访问临界区而**产生“饥饿”**现象。</p><h4 id="4-皮特森（Peterson）算法"><a href="#4-皮特森（Peterson）算法" class="headerlink" title="4.皮特森（Peterson）算法"></a>4.皮特森（Peterson）算法</h4><p>算法思想：双标志后检查法中，两个进程都想争着进入临界区，但是谁也谁，最后谁都无法进入临界区。Gary L.Peterson想到了一种方法，如果双方都争着想要进入临界区，那可以让进程尝试“孔融让梨”，主动让对方使用临界区。</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">bool flag[<span class="number">2</span>]; <span class="comment">//表示进入临界区意愿的数组，初始都是false</span></span><br><span class="line"><span class="type">int</span> <span class="variable">turn</span> <span class="operator">=</span> <span class="number">0</span>; <span class="comment">//turn表示优先让那个进程进入临界区</span></span><br></pre></td></tr></table></figure><p>P0进程：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">flag[<span class="number">0</span>] = ture;               ①</span><br><span class="line">turn = <span class="number">1</span>;                     ②</span><br><span class="line"><span class="keyword">while</span>(flag[<span class="number">1</span>] &amp;&amp; turn == <span class="number">1</span>);  ③</span><br><span class="line">critical section;             ④</span><br><span class="line">flag[<span class="number">0</span>] = <span class="literal">false</span>;              ⑤</span><br><span class="line">remainder section;</span><br></pre></td></tr></table></figure><p>P2进程：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">flag[<span class="number">1</span>] = ture;               ⑥ <span class="comment">//表示自己想进入临界区</span></span><br><span class="line">turn = <span class="number">0</span>;                     ⑦ <span class="comment">//可以优先让对方进入临界区</span></span><br><span class="line"><span class="keyword">while</span>(flag[<span class="number">0</span>] &amp;&amp; turn == <span class="number">0</span>);  ⑧ <span class="comment">//对方想进，且最后一次是自己“让梨”，拿自己就循环等待</span></span><br><span class="line">critical section;             ⑨ </span><br><span class="line">flag[<span class="number">1</span>] = <span class="literal">false</span>;              ⑩ <span class="comment">//访问完临界区，表示自己已经不想访问临界区了</span></span><br><span class="line">remainder section;</span><br></pre></td></tr></table></figure><p>两种双标志检查法的问题都是由于进入区的几个操作不能一气呵成导致的。我们可以推理验证在Peterson算法中，两个进程进入区中的各个操作按不同顺序穿插执行会发生什么情况。</p><blockquote><p>进入区：</p><ul><li>①主动争取</li><li>②主动谦让</li><li>③检查对方是否也想使用，且最后一次是不是自己说了“客气话”</li></ul></blockquote><p>皮特森算法是用软件方法解决了进程互斥的问题，<strong>遵循了空闲让进，忙则等待，有限等待三个原则</strong>，但是依然<strong>未遵循让权等待</strong>的原则。</p><p><img src="https://s1.ax1x.com/2022/04/27/LqWWvR.png" alt="LqWWvR.png"></p>]]></content>
      
      
      <categories>
          
          <category> OS学习笔记 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 操作系统 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>十七、进程同步和进程互斥</title>
      <link href="/2022/04/26/54ab1cbe/"/>
      <url>/2022/04/26/54ab1cbe/</url>
      
        <content type="html"><![CDATA[<h4 id="1-什么是进程同步"><a href="#1-什么是进程同步" class="headerlink" title="1.什么是进程同步"></a>1.什么是进程同步</h4><p>回顾：进程具有<strong>异步性</strong>的特征。异步性是指：各自并发执行的进程以各自独立的、不可预知的速度向前推进。</p><p>例子：进程通信 —- 管道通信</p><p>写进程往管道里写数据，读进程再从管道里读数据。读进程和写进程并发地运行，由于并发必然导致异步性，因此“写数据”和“读数据”两个操作执行的先后顺序是不确定的。而实际应用中，又必须按照**“写数据 → 读数据”<strong>的顺序来执行，如何解决这种一部问题，就是</strong>进程同步**所讨论的内容。</p><span id="more"></span><p><img src="https://s1.ax1x.com/2022/04/26/LHoKCF.png" alt="LHoKCF.png"></p><p><strong>同步</strong>又称<strong>直接制约关系</strong>，它是指为完成某种任务而建立的两个或多个进程。这些进程因为需要在某些位置上<strong>协调</strong>他们的<strong>工作次序</strong>而产生的制约关系。进程间的直接制约关系就是源于它们之间的相互合作。操作系统需要提供一种**“进程同步机制”**来实现进程的同步执行需求。</p><h4 id="2-什么是进程互斥"><a href="#2-什么是进程互斥" class="headerlink" title="2.什么是进程互斥"></a>2.什么是进程互斥</h4><p>进程的“并发”需要“共享”的支持。各个并发执行的进程不可避免的需要共享一些系统资源（如内存，打印机和摄像头等 I&#x2F;O 设备）</p><blockquote><p>两种资源的共享方式</p><ul><li><strong>互斥共享方式</strong>：系统中的某些资源可以提供给多个进程使用，但<strong>一个时间段内只允许一个进程访问资源</strong>。</li><li><strong>同时共享方式</strong>：系统中的某些资源，<strong>允许一个时间段内有多个进程“同时”对它们进行访问</strong>。</li></ul></blockquote><p>我们把<strong>一个时间段内只允许一个进程使用</strong>的资源称为<strong>临界资源</strong>，许多物理设备（如打印机，摄像头）都属于临界资源。此外还有许多变量、数据、内存缓冲区等都属于临界资源。</p><p>对临界资源的访问，必须<strong>互斥</strong>地进行。互斥，亦称<strong>间接制约关系。进程互斥</strong>指当一个进程访问某临界资源时，另一个想要访问该临界资源的进程必须等待。当访问临界资源的进程结束访问，释放该资源之后，另一个进程才能去访问临界资源。</p><p>对临界资源的互斥访问，可以在逻辑上分为如下四个部分：<strong>进入区，临界区，退出区和剩余区</strong>。</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">do</span>&#123;</span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">    * 进入区，负责检查是否可进入临界区，若可以进入，则应设置   正在访问临界资源  的标志（可理     * 解为“上锁”），以阻止其他进程同时进入临界区。</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">    entry section;</span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">    * 临界区，访问临界资源的那段代码</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">    circtical section;</span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">    * 退出区，负责解除 正在访问临界资源 的标志（可理解为“解锁”）</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">    <span class="built_in">exit</span> section;</span><br><span class="line">     <span class="comment">/*</span></span><br><span class="line"><span class="comment">    * 剩余区，作其他处理</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">    remainder section;</span><br><span class="line">&#125;<span class="keyword">while</span>(<span class="literal">true</span>)</span><br><span class="line">     <span class="comment">/*</span></span><br><span class="line"><span class="comment">    * 注意：临界区是进程中访问临界资源的那段代码。进入区和退出去是负责实现互斥的代码段。临界     * 区亦可成为“临界段”</span></span><br><span class="line"><span class="comment">    */</span></span><br></pre></td></tr></table></figure><p>如果一个进程暂时不能进入临界区，那么该进程是否应该一直占着处理机？该进程有没有可能一直进不了临界区？</p><p>为了实现对临界资源的互斥访问，同时保证系统整体性能，需要遵循以下原则：</p><ul><li>空闲让进：临界区空闲时，可以允许一个请求进入临界区的进程立即进入临界区；</li><li>忙则等待：当已有进程进入临界区时，其他视图进入临界区的进程必须等待。</li><li>有限等待：对请求访问的进程，应当保证在有限的时间内进入临界区（保证不会饥饿）</li><li>让权等待：当进程不能进入临界区时，应立即释放处理机，防止进程忙等待（连续等待进入临界区占用大量处理机资源）。</li></ul><h4 id="3-知识回顾"><a href="#3-知识回顾" class="headerlink" title="3.知识回顾"></a>3.知识回顾</h4><p><img src="https://s1.ax1x.com/2022/04/26/LHbARU.png" alt="LHbARU.png"></p>]]></content>
      
      
      <categories>
          
          <category> OS学习笔记 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 操作系统 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>十六、调度算法（2）</title>
      <link href="/2022/04/25/4bf7399/"/>
      <url>/2022/04/25/4bf7399/</url>
      
        <content type="html"><![CDATA[<h4 id="1-时间片轮转（RR，Round-Robin）"><a href="#1-时间片轮转（RR，Round-Robin）" class="headerlink" title="1.时间片轮转（RR，Round-Robin）"></a>1.时间片轮转（RR，Round-Robin）</h4><blockquote><h5 id="RR"><a href="#RR" class="headerlink" title="RR"></a>RR</h5><ul><li><p>算法思想：公平地、轮流地为每个进程服务，让每个进程在一定时间间隔内都可以得到响应</p></li><li><p>算法规则：按照各进程到达就绪队列的顺序，轮流让各个进程执行一个<strong>时间片</strong>。若进程未在一个时间片内执行完，则剥夺处理机，将进程重新放回就绪队列尾重新排队。</p></li><li><p>用于作业&#x2F;进程调度：用于进程调度（只有作业放入内存建立了相应的进程后，才能被分配处理及时间片）</p></li><li><p>是否可抢占？：若进程未在一个时间片内执行完，将被剥夺处理机使用权，因此时间片轮转调度算法属于<strong>抢占式</strong>的算法。由时钟装置发出<strong>时钟中断</strong>来通知CPU时间片已到。</p></li><li><p>优缺点：</p><ul><li>优点：公平；响应快，适用于分时操作系统</li><li>缺点：由于高频率的进程切换，因此有一定的开销；不区分任务的紧急程度。</li></ul></li><li><p>是否会导致饥饿：不会</p></li><li><p>补充：时间片太大或太小会有什么影响？</p></li></ul></blockquote><span id="more"></span><p>例题：例题：各进程到达就绪队列的时间、需要的时间如下表所示，使用<strong>时间片轮转</strong>调度算法，分析时间片大小分别是2、5时的运行情况。</p><p>时间片大小为2时的情况： </p><p><img src="https://s1.ax1x.com/2022/04/25/LTMgBj.png" alt="LTMgBj.png"></p><p><img src="https://s1.ax1x.com/2022/04/25/LTMTvF.png" alt="LTMTvF.png"></p><p><img src="https://s1.ax1x.com/2022/04/25/LTQibd.png" alt="LTQibd.png"></p><p>时间片大小为5时的情况：</p><p><img src="https://s1.ax1x.com/2022/04/25/LTQZPP.png" alt="LTQZPP.png"></p><p>注：时间片轮转算法常用于分时操作系统，更注重“响应时间”，因而此处不计算周转时间。对比发现，时间片轮转算法在时间片大小为5时和上一篇文章中的“先来先服务算法”调度结果类似。如果<strong>时间片太大</strong>，导致每个进程都能在一个时间片内完成，那么时间片轮转算法就会<strong>退化为先来先服务算法</strong>，并且会<strong>增大进程响应时间</strong>。因此<strong>时间片不能太大</strong>。另外方面，进程切换是有时间代价的（保存，恢复运行环境），因此如果<strong>时间片太小</strong>，会导致<strong>进程切换过于频繁</strong>，系统会花大量的时间来处理进程切换，从而导致实际用于进程执行的时间比例减少。可见<strong>时间片也不能太小</strong>。一般来说，设计时间片时要让切换进程的开销比例不超过1%。</p><h4 id="2-优先级调度算法"><a href="#2-优先级调度算法" class="headerlink" title="2.优先级调度算法"></a>2.优先级调度算法</h4><blockquote><h5 id="优先级调度算法"><a href="#优先级调度算法" class="headerlink" title="优先级调度算法"></a>优先级调度算法</h5><ul><li><p>算法思想：随着计算机的发展，特别是实时操作系统的出现，越来越多的应用场景需要根据任务的紧急程度来决定处理顺序。</p></li><li><p>算法规则：每个作业&#x2F;进程有各自的优先级，调度时选择优先级最高的作业&#x2F;进程。</p></li><li><p>用于作业&#x2F;进程调度：既可用于作业调度，也可用于进程调度。甚至还会用于I&#x2F;O调度中。</p></li><li><p>是否可抢占？：抢占式、非抢占式都有。非抢占式只需在进程主动放弃处级机时进行调度即可，而非抢占式还需在就绪队列变化时，检查是否会发生抢占。</p></li><li><p>优缺点：</p><ul><li>优点：用优先级区分任务的紧急程度、重要程度，适用于实时操作系统。可灵活的调整对各种作业&#x2F;进程的偏好程度。</li><li>缺点：若源源不断地有高优先级进程到来，则可能导致饥饿</li></ul></li><li><p>是否会导致饥饿：会</p></li></ul></blockquote><p>例题：各进程到达就绪队列的时间、需要的时间如下表所示，使用<strong>非抢占式</strong>和<strong>抢占式</strong>的<strong>优先级</strong>调度算法，分析进程的运行情况。（注：<strong>优先数越大优先级越高</strong>）</p><p>非抢占式：</p><p><img src="https://s1.ax1x.com/2022/04/25/LTQ1Vs.png" alt="LTQ1Vs.png"></p><p>抢占式：</p><p><img src="https://s1.ax1x.com/2022/04/25/LTQ3an.png" alt="LTQ3an.png"></p><p>注：就绪队列未必只有一个，可以按照不同的优先级组织。另外，可以吧优先级高的进程排在更靠近对头的位置。根据优先级是否可以动态地改变，可将优先级分为<strong>静态优先级</strong>和<strong>动态优先级</strong>两种。</p><p>静态优先级：创建进程时确定，之后一直不变。</p><p>动态优先级：创建进程时有一个初始值，之后会根据情况动态地调整优先级。</p><blockquote><p>如何和合理设置各类进程的优先级？通常，系统进程优先级<strong>高于</strong>用户进程；前台进程优先级<strong>高于</strong>后台进程；操作系统更<strong>偏好I&#x2F;O进程（或称I&#x2F;O繁忙型进程）</strong>。I&#x2F;O设备可以和CPU并行工作。如果优先让I&#x2F;O繁忙型进程优先运行的话，则越有可能让I&#x2F;O设备尽早地投入工作，则资源利用率、系统吞吐量都会得到提升。与I&#x2F;O型进程相对的是<strong>计算型进程（或称CPU繁忙型进程）</strong>。</p></blockquote><blockquote><p>如果采用的是动态优先级，什么时候应该调整？可以从追求公平，提升资源利用率等角度考虑。如果某进程在就绪队列中等待了很长时间，则可以适当的提升其优先级。如果某进程占用处理机运行了很长时间，则可以适当地降低其优先级。如果发现一个进程频繁的进行I&#x2F;O操作，则可以适当的提升其优先级。</p></blockquote><h4 id="3-思考……"><a href="#3-思考……" class="headerlink" title="3.思考…….."></a>3.思考……..</h4><p>FCFS算法的优点是公平；</p><p>SJF算法的有点是能尽快处理完短作业，平均等待&#x2F;周转时间等参数很优秀；</p><p>书记安片轮转调度算法可以让各个进程得到及时的响应；</p><p>优先级调度算法可以灵活地调整各种进程被服务的机会；能否对其他算法做个折中权衡，得到一个综合表现优秀平衡的算法呢？</p><p>缝合怪登场！↓↓↓↓↓↓↓↓↓↓↓↓</p><h4 id="4-多级反馈队列调度算法"><a href="#4-多级反馈队列调度算法" class="headerlink" title="4.多级反馈队列调度算法"></a>4.多级反馈队列调度算法</h4><blockquote><h5 id="多级反馈队列"><a href="#多级反馈队列" class="headerlink" title="多级反馈队列"></a>多级反馈队列</h5><ul><li><p>算法思想：对比其他调度算法的折中权衡。</p></li><li><p>算法规则：1. 设置多级就绪队列，各级队列优先级从高到低，时间片从小到大；2.新进程到达时先进入第1级队列，按FCFS原则排队等待被分配时间片，若用完时间片进程还未结束，则进程进入下一级队列队尾，如果此时已经是在最下级的队列，则重新放入该队列队尾；3.只有第K级队列为空时，才会为k+1级队头的进程分配时间片</p></li><li><p>用于作业&#x2F;进程调度：用于进程调度</p></li><li><p>是否可抢占？：<strong>抢占式</strong>算法。在k级队列的进程运行过程中，若更上级的队列（1~k-1级）中进入了一个新进程，则由于新进程处于优先级更高的队列中，因此新进程会抢占处理机，原来运行的进程放回k级队列队尾。</p></li><li><p>优缺点：</p><ul><li>优点：对各类进程相对公平（FCFS优点）；每个新到达的进程都可以很快就得到响应（RR优点）；短进程只用较少的时间就可完成（SPF优点）；不必实现估计进程的运行时间（避免用户作假）；可以灵活地调整对各类进程的偏好程度，比如CPU密集型进程、I&#x2F;O密集型进程（拓展：可以将因I&#x2F;O而阻塞的进程重新放回原队尾，这样I&#x2F;O型进程就可保持较高优先级）</li></ul></li><li><p>是否会导致饥饿：会</p></li></ul></blockquote><p>例题：各进程到达就绪队列的时间、需要的时间如下表所示，使用<strong>多级反馈队列</strong>调度算法，分析进程的运行情况。</p><iframe src="//player.bilibili.com/player.html?bvid=BV1vS4y1a7Xi&page=1" scrolling="no" border="0" frameborder="no" framespacing="0" allowfullscreen="true"width="100%" heigh="600" high_quality="1" danmaku="0"> </iframe><h4 id="5-知识回顾"><a href="#5-知识回顾" class="headerlink" title="5.知识回顾"></a>5.知识回顾</h4><p><img src="https://s1.ax1x.com/2022/04/25/LTQYGV.png" alt="LTQYGV.png"></p><p>注：比起早期的批处理操作系统来说，由于计算机造价大幅度降低，因此之后出现的交互式操作系统（包括分时操作系统，实时操作系统等）更注重系统的响应时间、公平性、平衡性等指标。而这几种算法也恰好能较好地满足交互式系统的需求。因此这三种算法更适用于<strong>交互式操作系统</strong>。（比如UNIX使用的就是多级反馈队列调度算法）</p>]]></content>
      
      
      <categories>
          
          <category> OS学习笔记 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 操作系统 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>十五、调度算法</title>
      <link href="/2022/04/23/7afb088a/"/>
      <url>/2022/04/23/7afb088a/</url>
      
        <content type="html"><![CDATA[<h4 id="1-先来先服务（FCFS，First-Come-Firse-Serve）"><a href="#1-先来先服务（FCFS，First-Come-Firse-Serve）" class="headerlink" title="1.先来先服务（FCFS，First Come Firse Serve）"></a>1.先来先服务（FCFS，First Come Firse Serve）</h4><blockquote><h5 id="FCFS"><a href="#FCFS" class="headerlink" title="FCFS"></a>FCFS</h5><ul><li><p>算法思想：主要从“公平”的角度考虑（类似于生活中排队买东西）</p></li><li><p>算法规则：按照作业&#x2F;进程到达的先后顺序进行服务</p></li><li><p>用于作业&#x2F;进程调度：用于作业调度时，考虑的是哪个作业先到达后备队列；用于进程调度时，考虑的是那个进程先到达就绪队列</p></li><li><p>是否可抢占？ 非抢占式的算法</p></li><li><p>优缺点：</p><ul><li>优点：公平、算法实现简单</li><li>缺点：排在长作业（进程）后面的短作业需要等待很长时间，带权周转时间很大，对作业来说用户体验不好。即：FCFS 算法<strong>对长作业有利，对短作业不利</strong>（EG:排队买奶茶）</li></ul></li><li><p>是否会导致<strong>饥饿</strong>（某进程，作业长期得不到服务）：不会（只要进程或作业一直等着总会得到服务）</p></li></ul></blockquote><span id="more"></span><p>例题：各进程到达就绪队列的时间、需要的时间如下表所示，使用<strong>先来先服务</strong>调度算法，计算各进程的等待时间、平均等待时间、周转时间、平均周转时间、平均带权周转时间。<br><img src="https://s1.ax1x.com/2022/04/23/LfQXGQ.png" alt="LfQXGQ.png"></p><blockquote><ul><li><p><strong>周转时间 &#x3D; 完成时间 - 到达时间</strong></p><ol><li>P1 &#x3D; 7 - 0 &#x3D; 7</li><li>P2 &#x3D; 11 - 2 &#x3D; 9</li><li>P3 &#x3D; 12 - 4 &#x3D; 8</li><li>P4 &#x3D; 16 - 5 &#x3D; 11</li></ol></li><li><p><strong>带权周转时间 &#x3D; 周转时间 &#x2F; 运行时间</strong></p><ol><li>P1 &#x3D; 7 &#x2F; 7 &#x3D; 1</li><li>P2 &#x3D; 9 &#x2F; 4 &#x3D; 2.25</li><li>P3 &#x3D; 8 &#x2F; 1 &#x3D; 8</li><li>P4 &#x3D; 11 &#x2F; 4 &#x3D; 2.75</li></ol></li><li><p><strong>等待时间 &#x3D; 周转时间 - 运行时间</strong></p><ol><li>P1 &#x3D; 7 - 7 &#x3D; 0</li><li>P2 &#x3D; 9 - 7 &#x3D; 2</li><li>P3 &#x3D; 8 - 1 &#x3D; 8</li><li>P4 &#x3D; 11 - 4 &#x3D; 7</li></ol></li><li><p><strong>平均周转时间</strong></p><ul><li>（7 + 9 + 8 + 11）&#x2F; 4 &#x3D; 8.75</li></ul></li><li><p><strong>平均带权周转时间</strong></p></li><li><p>（1 + 2.25 + 8 + 2.75）&#x2F; 4 &#x3D; 3.5</p></li><li><p><strong>平均等待时间</strong></p><ul><li>（0 + 5 + 7 + 7）&#x2F; 4 &#x3D; 4.75</li></ul></li></ul></blockquote><p>注：例题中的进程都是纯计算形的进程，一个进程到达后要么在等待，要么在运行。如果是有计算，又有 I&#x2F;O 操作的进程，其等待时间就是<strong>周转时间 - 运行时间 - I&#x2F;O 操作的时间</strong>。对于 P3 进程来说，其带权周转时间的权值为 8，是非常大的权值。带权周转时间表示的是这个进程的运行时间比其等待时间大多少倍的指标。带权周转时间这么大代表这个进程只需要很少的时间就可运行完成但其等待时间又很长，对于 P3 的用户来说体验是很糟糕的。</p><h4 id="2-短作业优先（SJF，Shortest-Job-First）"><a href="#2-短作业优先（SJF，Shortest-Job-First）" class="headerlink" title="2.短作业优先（SJF，Shortest Job First）"></a>2.短作业优先（SJF，Shortest Job First）</h4><blockquote><h5 id="SJF"><a href="#SJF" class="headerlink" title="SJF"></a>SJF</h5><ul><li><p>算法思想：追求最少的平均等待时间，最少的平均周转时间，最少的平均平均带权周转时间</p></li><li><p>算法规则：最短作业&#x2F;进程得到优先服务（所谓“最短”，是指要求服务时间最短）</p></li><li><p>用于短作业.进程调度：既可用于作业调度，也可用于进程调度。用于进程调度时成为“短进程优先（SPF，Shortest Process First）”</p></li><li><p>是否可抢占？：SJF 和 SPF 是<strong>非抢占式</strong>算法，但是<strong>也有抢占式的版本——最短剩余时间优先</strong>算法（SRTF，Shortest Remaining Time Next）</p></li><li><p>优缺点：</p><ul><li>优点：“最短的”平均等待时间，平均周转时间</li><li>缺点：不公平。<strong>对短作业有利，对长作业不利。<strong>可能产生</strong>饥饿现象</strong>。另外，作业&#x2F;进程的运行时间是由用户提供的，不一定真实，不一定能做到真正的短作业优先。</li></ul></li><li><p>是否会导致饥饿：会。如果有源源不断的短作业&#x2F;进程进来，可能会使长作业&#x2F;进程长时间得不到服务，产生**“饥饿”<strong>现象。如果一直得不到服务，则成为</strong>“饿死”**。</p></li></ul></blockquote><p>例题 1：各进程到达就绪队列的时间、需要的时间如下表所示，使用<strong>非抢占式</strong>的<strong>短作业优先</strong>调度算法，计算各进程的等待时间、平均等待时间、周转时间、平均周转时间、平均带权周转时间。<br><img src="https://s1.ax1x.com/2022/04/23/LfUEWV.png" alt="LfUEWV.png"></p><blockquote><ul><li><p><strong>周转时间 &#x3D; 完成时间 - 到达时间</strong></p><ol><li>P1 &#x3D; 7 - 0 &#x3D; 7</li><li>P3 &#x3D; 8 - 4 &#x3D; 4</li><li>P2 &#x3D; 12 - 2 &#x3D; 10</li><li>P4 &#x3D; 16 - 5 &#x3D; 11</li></ol></li><li><p><strong>带权周转时间 &#x3D; 周转时间 &#x2F; 运行时间</strong></p><ol><li>P1 &#x3D; 7 &#x2F; 7 &#x3D; 1</li><li>P3 &#x3D; 4 &#x2F; 1 &#x3D; 4</li><li>P2 &#x3D; 10 &#x2F; 4 &#x3D; 2.5</li><li>P4 &#x3D; 11 &#x2F; 4 &#x3D; 2.75</li></ol></li><li><p><strong>等待时间 &#x3D; 周转时间 - 运行时间</strong></p><ol><li>P1 &#x3D; 7 - 7 &#x3D; 0</li><li>P3 &#x3D; 4 - 1 &#x3D; 3</li><li>P2 &#x3D; 10 - 4 &#x3D; 6</li><li>P4 &#x3D; 11 - 5 &#x3D; 6</li></ol></li><li><p><strong>平均周转时间</strong></p><ul><li>（7 + 4 + 10 + 11）&#x2F; 4 &#x3D; 8</li></ul></li><li><p><strong>平均带权周转时间</strong></p></li><li><p>（1 + 4 + 2.5 + 2.75）&#x2F; 4 &#x3D; 2.56</p></li><li><p><strong>平均等待时间</strong></p><ul><li>（0 + 3 + 6 + 7）&#x2F; 4 &#x3D; 4</li></ul></li></ul></blockquote><p>注：严格来说，题目中用于进程调度应该被成为**“短进程优先调度算法（SPF）”**。对比 FCFS 算法的平均等待&#x2F;周转&#x2F;带权周转时间都要更低。</p><p>例题 2：各进程到达就绪队列的时间、需要的时间如下表所示，使用<strong>抢占式</strong>的<strong>短作业优先</strong>调度算法，计算各进程的等待时间、平均等待时间、周转时间、平均周转时间、平均带权周转时间。<br><img src="https://s1.ax1x.com/2022/04/23/LfaacT.png" alt="LfaacT.png"></p><blockquote><ul><li><p><strong>周转时间 &#x3D; 完成时间 - 到达时间</strong></p><ol><li>P1 &#x3D; 16 - 0 &#x3D; 16</li><li>P2 &#x3D; 7 - 2 &#x3D; 5</li><li>P3 &#x3D; 5 - 4 &#x3D; 1</li><li>P4 &#x3D; 11 - 5 &#x3D; 6</li></ol></li><li><p><strong>带权周转时间 &#x3D; 周转时间 &#x2F; 运行时间</strong></p><ol><li>P1 &#x3D; 16 &#x2F; 7 &#x3D; 2.28</li><li>P2 &#x3D; 5 &#x2F; 4 &#x3D; 1.25</li><li>P3 &#x3D; 1 &#x2F; 1 &#x3D; 1</li><li>P4 &#x3D; 6 &#x2F; 4 &#x3D; 1.5</li></ol></li><li><p><strong>等待时间 &#x3D; 周转时间 - 运行时间</strong></p><ol><li>P1 &#x3D; 16 - 7 &#x3D; 9</li><li>P2 &#x3D; 5 - 4 &#x3D; 1</li><li>P3 &#x3D; 1 - 1 &#x3D; 0</li><li>P4 &#x3D; 6 - 4 &#x3D; 2</li></ol></li><li><p><strong>平均周转时间</strong></p><ul><li>（16 + 5 + 1 + 6）&#x2F; 4 &#x3D; 7</li></ul></li><li><p><strong>平均带权周转时间</strong></p></li><li><p>（2.28 + 1.25 + 1 + 1.5）&#x2F; 4 &#x3D; 1.50</p></li><li><p><strong>平均等待时间</strong></p><ul><li>（9 + 1 + 0 + 2）&#x2F; 4 &#x3D; 3</li></ul></li></ul></blockquote><p>注：对比非抢占式的短作业优先算法，显然抢占式的这几个指标又要更低。</p><blockquote><p><strong>注意</strong>几个小细节：</p><ol><li>如果题目中<strong>未特别说明</strong>，所提到的“短作业&#x2F;短进程优先算法”<strong>默认</strong>是<strong>非抢占式的</strong></li><li>很多书上都会说“SJF 调度算法的平均等待时间、平均周转时间最少”</li></ol><p>严格来说这句话时错误的，不严谨的。之前的例子表明，最短剩余时间优先算法得到的平均等待时间、平均周转时间还要更少。应该加上一个条件“在<strong>所有进程同时可运行</strong>时，采用 SJF 算法的平均等待时间、平均周转时间最少。”；如果不加上上述前提条件，则应该说“<strong>抢占式的</strong>短作业&#x2F;短进程优先调度算法（<strong>最短剩余时间优先</strong>，<strong>SRTF</strong>算法）的平均等待时间，平均周转时间最少”</p><ol start="3"><li>穗盐染个来说 SJF 的平均等待时间，平均周转时间并不一定最少，但是相比于其他算法（如 FCFS），SJF 依然可以获得较少的平均等待时间、平均周转时间</li><li>如果选择题中遇到“SJF 算法的平均等待时间，平均周转时间最少”的选项，那最好判断其它选项是不是有很明显的错误，如果没有合适的选项，那应该选择该项。</li></ol></blockquote><h4 id="3-高响应比优先算法（HRRN，Highest-Response-Ratio-Next）"><a href="#3-高响应比优先算法（HRRN，Highest-Response-Ratio-Next）" class="headerlink" title="3.高响应比优先算法（HRRN，Highest Response Ratio Next）"></a>3.高响应比优先算法（HRRN，Highest Response Ratio Next）</h4><blockquote><h5 id="对-FCFS-和-SJF-两种算法的思考"><a href="#对-FCFS-和-SJF-两种算法的思考" class="headerlink" title="对 FCFS 和 SJF 两种算法的思考"></a>对 FCFS 和 SJF 两种算法的思考</h5><ul><li><p>FCFS 算法是在每次调度的时候选择一个等待时间最长的作业（进程）为其服务。但是没有考虑到作业的运行时间，因此导致了对短作业不友好的问题。</p></li><li><p>SJF 算法是选择一个执行时间最短的作业为其服务。但是又完全不考虑各个作业的等待时间，因此导致了对长作业不友好的问题，甚至还会造成界问题</p></li><li><p>能不能设计一个算法，既考虑到各个作业的等待时间，也能兼顾运行时间呢？</p><p><strong>高响应比优先算法</strong></p><blockquote><p><strong>（老折中了）</strong></p></blockquote></li></ul></blockquote><blockquote><h5 id="HRRN"><a href="#HRRN" class="headerlink" title="HRRN"></a>HRRN</h5><ul><li><p>算法思想：要综合考虑作业&#x2F;进程的等待时间和要求服务时间</p></li><li><p>算法规则：在每次调度时先计算各个作业&#x2F;进程的<strong>响应比</strong>，选择<strong>响应比最高的</strong>作业&#x2F;进程为其服务。</p></li></ul><p>$响应比&#x3D;\frac{等待时间+要求服务时间}{要求服务时间}$，在这里响应比肯定是会&gt;&#x3D;1 的</p><ul><li><p>用于作业&#x2F;进程调度：既可用于作业调度，也可用于进程调度</p></li><li><p>是否可抢占？：<strong>非抢占式</strong>的算法，因此只有当前运行的作业&#x2F;进程主动放弃处理及时，才需要调度，才需要计算响应比</p></li><li><p>优缺点：</p></li><li><p>优点：综合考虑了等待时间和运行时间（要求服务时间）。等待时间相同时，要求服务时间短的优先（SJF 的优点）。要求服务时间相同时，等待时间长的优先（FCFS 的优点）。对于长作业来说，随着等待时间越来越久，其相应比也会越来越大，从而避免了长作业饥饿的问题</p></li><li><p>是否会导致饥饿：不会</p></li></ul></blockquote><p>例题：各进程到达就绪队列的时间、需要的时间如下表所示，使用<strong>高响应比优先</strong>调度算法，计算各进程的等待时间、平均等待时间、周转时间、平均周转时间、平均带权周转时间。<br><img src="https://s1.ax1x.com/2022/04/23/Lf565q.png" alt="Lf565q.png"></p><blockquote><blockquote><blockquote><blockquote><blockquote><p><strong>上面那里有个错的，(3 + 1) &#x2F; 1 &#x3D; 4，不是等于 3😅</strong></p></blockquote></blockquote></blockquote></blockquote></blockquote><h4 id="4-知识回顾"><a href="#4-知识回顾" class="headerlink" title="4.知识回顾"></a>4.知识回顾</h4><p><img src="https://s1.ax1x.com/2022/04/23/LfIIl8.png" alt="LfIIl8.png"></p><blockquote><p>注：这几种算法主要关心对用户的公平性、平均周转时间、平均等待时间等评价系统整体性能指标，但是不关心“响应时间”。也不区分任务的紧急程度，因此对于用户来说，交互性很糟糕。因此这三种算法一般是用于<strong>早期的批处理系统</strong>。当然，FCFS 也常结合其他的算法使用，在现在也扮演着很重要的角色。</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> OS学习笔记 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 操作系统 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>十四、调度算法的评价指标</title>
      <link href="/2022/04/20/e2f0a316/"/>
      <url>/2022/04/20/e2f0a316/</url>
      
        <content type="html"><![CDATA[<h4 id="1-CPU利用率"><a href="#1-CPU利用率" class="headerlink" title="1.CPU利用率"></a>1.CPU利用率</h4><p>由于早期的CPU造价极其昂贵，因此人们<strong>希望让CPU尽可能多地工作</strong></p><p>**CPU利用率：**指CPU“忙碌”的时间占总时间的比例</p><p>$利用率&#x3D;\frac{忙碌的时间}{总时间}$</p><span id="more"></span><p>有的题目还会要求计算某种设备的利用率：</p><p>如：某计算机只支持单道程序，某个作业刚开始需要在CPU上运行5秒，再用打印机打印输出5秒，之后再执行5秒，才能结束。在此过程中，COPU利用率、打印机利用率分别是多少？</p><p>$CPU利用率&#x3D;\frac{5+5}{5+5+5}&#x3D;66.665$<br>$打印机利用率&#x3D;\frac{5}{15}&#x3D;33.335$</p><h4 id="2-系统吞吐量"><a href="#2-系统吞吐量" class="headerlink" title="2.系统吞吐量"></a>2.系统吞吐量</h4><p>对于计算机来说，希望使用尽可能少的时间完成尽可能多的多页</p><p>**系统吞吐量：**单位时间内完成的作业数量</p><p>$系统吞吐量&#x3D;\frac{总共完成了多少道作业}{总共花了多少时间}$</p><p>如：某计算机处理完成10道作业，共花费100秒，则系统吞吐量为：</p><p>$\frac{10}{100}&#x3D;0.1（道&#x2F;秒）$</p><p>即平均每秒可以完成0.1道作业。</p><h4 id="3-周转时间"><a href="#3-周转时间" class="headerlink" title="3.周转时间"></a>3.周转时间</h4><p>对于计算机用户来说，他很关心自己的作业从提交道完成花费了多少时间。</p><p><strong>周转时间</strong>：是指<strong>作业被提交给系统开始，到作业完成为止</strong>的这段时间间隔。</p><p>它包括四个部分：作业在外存后备队列上等待作业调度（高级调度）的时间、进程在就绪队列上等待进程调度（低级调度）的时间、进程在CPU上执行的时间、进程等待I&#x2F;O操作完成的时间。后三项在一个作业的整个处理过程中，可能发生多次。</p><ul><li>对于用户来说，更关心自己的单个作业的周转时间：</li></ul><p>（作业）周转时间 &#x3D; 作业完成时间 - 作业提交时间</p><ul><li>对于操作系统来说，更关心系统的整体表现，因此更关心所有作业周转时间的平均值。</li></ul><p>$平均周转时间&#x3D;\frac{各作业周转时间之和}{作业数}$</p><ul><li>有的作业运行时间长，有的作业运行时间短，因此在周转时间相同的情况下，运行时间不同的作业，给用户的感受肯定是不一样的。</li></ul><p>$戴荃周转时间&#x3D;\frac{作业周转时间}{作业实际运行的时间}&#x3D;\frac{作业完成时间-作业提交时间}{作业实际运行的时间}$</p><p>$平均带权周转时间&#x3D;\frac{各作业带权周转时间之和}{作业数}$</p><p><strong>带权周转时间必然&gt;&#x3D;1</strong><br><strong>带权周转时间与周转时间都是越小越好</strong></p><p>对于周转时间相同的两个作业，实际运行时间长的作业在相同的时间内被服务的时间更过，带权周转时间更小，用户满意度更高。</p><p>对与实际运行时间相同的两个作业，周转时间短的带权周转时间更小，用户满意度更高。</p><h4 id="4-等待时间"><a href="#4-等待时间" class="headerlink" title="4.等待时间"></a>4.等待时间</h4><p>计算机的用户希望自己的作业尽可能少的等待处理剂</p><p><strong>等待时间：<strong>指进程&#x2F;作业</strong>处于等待处理机状态时间之和</strong>，等待时间越长用户满意度越低。</p><blockquote><p>当一个作业被建立之后，作业会被放在外存的“作业后备队列”等待被服务（调度）。当作业被服务之后作业会被调入内存。作业被调入内存后，建立对应的进程，这个进程会被CPU服务，会被I&#x2F;O设备服务，当然也会有等待被服务的时候。</p></blockquote><p>对于<strong>进程</strong>来说，等待时间就是指进程建立后<strong>等待被服务的时间之和</strong>，在等待I&#x2F;O完成的期间其实进程也是在被服务的，所以不计入等待时间。<br>对于<strong>作业</strong>来说，不仅要考虑<strong>建立进城后的等待时间，还要加上作业在外存后备队列中等待的时间。</strong></p><p>一个作业总共需要被CPU服务多久，被I.O设备服务多久一般是确定不变的，因此调度算法其实只会影响作业&#x2F;进程的等待时间。当然，与前面指标类似，也有**“平均等待时间”**来评价整体性能。</p><p>$平均等待时间&#x3D;\frac{所有进程&#x2F;作业的等待时间之和}{作业数量}$</p><h4 id="5-响应时间"><a href="#5-响应时间" class="headerlink" title="5.响应时间"></a>5.响应时间</h4><p>对于计算机用户来说，会希望自己的提交的请求（比如通过键盘输入了一个调试命令）尽早地开始被系统服务、回应。</p><p><strong>响应时间:<strong>是指用户</strong>提交请求</strong>到<strong>首次产生响应</strong>所用时间。</p><h4 id="6-知识回顾"><a href="#6-知识回顾" class="headerlink" title="6.知识回顾"></a>6.知识回顾</h4><p><img src="https://s1.ax1x.com/2022/04/20/Lso3yq.png" alt="Lso3yq.png"></p>]]></content>
      
      
      <categories>
          
          <category> OS学习笔记 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 操作系统 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>十三、进程调度的时机，切换与过程调度方式</title>
      <link href="/2022/04/20/c5095e09/"/>
      <url>/2022/04/20/c5095e09/</url>
      
        <content type="html"><![CDATA[<h4 id="1-进程调度的时机"><a href="#1-进程调度的时机" class="headerlink" title="1.进程调度的时机"></a>1.进程调度的时机</h4><p><strong>进程调度</strong>（低级调度），就是按照某种算法从就绪队列中选择一个进程为其分配处理机。</p><blockquote><p><strong>需要进行</strong>进程调度与切换的情况：</p><ul><li>当前运行的进程<strong>主动放弃</strong>处理机（有的系统中只允许进程主动放弃处理机）<ul><li>进程正常终止</li><li>运行过程中发生异常而终止</li><li>进程主动请求阻塞（如等待I&#x2F;O）</li></ul></li><li>当前运行的进程<strong>被动放弃</strong>处理机（有的系统中，进程可以主动放弃处理机，当又更紧急的任务需要处理时，也会强行剥夺处理机（被动放弃））<ul><li>分给进程的时间片用完</li><li>有更紧急的事情需要处理（如I&#x2F;O中断）</li><li>有更高优先级的进程进入就绪队列</li></ul></li></ul></blockquote><span id="more"></span><blockquote><p><strong>不能进行</strong>进程调度与切换的情况：</p><ul><li>在<strong>处理中断的过程中</strong>，中断处理过程复杂，与硬件密切相关，很难做到在中断处理的过程中进行进程切换。</li><li>进程在<strong>操作系统内核程序临界区</strong>中（但是进程在普通临界区中是可以进行调度、切换的）。</li><li>在<strong>原子操作过程中（原语）</strong>。原子操作不可中断，要一气呵成。</li></ul></blockquote><p><strong>进程在操作系统内核程序临界区中不能进行调度与切换</strong>。</p><blockquote><p>临界资源：一个时间段内只允许一个进程使用的资源。个进程需要<strong>互斥</strong>地访问临界资源。</p><p>临界区：访问临界资源的那段代码。</p><p><strong>内核程序临界区</strong>一般是用来访问<strong>某种内核数据结构的</strong>，比如就绪队列（由各就绪进程的PCB组成）</p></blockquote><h4 id="2-进程调度方式"><a href="#2-进程调度方式" class="headerlink" title="2.进程调度方式"></a>2.进程调度方式</h4><ul><li><p><strong>非剥夺调度方式</strong>，又称<strong>非抢占方式</strong>。即，只允许进程主动放弃处理机。在运行的过程中即便有更紧迫的任务到达，当前进程依然会继续使用处理机，直到进程终止或主动要求进入阻塞。</p><blockquote><p>实现简单，系统开销小但是无法及时处理紧急任务，更适合于早期的批处理系统。</p></blockquote></li><li><p><strong>剥夺调度方式</strong>，又称抢占方式。当一个进程正在处理机上执行时，如果有一个更重要或紧迫的进程需要使用处理机，则立即暂停正在执行的进程，将处理机分配给更重要紧迫的那个进程。</p><p>可以优先处理更紧急的进程，也可以实现让各进程按时间片轮流执行的功能（通过时钟中断）。更适合于实时操作系统、分时操作系统。</p></li></ul><h4 id="3-进程的切换与过程"><a href="#3-进程的切换与过程" class="headerlink" title="3.进程的切换与过程"></a>3.进程的切换与过程</h4><p>“狭义的进程调度”与“进程切换”的区别：</p><p><strong>狭义的进程调度</strong>指的是从就绪队列中<strong>选中一个要运行的进程</strong>（这个进程可以使刚刚被暂停执行的进程，也可以是<strong>另一个进程</strong>，后一种情况就需要<strong>进程切换</strong>）</p><p><strong>进程切换</strong>是指一个进程让出处理机，由另一个进程占用处理机的过程。</p><p><strong>广义的进程调度</strong>包含了选择一个进程和进程切换两个步骤。</p><p>进程切换的过程主要完成了：</p><ul><li>对原来运行进程各数据的保存</li><li>对新进程各种数据的恢复</li></ul><p>（如：程序计数器，程序状态字，各种数据寄存器等处理机现场信息，这些信息一般是保存在PCB中）</p><blockquote><p>注意：<strong>进程切换是有代价的</strong>，因此如果<strong>过于频繁地进行进程调度、切换，<strong>必然会使</strong>整个系统的效率降低</strong>，使系统能大部分时间都花在了进程切换上，而真正用于执行进程的时间减少。</p></blockquote><h4 id="4-知识回顾"><a href="#4-知识回顾" class="headerlink" title="4.知识回顾"></a>4.知识回顾</h4><p><img src="https://s1.ax1x.com/2022/04/20/Lsg9it.png" alt="Lsg9it.png"></p><h4 id="5-巴拉巴拉"><a href="#5-巴拉巴拉" class="headerlink" title="5.巴拉巴拉"></a>5.巴拉巴拉</h4><p>关于“抢占式调度”和“非抢占式翘度”老师的课程说了后面会讲，这块我听的也是蒙蒙叨叨的，他说了这块不重要，理解即可。</p>]]></content>
      
      
      <categories>
          
          <category> OS学习笔记 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 操作系统 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>十二、处理机调度的概念，层次</title>
      <link href="/2022/04/20/c5c5ce3b/"/>
      <url>/2022/04/20/c5c5ce3b/</url>
      
        <content type="html"><![CDATA[<h4 id="1-基本概念"><a href="#1-基本概念" class="headerlink" title="1.基本概念"></a>1.基本概念</h4><p>当有一堆任务要处理，但由于资源有限，这些事情没办法同时处理，这就需要确定<strong>某种规则来决定处理这些任务的顺序</strong>，这就是“调度”研究的问题。在多道程序系统中，进程的数量往往是多于处理机个数的，这样不可能同时并行的处理各个进程。<strong>处理机调度</strong>，就是从就绪队列中<strong>按照一定的算法选择一个进程并将处理机分配给他</strong>运行，以实现进程的并发执行。</p><span id="more"></span><h4 id="2-调度的三个层次——高级调度"><a href="#2-调度的三个层次——高级调度" class="headerlink" title="2.调度的三个层次——高级调度"></a>2.调度的三个层次——高级调度</h4><p>由于内存空间有限，有时无法将用户提交的作业全部放入内存，因此就需要某种规则来决定将作业调入内存的顺序。</p><p><strong>高级调度（作业调度）</strong>，按一定的原则从外存上处于后备队列的作业中挑选一个（或多个）作业，给他们分配内存等重要资源，并<strong>建立相应的进程（建立 PCB）</strong>，以使它（们）<strong>获得竞争处理机的权利</strong>。高级调度是辅存（外存）与内存之间的额调度，每个作业只调入一次，调出一次。**作业调入时会建立相应的 PCB，作业调出时才撤销 PCB。**高级调度主要是指调入的问题，因为只有调入的时机需要操作系统来确定，但调出的时机必然是作业运行结束才调出。</p><h4 id="3-调度的三个层次——中级调度"><a href="#3-调度的三个层次——中级调度" class="headerlink" title="3.调度的三个层次——中级调度"></a>3.调度的三个层次——中级调度</h4><p>引入虚拟存储技术之后，可将暂时不能运行的程序调至外存等待。等他重新具备了运行条件且内存又稍有空间时，再重新调入内存。这么做的目的是<strong>提高内存利用率和系统吞吐量。<strong>暂时调到外存等待的进程状态为</strong>挂起状态</strong>。值得注意的是，<strong>PCB</strong>并不会一起调到外存，而是<strong>会常驻内存</strong>，PCB 中会记录进程数据在外存的存放位置，进程状态等信息，操作系统通过内存中的 PCB 来保持对各个进程的监控、管理。被挂起的进程 PCB 会被放到的<strong>挂起队列</strong>中。<strong>中级调度（内存调度）</strong>，就是要决定将那个处于挂起状态的进程重新调入内存中。一个进程可能被多次调入、调出内存，因此<strong>中级调度发生的频率要比高级调度更高</strong>。</p><p>（有点像就绪队列和阻塞队列）</p><h4 id="4-补充知识：进程的挂起状态与七状态模型"><a href="#4-补充知识：进程的挂起状态与七状态模型" class="headerlink" title="4.补充知识：进程的挂起状态与七状态模型"></a>4.补充知识：进程的挂起状态与七状态模型</h4><p>暂时调到外存等待的进程状态为<strong>挂起状态（挂起态）</strong></p><p>挂起态又可以进一步分为<strong>就绪挂起，阻塞挂起</strong>两种状态</p><p>五状态模型 → 七状态模型</p><p><img src="https://s1.ax1x.com/2022/04/20/Lruve1.png" alt="Lruve1.png"></p><h4 id="5-调度的三个层次——低级调度"><a href="#5-调度的三个层次——低级调度" class="headerlink" title="5.调度的三个层次——低级调度"></a>5.调度的三个层次——低级调度</h4><p><strong>低级调度（进程调度）<strong>其主要任务时按照某种方法和策略从就绪队列中选取一个进程，将处理机分配给他。进程调度是操作系统中</strong>最基本的一种调度</strong>，在一般的操作系统中都必须配置进程调度。进程调度的<strong>频率很高</strong>，一般几十毫秒一次。</p><h4 id="6-三层调度的联系和对比"><a href="#6-三层调度的联系和对比" class="headerlink" title="6.三层调度的联系和对比"></a>6.三层调度的联系和对比</h4><p><img src="https://s1.ax1x.com/2022/04/20/LrKonA.png"></p><h4 id="7-知识回顾"><a href="#7-知识回顾" class="headerlink" title="7.知识回顾"></a>7.知识回顾</h4><p><img src="https://s1.ax1x.com/2022/04/20/LrKLh8.png"></p>]]></content>
      
      
      <categories>
          
          <category> OS学习笔记 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 操作系统 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>十一、线程概念和多线程模型</title>
      <link href="/2022/04/19/8db3926c/"/>
      <url>/2022/04/19/8db3926c/</url>
      
        <content type="html"><![CDATA[<h4 id="1-什么是线程，为什么要引入线程"><a href="#1-什么是线程，为什么要引入线程" class="headerlink" title="1.什么是线程，为什么要引入线程"></a>1.什么是线程，为什么要引入线程</h4><p>还没引入进程之前，系统中的各个程序只能串行执行。在传统的定成定义中，进程是程序的一次执行。但想实现多个功能显然不可能是由一个程序顺序处理就能实现的。如QQ，可以同时进行视频，文字聊天，发送文件等操作。</p><span id="more"></span><p>有的进程可能需要“同时”处理很多事情，而传统的进程只能串行的执行一系列程序。为此，引入了“线程”来增加进程的并发度。传统的进程是程序执行流的最小单位。引入线程后，线程成为了程序执行流的最小单位。可以把线程理解为“轻量级进程”。<strong>线程是一个基本的CPU执行单元，也是程序执行流的最小单位。</strong></p><p>引入线程后，不仅是进程之间可以并发，进程内的<strong>各线程之间</strong>也可以并发，**从而进一步提升了系统的并发度，**使得一个进程内也可以并发的处理各种任务（如QQ视频，文字聊天，传文件）。</p><p>引入线程后，<strong>进程</strong>只作为<strong>除CPU之外的系统资源的分配单元</strong>（如打印机，内存地址空间等都是分配给进程的）。</p><h4 id="2-引入线程机制后的变化"><a href="#2-引入线程机制后的变化" class="headerlink" title="2.引入线程机制后的变化"></a>2.引入线程机制后的变化</h4><p><a href="https://imgtu.com/i/LBjVvd"><img src="https://s1.ax1x.com/2022/04/19/LBjVvd.png" alt="LBjVvd.png"></a></p><h4 id="3-线程的属性"><a href="#3-线程的属性" class="headerlink" title="3.线程的属性"></a>3.线程的属性</h4><p><a href="https://imgtu.com/i/LBjnbt"><img src="https://s1.ax1x.com/2022/04/19/LBjnbt.png" alt="LBjnbt.png"></a></p><h4 id="4-线程的实现方式"><a href="#4-线程的实现方式" class="headerlink" title="4.线程的实现方式"></a>4.线程的实现方式</h4><p><strong>（1）用户级线程</strong></p><p>用户级线程由应用程序通过线程库来实现。所有的<strong>线程管理工作都由应用程序负责</strong>（包括线程切换）。用户级线程中，<strong>线程切换可以在用户态下即可完成</strong>，无需操作系统干预。用户看来是有多个线程，但在操作系统看来，并意识不到线程的存在（用户线程对用户不透明，对操作系统透明）。可以理解为<strong>用户级线程就是“从用户视角能看到的线程。”</strong></p><p><img src="https://s1.ax1x.com/2022/04/19/LBj1PS.png" alt="LBj1PS.png"></p><p><strong>（2）内核级线程（又可称为“内核支持的线程”）</strong></p><p>内核级<strong>线程的管理工作</strong>由<strong>操作系统内核</strong>完成。线程调度‘切换等工作都有内核负责，因此，<strong>内核级现成的切换必然需要在核心态下才能完成</strong>。可以这样理解，<strong>内核级线程就是“从操作系统内核视看能看到的线程”</strong>。</p><p><img src="https://s1.ax1x.com/2022/04/19/LBv0eI.png" alt="LBv0eI.png"></p><p>在同时支持用户级线程和内核级线程的系统中，可采用二者组合的方式：将n个用户线程映射到m个内核级线程上（n &gt;&#x3D; m）:</p><p><img src="https://s1.ax1x.com/2022/04/19/LBxIud.png" alt="LBxIud.png"></p><blockquote><p><strong>操作系统同只“看得见”内核级线程，因此只有内核级线程才是处理机分配的单位。</strong></p><p>例如：上面这个模型中，该进程由两个内核级线程，三个用户级线程。在用户看来，这个进程中有三个线程。但即使这个进程在一个拥有四核心的计算机上运行，也最多只能被分配到两个核心，最多只能有两个用户级线程并行执行。</p></blockquote><h4 id="5-多线程模型"><a href="#5-多线程模型" class="headerlink" title="5.多线程模型"></a>5.多线程模型</h4><p>在同时支持多个用户级线程和内核级线程的系统中，有几个用户级线程映射到几个内核级线程的问题引出了“多线程模型”问题。</p><p><strong>（1）多对一模型</strong></p><p>多个用户及线程映射到一个内核级线程。每个用户进程只对应一个内核级进程。</p><p><img src="https://s1.ax1x.com/2022/04/19/LDSdOJ.png" alt="LDSdOJ.png"></p><blockquote><p>优点：用户级线程的切换在用户空间内即可完成，不需要切换到核心态，线程管理系统的开销小，效率高。</p><p>缺点：当一个用户级线程被阻塞后，整个进程都会被阻塞，并发度不高。多个线程不可以在多核处理机上并行运行。</p></blockquote><p><strong>（2）一对一模型</strong></p><p>一个用户级线程映射到一个内核级线程。每个用户进程有与用户线程同数量的内核级线程。</p><p><img src="https://s1.ax1x.com/2022/04/19/LDpgNq.png" alt="LDpgNq.png"></p><blockquote><p>优点：当一个线程被阻塞后，别的线程还可以继续执行，并发能力强，多线程可以在多核处理机上并行执行。</p><p>缺点：一个用户进程会占用多个内核级线程，线程切换由操作系统内核完成，需要切换到核心态，因此线程管理的成本高，开销大。</p></blockquote><p><strong>（3）多对多模型</strong></p><p>在同时支持用户级线程和内核级线程的系统中，可采用二者组合的方式：将n个用户线程映射到m个内核级线程上（n &gt;&#x3D; m）:</p><p><img src="https://s1.ax1x.com/2022/04/19/LBxIud.png" alt="LBxIud.png"></p><blockquote><p>克服了多对一模型并发度不高的缺点，又克服了一对一模型中一个用户进程占用太多内核级线程，开销太大的缺点。算是一种折中的解决方案。</p></blockquote><h4 id="5-知识回顾"><a href="#5-知识回顾" class="headerlink" title="5.知识回顾"></a>5.知识回顾</h4><p><img src="https://s1.ax1x.com/2022/04/19/LDCyYq.png">]</p>]]></content>
      
      
      <categories>
          
          <category> OS学习笔记 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 操作系统 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>十、进程通信</title>
      <link href="/2022/04/18/5bd5d886/"/>
      <url>/2022/04/18/5bd5d886/</url>
      
        <content type="html"><![CDATA[<h4 id="1-什么是进程通信"><a href="#1-什么是进程通信" class="headerlink" title="1.什么是进程通信"></a>1.什么是进程通信</h4><p>进程通信是进程之间的信息交换。</p><p>进程是分配系统资源的单位（包括内存地址空间），因此<strong>各进程拥有的内存地址空间相互独立</strong>。</p><span id="more"></span><p>为了保证安全，**一个进程不允许直接访问另一个进程的地址空间。**但是进程之间的信息交换又是必须实现的，为了保证进程间的安全通信，操作系统提供了一些方法。</p><blockquote><p>进程通信包括：<strong>共享存储，消息传递和管道通信</strong>。</p></blockquote><h4 id="2-共享存储"><a href="#2-共享存储" class="headerlink" title="2.共享存储"></a>2.共享存储</h4><p>操作系统为进程通信开辟了了共享的地址空间，两个进程对共享空间的<strong>访问</strong>必须是<strong>互斥</strong>的（互斥访问通过操作系统提供的工具实现，如 P，V 操作）。</p><blockquote><ul><li><p><strong>基于数据结构的共享</strong></p><p>比如空间里只能放一个长度为 10 的数组，这种共享方式速度慢、限制多，是一种<strong>低级通信</strong>方式。</p></li><li><p><strong>基于存储区的共享</strong></p><p>在内存中画出一块共享存储区，数据的形式、存放位都由进程控制，而不是操作系统。相比之下，这种共享方式速度更快，是一种<strong>高级通信</strong>方式。</p></li></ul></blockquote><h4 id="3-管道通信"><a href="#3-管道通信" class="headerlink" title="3.管道通信"></a>3.管道通信</h4><p><strong>管导通信基础</strong></p><p><a href="https://imgtu.com/i/Lw8KTP"><img src="https://s1.ax1x.com/2022/04/18/Lw8KTP.png" alt="Lw8KTP.png"></a></p><p><strong>管道通信的原理</strong></p><p><a href="https://imgtu.com/i/Lw8Jyj"><img src="https://s1.ax1x.com/2022/04/18/Lw8Jyj.png" alt="Lw8Jyj.png"></a></p><h4 id="4-消息传递"><a href="#4-消息传递" class="headerlink" title="4.消息传递"></a>4.消息传递</h4><p>进程间的数据交换以<strong>格式化的消息</strong>为单位，进程通过操作系统的“发送消息&#x2F;接收消息”两个<strong>原语</strong>进行数据交换。</p><blockquote><ul><li><p><strong>直接通信方式</strong></p><p>格式化的消息包括<strong>消息头</strong>和<strong>消息体</strong>，消息头包括：发送进程 ID，接收进程 ID，消息类型，消息长度等格式化的信息（类似于计算机网络中的“报文”）。进程 1 创建一个消息发送给进程 2 的消息缓冲队列，进程 2 再从消息缓冲队列中读取消息。</p><p><a href="https://imgtu.com/i/Lw8y6J"><img src="https://s1.ax1x.com/2022/04/18/Lw8y6J.png" alt="Lw8y6J.png"></a></p></li><li><p><strong>间接通信方式</strong></p><p>与直接通信原理基本相同，只不过消息要先发送到中间实体（信箱）中，因此也称“心想通信方式”。进程 1 通过<strong>发送原语</strong>将消息发送到信箱中，进程 2 通过<strong>接收原语</strong>接收属于自己的消息。</p><p><a href="https://imgtu.com/i/Lw8o1e"><img src="https://s1.ax1x.com/2022/04/18/Lw8o1e.png" alt="Lw8o1e.png"></a></p></li></ul></blockquote><h5 id="5-知识回顾"><a href="#5-知识回顾" class="headerlink" title="5.知识回顾"></a>5.知识回顾</h5><p><a href="https://imgtu.com/i/Lw8bnA"><img src="https://s1.ax1x.com/2022/04/18/Lw8bnA.png" alt="Lw8bnA.png"></a></p>]]></content>
      
      
      <categories>
          
          <category> OS学习笔记 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 操作系统 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>九、进程控制</title>
      <link href="/2022/04/18/e1496c75/"/>
      <url>/2022/04/18/e1496c75/</url>
      
        <content type="html"><![CDATA[<h4 id="1-什么是进程控制"><a href="#1-什么是进程控制" class="headerlink" title="1.什么是进程控制"></a>1.什么是进程控制</h4><p>进程控制的主要功能是对系统中的所有进程实施有效的管理，它具有创建进程，撤销进程，实现进程间的状态转换等功能。简而言之，<strong>进程控制就是要时间进程状态的转换。</strong></p><span id="more"></span><h4 id="2-如何实现进程控制"><a href="#2-如何实现进程控制" class="headerlink" title="2.如何实现进程控制"></a>2.如何实现进程控制</h4><p><a href="https://imgtu.com/i/LaGOvd"><img src="https://s1.ax1x.com/2022/04/18/LaGOvd.png" alt="LaGOvd.png"></a></p><p>进程之间的状态切换中间都需要对 PCB 进行修改并且放入相应的队列中。假如说某一进程把 PCB 从某一队列放入另一个队列中，但 PCB 中状态标志并未被修改，这种情况会导致系统错误，因为 PCB 所处的队列与 PCB 中存储的状态标志位数据不一致。于是引入<strong>原语</strong>来实现进程控制。原语的特点是<strong>执行过程中不允许被中断。<strong>这种不可被中断的操作即</strong>原子操作</strong>。原语使用<strong>关中断指令</strong>和<strong>开中断指令</strong>实现。</p><p>当原语开始执行时会先执行关中断指令，此时外部中断信号会被忽略。这样保证原语的操作不会被中断。当原语执行完毕后会执行开中断指令，这样外部中断信号又会被响应了，如下图：</p><p><img src="https://s1.ax1x.com/2022/04/18/LaY3Y8.png" alt="LaY3Y8.png"></p><p>由此可见，<strong>开&#x2F;关中断指令的权限非常大，必须只允许在核心态下执行的 特权指令 。</strong></p><h4 id="3-进程控制相关原语"><a href="#3-进程控制相关原语" class="headerlink" title="3.进程控制相关原语"></a>3.进程控制相关原语</h4><p>四种原语：</p><ul><li><strong>创建原语</strong></li><li><strong>撤销原语</strong></li><li><strong>阻塞原语</strong></li><li><strong>唤醒原语</strong></li><li><strong>切换原语</strong></li></ul><p><img src="https://s1.ax1x.com/2022/04/18/LatY4K.png" alt="LatY4K.png"></p><hr><p><img src="https://s1.ax1x.com/2022/04/18/LatN9O.png" alt="LatN9O.png"></p><hr><p><img src="https://s1.ax1x.com/2022/04/18/LatdjH.png" alt="LatdjH.png"></p><hr><p><img src="https://s1.ax1x.com/2022/04/18/LatDHI.png" alt="LatDHI.png"></p><hr><h4 id="4-知识回顾"><a href="#4-知识回顾" class="headerlink" title="4.知识回顾"></a>4.知识回顾</h4><p><img src="https://s1.ax1x.com/2022/04/18/LatoEq.png" alt="LatoEq.png"></p><hr><center>分割线</center><hr><p>这章疑问有点多，应该看看书。</p>]]></content>
      
      
      <categories>
          
          <category> OS学习笔记 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 操作系统 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>八、进程的状态与转换</title>
      <link href="/2022/04/17/feab9088/"/>
      <url>/2022/04/17/feab9088/</url>
      
        <content type="html"><![CDATA[<h4 id="1-进程的基本状态"><a href="#1-进程的基本状态" class="headerlink" title="1.进程的基本状态"></a>1.进程的基本状态</h4><p><strong>三种基本状态：</strong></p><ol><li><strong>运行态</strong>：占有 cpu，并在 cpu 上运行</li><li><strong>就绪态</strong>：已具备运行条件，但没有空闲 CPU 而暂时不能运行</li><li><strong>阻塞态（或称等待态）</strong>：因等待某一事件而暂时不能执行</li></ol><span id="more"></span><blockquote><p>运行态：在单核处理及环境，每一时刻最多只能有一个进程处于运行态（双核环境下最多可以同时拥有两个进程处于运行态）</p><p>就绪态：进程已经拥有了除处理及之外所有需要的资源，一旦获得处理机即可立即进入运行态开始运行。（万事俱备，只欠 CPU）</p><p>阻塞态：如：等待操作系统扽配打印机，等待读取磁盘操作的结果。为了提高 CPU 利用率，需要先将其他进程需要的资源分配到位，才能得到 CPU 的服务。</p></blockquote><p><strong>另外的两种状态：</strong></p><p>进程运行结束（或者由于 BUG 导致进程无法继续下去，如数组越界）需要撤销进程，操作系统需要完成撤销进程的相关操作，完成将分配给进程的资源回收，撤销进程的 PCB 等操作。</p><ol><li><strong>创建态</strong>（新建态）：进程正在被创建，操作系统为其分配资源、创建 PCB</li><li><strong>终止态</strong>（结束态）：进程正在从系统中撤销，操作系统会回收分配给进程的资源，撤销其 PCB</li></ol><h4 id="2-进程的状态转换"><a href="#2-进程的状态转换" class="headerlink" title="2.进程的状态转换"></a>2.进程的状态转换</h4><p><a href="https://imgtu.com/i/La3vzd"><img src="https://s1.ax1x.com/2022/04/18/La3vzd.png" alt="La3vzd.png"></a></p><h4 id="3-知识回顾"><a href="#3-知识回顾" class="headerlink" title="3.知识回顾"></a>3.知识回顾</h4><p>绿框知识重要</p><p><a href="https://imgtu.com/i/La8kFS"><img src="https://s1.ax1x.com/2022/04/18/La8kFS.png" alt="La8kFS.png"></a></p>]]></content>
      
      
      <categories>
          
          <category> OS学习笔记 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 操作系统 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>七、进程的定义、组成、自制方式、特征</title>
      <link href="/2022/04/16/cb36d6d3/"/>
      <url>/2022/04/16/cb36d6d3/</url>
      
        <content type="html"><![CDATA[<h4 id="1-进程的定义"><a href="#1-进程的定义" class="headerlink" title="1.进程的定义"></a>1.进程的定义</h4><p>程序什么么？程序就是一个指令序列。</p><p>早期的计算机支支持单道程序。引入多道程序后，多道程序可以并发执行。为了方便操作系统管理、完成程序并发执行，引入了<strong>进程，进程实体</strong>的概念。</p><p><strong>PCB（进程控制块），程序段和数据段三部分构成了进程实体</strong>。进程实体被简称为进程。所谓创建进程实际上是创建进程实体中的PCB；撤销进程实质上就是撤销进程实体中的PCB。</p><blockquote><p><strong>PCB是进程存在的唯一标志。</strong></p></blockquote><span id="more"></span><p>从不同角度，进程可以有不同的定义，比较传统典型的定义有：</p><ul><li>进程是程序的一次<strong>执行过程</strong>。</li><li>进程是一个程序及其数据在处理机上顺序执行时<strong>所发生的活动</strong>。</li><li>进程是具有独立功能的程序存在数据集合上<strong>运行的过程（强调动态性）</strong>，他是系统进行资源分配和调度的一个独立单位。</li></ul><p>引入进程实体的概念后，进程可被定义为：</p><ul><li><strong>进程</strong>是实体的<strong>运行过程</strong>，是系统进行<strong>资源分配和调度</strong>的一个独立单位。</li></ul><blockquote><p>注：严格来说进程和实体进程并不一样，进程实体是<strong>静态的</strong>，进程则是<strong>动态的</strong>。除非题目专门考察二者区别，否则可以认为进程实体就是进程。因此也可以说“进程由程序段，数据段和PCB三部分组成”</p></blockquote><h4 id="2-进程的组成"><a href="#2-进程的组成" class="headerlink" title="2.进程的组成"></a>2.进程的组成</h4><p><strong>PCB的组成</strong></p><p><img src="https://s1.ax1x.com/2022/04/17/LUmoCt.png" alt="PCB"></p><p><strong>进程的组成</strong></p><p><img src="https://s1.ax1x.com/2022/04/17/LUnCvT.png" alt="进程"></p><p><strong>只要是和操作系统有关于管理进程的项目一定是被存储在PCB中。</strong></p><h4 id="3-进程的组织"><a href="#3-进程的组织" class="headerlink" title="3. 进程的组织"></a>3. 进程的组织</h4><p>在一个系统中通常有数百乃至数千个PCB，为了对他们加以有效的管理，应当采用适当的方式把这些PCB组织起来。</p><blockquote><p>注：进程的<strong>组成</strong>讨论的是一个<strong>进程内部</strong>有哪些部分构成的问题，而进程的<strong>组织</strong>讨论的<strong>多个进程之间</strong>的组织方式的问题。</p></blockquote><p>进程的组织方式包括：</p><ol><li>链接方式<ul><li>按照进程的状态将PCB分为多个队列</li><li>操作系统持有指向各个队列的指针</li></ul></li><li>索引方式<ul><li>根据进程状态的不同，建立几张索引表</li><li>操作系统持有指向各个索引表的指针</li></ul></li></ol><blockquote><p>链接方式：</p><p><img src="https://s1.ax1x.com/2022/04/17/LUKsCn.png" alt="链接"></p><p>索引方式：</p><p><img src="https://s1.ax1x.com/2022/04/17/LUKjVe.png" alt="索引"></p></blockquote><h4 id="4-进程的特征"><a href="#4-进程的特征" class="headerlink" title="4.进程的特征"></a>4.进程的特征</h4><p>进程和程序是两种概念，相比较于程序，进程有以下特征：</p><p>**（1）动态性：**进程是程序的一次执行过程，是动态地产生、变化和消亡的。</p><p><strong>（2）并发性</strong>：内存中有多个进程实体，个进程可以并发执行</p><p><strong>（3）独立性</strong>：进程是能独立运行，独立获得资源、独立接受调度的基本单位。</p><p><strong>（4）异步性</strong>：个进程按各自独立的，不可预知的速度向前推进，操作系统要提供<strong>进程同步机制</strong>来解决异步问题。</p><p><strong>（5）结构性</strong>：每个进程都会配置一个PCB凑够结构上看，该进程由程序段，数据段，PCB组成</p><blockquote><p><strong>动态性是进程最基本的特征。</strong></p><p><strong>进程是资源分配，接收调度的基本单位。</strong></p><p><strong>异步性会导致并发程序的执行结果的不确定性。</strong></p></blockquote><h4 id="5-小结"><a href="#5-小结" class="headerlink" title="5.小结"></a>5.小结</h4><p><img src="https://s1.ax1x.com/2022/04/17/LUMkqS.png" alt="小结"></p>]]></content>
      
      
      <categories>
          
          <category> OS学习笔记 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 操作系统 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Hexo Next8.x美化配置记录</title>
      <link href="/2022/04/15/28fe8d91/"/>
      <url>/2022/04/15/28fe8d91/</url>
      
        <content type="html"><![CDATA[<h4 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h4><p>网上收集的方法做一个整合贴。</p><span id="more"></span><h4 id="1-基础配置"><a href="#1-基础配置" class="headerlink" title="1.基础配置"></a>1.基础配置</h4><p><strong>（1）安装Next8.x</strong></p><p>可以直接下载Next，将文件夹直接复制到hexo项目的theme文件夹下，修改项目的_config.yml切换主题。</p><p>或者直接使用git下载Next最新版本。<a href="https://github.com/next-theme/hexo-theme-next">Next8的Github</a></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> hexo</span><br><span class="line">git clobe https://github.com/next-theme/hexo-theme-next themes/next</span><br></pre></td></tr></table></figure><p><strong>（2）将博客更换为next主题</strong></p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">theme:</span> <span class="string">next</span></span><br></pre></td></tr></table></figure><p><strong>（3）配置基本信息</strong></p><p>这里的配置项是在博客根目录下的_config.yml，并非主题下的。</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Site</span></span><br><span class="line"><span class="attr">title:</span> <span class="string">樱花换小鱼干</span>  <span class="comment">#博客的标题</span></span><br><span class="line"><span class="attr">subtitle:</span> <span class="string">&#x27;&#x27;</span></span><br><span class="line"><span class="attr">description:</span> <span class="string">&#x27;&#x27;</span> <span class="comment">#博客的描述</span></span><br><span class="line"><span class="attr">keywords:</span></span><br><span class="line"><span class="attr">author:</span> <span class="string">樱花换小鱼干</span> <span class="comment">#你的笔名</span></span><br><span class="line"><span class="attr">language:</span>  <span class="string">zh-CN</span> <span class="comment">#主题语言</span></span><br><span class="line"><span class="attr">timezone:</span> <span class="string">&#x27;&#x27;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p><strong>（4）选配主题的几种排版</strong></p><p>有四种，只能选其一，去掉注释#</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Schemes</span></span><br><span class="line"><span class="comment">#scheme: Muse</span></span><br><span class="line"><span class="comment">#scheme: Mist</span></span><br><span class="line"><span class="comment">#scheme: Pisces</span></span><br><span class="line"><span class="attr">scheme:</span> <span class="string">Gemini</span></span><br></pre></td></tr></table></figure><p><strong>（7）配置语言</strong></p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># You can set a language value if you prefer a translated version of CC license, e.g. deed.zh</span></span><br><span class="line"><span class="comment"># CC licenses are available in 39 languages, you can find the specific and correct abbreviation you need on https://creativecommons.org</span></span><br><span class="line"><span class="attr">language:</span> <span class="string">zh-CN</span></span><br></pre></td></tr></table></figure><p>Next支持多种语言。进入　&#x2F;next&#x2F;languages,找到我们所需要要的语言，然后将其文件名替换上面的zh-CN.</p><p><strong>（8）配置菜单</strong></p><p>Next默认设置两个菜单项home和archives。</p><p>菜单项包含三个值：key:&#x2F;link&#x2F; || icon</p><p>注意：key,对大小写敏感。</p><p>key即为下图中‘：’前单词，例如home,</p><p>&#x2F;link 、icon与之对应.</p><p>key与之前设置的luanage相对应，如果设置为中文，则会自动转换为中文。</p><p>&#x2F;link　为网页对应的url</p><p>icon 为对应字体图标的类名。</p><p>这里字体图标采用font-awesome.</p><p>如果要自定义菜单项，修改Next配置文件，如下：</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">menu:</span></span><br><span class="line">  <span class="attr">home:</span> <span class="string">/</span> <span class="string">||</span> <span class="string">fa</span> <span class="string">fa-home</span></span><br><span class="line">  <span class="attr">about:</span> <span class="string">/about/</span> <span class="string">||</span> <span class="string">fa</span> <span class="string">fa-user</span></span><br><span class="line">  <span class="attr">tags:</span> <span class="string">/tags/</span> <span class="string">||</span> <span class="string">fa</span> <span class="string">fa-tags</span></span><br><span class="line">  <span class="comment">#categories: /categories/ || fa fa-th</span></span><br><span class="line">  <span class="attr">archives:</span> <span class="string">/archives/</span> <span class="string">||</span> <span class="string">fa</span> <span class="string">fa-archive</span></span><br><span class="line">  <span class="comment">#schedule: /schedule/ || fa fa-calendar</span></span><br><span class="line">  <span class="comment">#sitemap: /sitemap.xml || fa fa-sitemap</span></span><br><span class="line">  <span class="comment">#commonweal: /404/ || fa fa-heartbeat</span></span><br></pre></td></tr></table></figure><p>菜单配置完成后需要配置对应的文件夹，否则点击相应的栏目会报错。</p><p>比如要创建关于菜单，除了要在menu配置项目里取消注释，还要在站点根目录配置相应的链接。比如，我想要创建tags菜单，除了要取消menu的tags注释外，还要再根目录执行以下命令：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo new page tags</span><br></pre></td></tr></table></figure><p>其他的菜单类似。也可以在相应的目录里配置要显示的内容，支持markdown语法。</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">---</span><br><span class="line">title: 标签</span><br><span class="line">date: 2022-04-15 11:41:49</span><br><span class="line"><span class="section">type: &quot;tags&quot;</span></span><br><span class="line"><span class="section">---</span></span><br></pre></td></tr></table></figure><p>更改ttle后在站点的对应菜单会显示你更改的内容，此文本不可被删除，否则报错。</p><p>如果自动生成的index.md里没有type配置项请自行按照上面的格式添加。</p><p><strong>（9）配置favicon</strong></p><p>站点默认使用的favicon是Next Icon　存在于hexo-site&#x2F;themes&#x2F;next&#x2F;source&#x2F;images&#x2F;目录下。里面存在有对应不同设备使用不同的favicon。在这里我们可以使用自定义favicon来替代它。</p><p>首先，我们将我们的favicon存放到hexo-site&#x2F;themes&#x2F;next&#x2F;source&#x2F;images&#x2F;　目录下，然后配置项目配置文件，否则favicon将不会被更改。</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">favicon:</span></span><br><span class="line">  <span class="attr">small:</span> <span class="string">/images/xiaoyugan.png</span></span><br><span class="line">  <span class="attr">medium:</span> <span class="string">/images/xiaoyugan.png</span></span><br><span class="line">  <span class="attr">apple_touch_icon:</span> <span class="string">/images/xiaoyugan.png</span></span><br><span class="line">  <span class="attr">safari_pinned_tab:</span> <span class="string">/images/xiaoyugan.png</span></span><br><span class="line">  <span class="comment">#android_manifest: /manifest.json</span></span><br></pre></td></tr></table></figure><p><strong>（10）配置头像</strong></p><p>在Next中默认不展示头像，如需展示，我们需要进入Next配置文件，进行更改。</p><p>修改自己头像</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Sidebar Avatar</span></span><br><span class="line"><span class="attr">avatar:</span> </span><br><span class="line">  <span class="comment"># Replace the default image and set the url here.</span></span><br><span class="line">  <span class="attr">url:</span> <span class="string">/images/xiaoyugan.png</span> <span class="comment">#/images/avatar.gif</span></span><br><span class="line">  <span class="comment"># 这里置为true可以显示圆形头像。</span></span><br><span class="line">  <span class="attr">rounded:</span> <span class="literal">true</span></span><br><span class="line">  <span class="comment"># 这里置为true鼠标放在头像上会转动</span></span><br><span class="line">  <span class="attr">rotated:</span> <span class="literal">false</span></span><br></pre></td></tr></table></figure><p>其中url可以直接指定url地址</p><p><strong>（11）启用本地搜索</strong></p><p>在主题配置文件中找到</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Local Search</span></span><br><span class="line"><span class="comment"># Dependencies: https://github.com/next-theme/hexo-generator-searchdb</span></span><br><span class="line"><span class="attr">local_search:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="comment"># If auto, trigger search by changing input.</span></span><br><span class="line">  <span class="comment"># If manual, trigger search by pressing enter key or search button.</span></span><br><span class="line">  <span class="attr">trigger:</span> <span class="string">auto</span></span><br><span class="line">  <span class="comment"># Show top n results per article, show all results by setting to -1</span></span><br><span class="line">  <span class="attr">top_n_per_article:</span> <span class="number">1</span></span><br><span class="line">  <span class="comment"># Unescape html strings to the readable one.</span></span><br><span class="line">  <span class="attr">unescape:</span> <span class="literal">false</span></span><br><span class="line">  <span class="comment"># Preload the search data when the page loads.</span></span><br><span class="line">  <span class="attr">preload:</span> <span class="literal">false</span></span><br></pre></td></tr></table></figure><p>将enable置为true，并在站点根目录下执行：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install hexo-generator-searchdb --save</span><br></pre></td></tr></table></figure><p><strong>（11）启用不蒜子阅读统计</strong></p><p>在主题配置目录中找到</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Show Views / Visitors of the website / page with busuanzi.</span></span><br><span class="line"><span class="comment"># For more information: http://ibruce.info/2015/04/04/busuanzi/</span></span><br><span class="line"><span class="attr">busuanzi_count:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">total_visitors:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">total_visitors_icon:</span> <span class="string">fa</span> <span class="string">fa-user</span></span><br><span class="line">  <span class="attr">total_views:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">total_views_icon:</span> <span class="string">fa</span> <span class="string">fa-eye</span></span><br><span class="line">  <span class="attr">post_views:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">post_views_icon:</span> <span class="string">far</span> <span class="string">fa-eye</span></span><br></pre></td></tr></table></figure><p>将enable置为true</p><p><strong>（12）添加代码复制按钮</strong></p><p>找到如下配置项</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">codeblock:</span></span><br><span class="line">  <span class="comment"># Code Highlight theme</span></span><br><span class="line">  <span class="comment"># All available themes: https://theme-next.js.org/highlight/</span></span><br><span class="line">  <span class="attr">theme:</span></span><br><span class="line">    <span class="attr">light:</span> <span class="string">default</span></span><br><span class="line">    <span class="attr">dark:</span> <span class="string">stackoverflow-dark</span></span><br><span class="line">  <span class="attr">prism:</span></span><br><span class="line">    <span class="attr">light:</span> <span class="string">prism</span></span><br><span class="line">    <span class="attr">dark:</span> <span class="string">prism-dark</span></span><br><span class="line">  <span class="comment"># Add copy button on codeblock</span></span><br><span class="line">  <span class="attr">copy_button:</span></span><br><span class="line">    <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">    <span class="comment"># Available values: default | flat | mac</span></span><br><span class="line">    <span class="attr">style:</span> <span class="string">mac</span></span><br></pre></td></tr></table></figure><p>将copy_button的enable改为true即可，style可以选择default | flat | mac这三种。</p><p><strong>（13）安装相关依赖</strong></p><p>分别在站点根目录和主题根目录下执行：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install --save</span><br></pre></td></tr></table></figure><p>至此，基本配置完成，站点基本元素已完善。</p><p><strong>（14）还有一些琐碎的配置</strong></p><p>如果觉得太麻烦可以直接用我的这一份配置文件：</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br><span class="line">395</span><br><span class="line">396</span><br><span class="line">397</span><br><span class="line">398</span><br><span class="line">399</span><br><span class="line">400</span><br><span class="line">401</span><br><span class="line">402</span><br><span class="line">403</span><br><span class="line">404</span><br><span class="line">405</span><br><span class="line">406</span><br><span class="line">407</span><br><span class="line">408</span><br><span class="line">409</span><br><span class="line">410</span><br><span class="line">411</span><br><span class="line">412</span><br><span class="line">413</span><br><span class="line">414</span><br><span class="line">415</span><br><span class="line">416</span><br><span class="line">417</span><br><span class="line">418</span><br><span class="line">419</span><br><span class="line">420</span><br><span class="line">421</span><br><span class="line">422</span><br><span class="line">423</span><br><span class="line">424</span><br><span class="line">425</span><br><span class="line">426</span><br><span class="line">427</span><br><span class="line">428</span><br><span class="line">429</span><br><span class="line">430</span><br><span class="line">431</span><br><span class="line">432</span><br><span class="line">433</span><br><span class="line">434</span><br><span class="line">435</span><br><span class="line">436</span><br><span class="line">437</span><br><span class="line">438</span><br><span class="line">439</span><br><span class="line">440</span><br><span class="line">441</span><br><span class="line">442</span><br><span class="line">443</span><br><span class="line">444</span><br><span class="line">445</span><br><span class="line">446</span><br><span class="line">447</span><br><span class="line">448</span><br><span class="line">449</span><br><span class="line">450</span><br><span class="line">451</span><br><span class="line">452</span><br><span class="line">453</span><br><span class="line">454</span><br><span class="line">455</span><br><span class="line">456</span><br><span class="line">457</span><br><span class="line">458</span><br><span class="line">459</span><br><span class="line">460</span><br><span class="line">461</span><br><span class="line">462</span><br><span class="line">463</span><br><span class="line">464</span><br><span class="line">465</span><br><span class="line">466</span><br><span class="line">467</span><br><span class="line">468</span><br><span class="line">469</span><br><span class="line">470</span><br><span class="line">471</span><br><span class="line">472</span><br><span class="line">473</span><br><span class="line">474</span><br><span class="line">475</span><br><span class="line">476</span><br><span class="line">477</span><br><span class="line">478</span><br><span class="line">479</span><br><span class="line">480</span><br><span class="line">481</span><br><span class="line">482</span><br><span class="line">483</span><br><span class="line">484</span><br><span class="line">485</span><br><span class="line">486</span><br><span class="line">487</span><br><span class="line">488</span><br><span class="line">489</span><br><span class="line">490</span><br><span class="line">491</span><br><span class="line">492</span><br><span class="line">493</span><br><span class="line">494</span><br><span class="line">495</span><br><span class="line">496</span><br><span class="line">497</span><br><span class="line">498</span><br><span class="line">499</span><br><span class="line">500</span><br><span class="line">501</span><br><span class="line">502</span><br><span class="line">503</span><br><span class="line">504</span><br><span class="line">505</span><br><span class="line">506</span><br><span class="line">507</span><br><span class="line">508</span><br><span class="line">509</span><br><span class="line">510</span><br><span class="line">511</span><br><span class="line">512</span><br><span class="line">513</span><br><span class="line">514</span><br><span class="line">515</span><br><span class="line">516</span><br><span class="line">517</span><br><span class="line">518</span><br><span class="line">519</span><br><span class="line">520</span><br><span class="line">521</span><br><span class="line">522</span><br><span class="line">523</span><br><span class="line">524</span><br><span class="line">525</span><br><span class="line">526</span><br><span class="line">527</span><br><span class="line">528</span><br><span class="line">529</span><br><span class="line">530</span><br><span class="line">531</span><br><span class="line">532</span><br><span class="line">533</span><br><span class="line">534</span><br><span class="line">535</span><br><span class="line">536</span><br><span class="line">537</span><br><span class="line">538</span><br><span class="line">539</span><br><span class="line">540</span><br><span class="line">541</span><br><span class="line">542</span><br><span class="line">543</span><br><span class="line">544</span><br><span class="line">545</span><br><span class="line">546</span><br><span class="line">547</span><br><span class="line">548</span><br><span class="line">549</span><br><span class="line">550</span><br><span class="line">551</span><br><span class="line">552</span><br><span class="line">553</span><br><span class="line">554</span><br><span class="line">555</span><br><span class="line">556</span><br><span class="line">557</span><br><span class="line">558</span><br><span class="line">559</span><br><span class="line">560</span><br><span class="line">561</span><br><span class="line">562</span><br><span class="line">563</span><br><span class="line">564</span><br><span class="line">565</span><br><span class="line">566</span><br><span class="line">567</span><br><span class="line">568</span><br><span class="line">569</span><br><span class="line">570</span><br><span class="line">571</span><br><span class="line">572</span><br><span class="line">573</span><br><span class="line">574</span><br><span class="line">575</span><br><span class="line">576</span><br><span class="line">577</span><br><span class="line">578</span><br><span class="line">579</span><br><span class="line">580</span><br><span class="line">581</span><br><span class="line">582</span><br><span class="line">583</span><br><span class="line">584</span><br><span class="line">585</span><br><span class="line">586</span><br><span class="line">587</span><br><span class="line">588</span><br><span class="line">589</span><br><span class="line">590</span><br><span class="line">591</span><br><span class="line">592</span><br><span class="line">593</span><br><span class="line">594</span><br><span class="line">595</span><br><span class="line">596</span><br><span class="line">597</span><br><span class="line">598</span><br><span class="line">599</span><br><span class="line">600</span><br><span class="line">601</span><br><span class="line">602</span><br><span class="line">603</span><br><span class="line">604</span><br><span class="line">605</span><br><span class="line">606</span><br><span class="line">607</span><br><span class="line">608</span><br><span class="line">609</span><br><span class="line">610</span><br><span class="line">611</span><br><span class="line">612</span><br><span class="line">613</span><br><span class="line">614</span><br><span class="line">615</span><br><span class="line">616</span><br><span class="line">617</span><br><span class="line">618</span><br><span class="line">619</span><br><span class="line">620</span><br><span class="line">621</span><br><span class="line">622</span><br><span class="line">623</span><br><span class="line">624</span><br><span class="line">625</span><br><span class="line">626</span><br><span class="line">627</span><br><span class="line">628</span><br><span class="line">629</span><br><span class="line">630</span><br><span class="line">631</span><br><span class="line">632</span><br><span class="line">633</span><br><span class="line">634</span><br><span class="line">635</span><br><span class="line">636</span><br><span class="line">637</span><br><span class="line">638</span><br><span class="line">639</span><br><span class="line">640</span><br><span class="line">641</span><br><span class="line">642</span><br><span class="line">643</span><br><span class="line">644</span><br><span class="line">645</span><br><span class="line">646</span><br><span class="line">647</span><br><span class="line">648</span><br><span class="line">649</span><br><span class="line">650</span><br><span class="line">651</span><br><span class="line">652</span><br><span class="line">653</span><br><span class="line">654</span><br><span class="line">655</span><br><span class="line">656</span><br><span class="line">657</span><br><span class="line">658</span><br><span class="line">659</span><br><span class="line">660</span><br><span class="line">661</span><br><span class="line">662</span><br><span class="line">663</span><br><span class="line">664</span><br><span class="line">665</span><br><span class="line">666</span><br><span class="line">667</span><br><span class="line">668</span><br><span class="line">669</span><br><span class="line">670</span><br><span class="line">671</span><br><span class="line">672</span><br><span class="line">673</span><br><span class="line">674</span><br><span class="line">675</span><br><span class="line">676</span><br><span class="line">677</span><br><span class="line">678</span><br><span class="line">679</span><br><span class="line">680</span><br><span class="line">681</span><br><span class="line">682</span><br><span class="line">683</span><br><span class="line">684</span><br><span class="line">685</span><br><span class="line">686</span><br><span class="line">687</span><br><span class="line">688</span><br><span class="line">689</span><br><span class="line">690</span><br><span class="line">691</span><br><span class="line">692</span><br><span class="line">693</span><br><span class="line">694</span><br><span class="line">695</span><br><span class="line">696</span><br><span class="line">697</span><br><span class="line">698</span><br><span class="line">699</span><br><span class="line">700</span><br><span class="line">701</span><br><span class="line">702</span><br><span class="line">703</span><br><span class="line">704</span><br><span class="line">705</span><br><span class="line">706</span><br><span class="line">707</span><br><span class="line">708</span><br><span class="line">709</span><br><span class="line">710</span><br><span class="line">711</span><br><span class="line">712</span><br><span class="line">713</span><br><span class="line">714</span><br><span class="line">715</span><br><span class="line">716</span><br><span class="line">717</span><br><span class="line">718</span><br><span class="line">719</span><br><span class="line">720</span><br><span class="line">721</span><br><span class="line">722</span><br><span class="line">723</span><br><span class="line">724</span><br><span class="line">725</span><br><span class="line">726</span><br><span class="line">727</span><br><span class="line">728</span><br><span class="line">729</span><br><span class="line">730</span><br><span class="line">731</span><br><span class="line">732</span><br><span class="line">733</span><br><span class="line">734</span><br><span class="line">735</span><br><span class="line">736</span><br><span class="line">737</span><br><span class="line">738</span><br><span class="line">739</span><br><span class="line">740</span><br><span class="line">741</span><br><span class="line">742</span><br><span class="line">743</span><br><span class="line">744</span><br><span class="line">745</span><br><span class="line">746</span><br><span class="line">747</span><br><span class="line">748</span><br><span class="line">749</span><br><span class="line">750</span><br><span class="line">751</span><br><span class="line">752</span><br><span class="line">753</span><br><span class="line">754</span><br><span class="line">755</span><br><span class="line">756</span><br><span class="line">757</span><br><span class="line">758</span><br><span class="line">759</span><br><span class="line">760</span><br><span class="line">761</span><br><span class="line">762</span><br><span class="line">763</span><br><span class="line">764</span><br><span class="line">765</span><br><span class="line">766</span><br><span class="line">767</span><br><span class="line">768</span><br><span class="line">769</span><br><span class="line">770</span><br><span class="line">771</span><br><span class="line">772</span><br><span class="line">773</span><br><span class="line">774</span><br><span class="line">775</span><br><span class="line">776</span><br><span class="line">777</span><br><span class="line">778</span><br><span class="line">779</span><br><span class="line">780</span><br><span class="line">781</span><br><span class="line">782</span><br><span class="line">783</span><br><span class="line">784</span><br><span class="line">785</span><br><span class="line">786</span><br><span class="line">787</span><br><span class="line">788</span><br><span class="line">789</span><br><span class="line">790</span><br><span class="line">791</span><br><span class="line">792</span><br><span class="line">793</span><br><span class="line">794</span><br><span class="line">795</span><br><span class="line">796</span><br><span class="line">797</span><br><span class="line">798</span><br><span class="line">799</span><br><span class="line">800</span><br><span class="line">801</span><br><span class="line">802</span><br><span class="line">803</span><br><span class="line">804</span><br><span class="line">805</span><br><span class="line">806</span><br><span class="line">807</span><br><span class="line">808</span><br><span class="line">809</span><br><span class="line">810</span><br><span class="line">811</span><br><span class="line">812</span><br><span class="line">813</span><br><span class="line">814</span><br><span class="line">815</span><br><span class="line">816</span><br><span class="line">817</span><br><span class="line">818</span><br><span class="line">819</span><br><span class="line">820</span><br><span class="line">821</span><br><span class="line">822</span><br><span class="line">823</span><br><span class="line">824</span><br><span class="line">825</span><br><span class="line">826</span><br><span class="line">827</span><br><span class="line">828</span><br><span class="line">829</span><br><span class="line">830</span><br><span class="line">831</span><br><span class="line">832</span><br><span class="line">833</span><br><span class="line">834</span><br><span class="line">835</span><br><span class="line">836</span><br><span class="line">837</span><br><span class="line">838</span><br><span class="line">839</span><br><span class="line">840</span><br><span class="line">841</span><br><span class="line">842</span><br><span class="line">843</span><br><span class="line">844</span><br><span class="line">845</span><br><span class="line">846</span><br><span class="line">847</span><br><span class="line">848</span><br><span class="line">849</span><br><span class="line">850</span><br><span class="line">851</span><br><span class="line">852</span><br><span class="line">853</span><br><span class="line">854</span><br><span class="line">855</span><br><span class="line">856</span><br><span class="line">857</span><br><span class="line">858</span><br><span class="line">859</span><br><span class="line">860</span><br><span class="line">861</span><br><span class="line">862</span><br><span class="line">863</span><br><span class="line">864</span><br><span class="line">865</span><br><span class="line">866</span><br><span class="line">867</span><br><span class="line">868</span><br><span class="line">869</span><br><span class="line">870</span><br><span class="line">871</span><br><span class="line">872</span><br><span class="line">873</span><br><span class="line">874</span><br><span class="line">875</span><br><span class="line">876</span><br><span class="line">877</span><br><span class="line">878</span><br><span class="line">879</span><br><span class="line">880</span><br><span class="line">881</span><br><span class="line">882</span><br><span class="line">883</span><br><span class="line">884</span><br><span class="line">885</span><br><span class="line">886</span><br><span class="line">887</span><br><span class="line">888</span><br><span class="line">889</span><br><span class="line">890</span><br><span class="line">891</span><br><span class="line">892</span><br><span class="line">893</span><br><span class="line">894</span><br><span class="line">895</span><br><span class="line">896</span><br><span class="line">897</span><br><span class="line">898</span><br><span class="line">899</span><br><span class="line">900</span><br><span class="line">901</span><br><span class="line">902</span><br><span class="line">903</span><br><span class="line">904</span><br><span class="line">905</span><br><span class="line">906</span><br><span class="line">907</span><br><span class="line">908</span><br><span class="line">909</span><br><span class="line">910</span><br><span class="line">911</span><br><span class="line">912</span><br><span class="line">913</span><br><span class="line">914</span><br><span class="line">915</span><br><span class="line">916</span><br><span class="line">917</span><br><span class="line">918</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ===============================================================</span></span><br><span class="line"><span class="comment"># It&#x27;s recommended to use Alternate Theme Config to configure NexT</span></span><br><span class="line"><span class="comment"># Modifying this file may result in merge conflict</span></span><br><span class="line"><span class="comment"># See: https://theme-next.js.org/docs/getting-started/configuration</span></span><br><span class="line"><span class="comment"># ===============================================================</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># ---------------------------------------------------------------</span></span><br><span class="line"><span class="comment"># Theme Core Configuration Settings</span></span><br><span class="line"><span class="comment"># See: https://theme-next.js.org/docs/theme-settings/</span></span><br><span class="line"><span class="comment"># ---------------------------------------------------------------</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Allow to cache content generation.</span></span><br><span class="line"><span class="attr">cache:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Remove unnecessary files after hexo generate.</span></span><br><span class="line"><span class="attr">minify:</span> <span class="literal">true</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Define custom file paths.</span></span><br><span class="line"><span class="comment"># Create your custom files in site directory `source/_data` and uncomment needed files below.</span></span><br><span class="line"><span class="attr">custom_file_path:</span></span><br><span class="line">  <span class="comment">#head: source/_data/head.njk</span></span><br><span class="line">  <span class="comment">#header: source/_data/header.njk</span></span><br><span class="line">  <span class="comment">#sidebar: source/_data/sidebar.njk</span></span><br><span class="line">  <span class="comment">#postMeta: source/_data/post-meta.njk</span></span><br><span class="line">  <span class="comment">#postBodyEnd: source/_data/post-body-end.njk</span></span><br><span class="line">  <span class="comment">#footer: source/_data/footer.njk</span></span><br><span class="line">  <span class="comment">#bodyEnd: source/_data/body-end.njk</span></span><br><span class="line">  <span class="comment">#variable: source/_data/variables.styl</span></span><br><span class="line">  <span class="comment">#mixin: source/_data/mixins.styl</span></span><br><span class="line">  <span class="comment">#style: source/_data/styles.styl</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># ---------------------------------------------------------------</span></span><br><span class="line"><span class="comment"># Scheme Settings</span></span><br><span class="line"><span class="comment"># ---------------------------------------------------------------</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Schemes</span></span><br><span class="line"><span class="comment">#scheme: Muse</span></span><br><span class="line"><span class="comment">#scheme: Mist</span></span><br><span class="line"><span class="comment">#scheme: Pisces</span></span><br><span class="line"><span class="attr">scheme:</span> <span class="string">Gemini</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Dark Mode</span></span><br><span class="line"><span class="attr">darkmode:</span> <span class="literal">false</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># ---------------------------------------------------------------</span></span><br><span class="line"><span class="comment"># Site Information Settings</span></span><br><span class="line"><span class="comment"># ---------------------------------------------------------------</span></span><br><span class="line"></span><br><span class="line"><span class="attr">favicon:</span></span><br><span class="line">  <span class="attr">small:</span> <span class="string">/images/xiaoyugan.png</span></span><br><span class="line">  <span class="attr">medium:</span> <span class="string">/images/xiaoyugan.png</span></span><br><span class="line">  <span class="attr">apple_touch_icon:</span> <span class="string">/images/xiaoyugan.png</span></span><br><span class="line">  <span class="attr">safari_pinned_tab:</span> <span class="string">/images/xiaoyugan.png</span></span><br><span class="line">  <span class="comment">#android_manifest: /manifest.json</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Custom Logo (Warning: Do not support scheme Mist)</span></span><br><span class="line"><span class="attr">custom_logo:</span> <span class="comment">#/uploads/custom-logo.jpg</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Creative Commons 4.0 International License.</span></span><br><span class="line"><span class="comment"># See: https://creativecommons.org/about/cclicenses/</span></span><br><span class="line"><span class="attr">creative_commons:</span></span><br><span class="line">  <span class="comment"># Available values: by | by-nc | by-nc-nd | by-nc-sa | by-nd | by-sa | cc-zero</span></span><br><span class="line">  <span class="attr">license:</span> <span class="string">by-nc-sa</span></span><br><span class="line">  <span class="comment"># Available values: big | small</span></span><br><span class="line">  <span class="attr">size:</span> <span class="string">small</span></span><br><span class="line">  <span class="attr">sidebar:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">post:</span> <span class="literal">false</span></span><br><span class="line">  <span class="comment"># You can set a language value if you prefer a translated version of CC license, e.g. deed.zh</span></span><br><span class="line">  <span class="comment"># CC licenses are available in 39 languages, you can find the specific and correct abbreviation you need on https://creativecommons.org</span></span><br><span class="line">  <span class="attr">language:</span> <span class="string">zh-CN</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Open graph settings</span></span><br><span class="line"><span class="comment"># See: https://hexo.io/docs/helpers#open-graph</span></span><br><span class="line"><span class="attr">open_graph:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">options:</span></span><br><span class="line">    <span class="comment">#twitter_card: &lt;twitter:card&gt;</span></span><br><span class="line">    <span class="comment">#twitter_id: &lt;twitter:creator&gt;</span></span><br><span class="line">    <span class="comment">#twitter_site: &lt;twitter:site&gt;</span></span><br><span class="line">    <span class="comment">#twitter_image: &lt;twitter:image&gt;</span></span><br><span class="line">    <span class="comment">#google_plus: &lt;g+:profile_link&gt;</span></span><br><span class="line">    <span class="comment">#fb_admins: &lt;fb:admin_id&gt;</span></span><br><span class="line">    <span class="comment">#fb_app_id: &lt;fb:app_id&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># ---------------------------------------------------------------</span></span><br><span class="line"><span class="comment"># Menu Settings</span></span><br><span class="line"><span class="comment"># ---------------------------------------------------------------</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Usage: `Key: /link/ || icon`</span></span><br><span class="line"><span class="comment"># Key is the name of menu item. If the translation for this item is available, the translated text will be loaded, otherwise the Key name will be used. Key is case-sensitive.</span></span><br><span class="line"><span class="comment"># Value before `||` delimiter is the target link, value after `||` delimiter is the name of Font Awesome icon.</span></span><br><span class="line"><span class="comment"># External url should start with http:// or https://</span></span><br><span class="line"><span class="attr">menu:</span></span><br><span class="line">  <span class="attr">home:</span> <span class="string">/</span> <span class="string">||</span> <span class="string">fa</span> <span class="string">fa-home</span></span><br><span class="line">  <span class="attr">tags:</span> <span class="string">/tags/</span> <span class="string">||</span> <span class="string">fa</span> <span class="string">fa-tags</span></span><br><span class="line">  <span class="attr">categories:</span> <span class="string">/categories/</span> <span class="string">||</span> <span class="string">fa</span> <span class="string">fa-th</span></span><br><span class="line">  <span class="attr">archives:</span> <span class="string">/archives/</span> <span class="string">||</span> <span class="string">fa</span> <span class="string">fa-archive</span></span><br><span class="line">  <span class="attr">about:</span> <span class="string">/about/</span> <span class="string">||</span> <span class="string">fa</span> <span class="string">fa-user</span></span><br><span class="line">  <span class="comment">#schedule: /schedule/ || fa fa-calendar</span></span><br><span class="line">  <span class="comment">#sitemap: /sitemap.xml || fa fa-sitemap</span></span><br><span class="line">  <span class="comment">#commonweal: /404/ || fa fa-heartbeat</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Enable / Disable menu icons / item badges.</span></span><br><span class="line"><span class="attr">menu_settings:</span></span><br><span class="line">  <span class="attr">icons:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">badges:</span> <span class="literal">false</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># ---------------------------------------------------------------</span></span><br><span class="line"><span class="comment"># Sidebar Settings</span></span><br><span class="line"><span class="comment"># See: https://theme-next.js.org/docs/theme-settings/sidebar</span></span><br><span class="line"><span class="comment"># ---------------------------------------------------------------</span></span><br><span class="line"></span><br><span class="line"><span class="attr">sidebar:</span></span><br><span class="line">  <span class="comment"># Sidebar Position.</span></span><br><span class="line">  <span class="attr">position:</span> <span class="string">left</span></span><br><span class="line">  <span class="comment">#position: right</span></span><br><span class="line"></span><br><span class="line">  <span class="comment"># Manual define the sidebar width. If commented, will be default for:</span></span><br><span class="line">  <span class="comment"># Muse | Mist: 320</span></span><br><span class="line">  <span class="comment"># Pisces | Gemini: 240</span></span><br><span class="line">  <span class="comment">#width: 300</span></span><br><span class="line"></span><br><span class="line">  <span class="comment"># Sidebar Display (only for Muse | Mist), available values:</span></span><br><span class="line">  <span class="comment">#  - post    expand on posts automatically. Default.</span></span><br><span class="line">  <span class="comment">#  - always  expand for all pages automatically.</span></span><br><span class="line">  <span class="comment">#  - hide    expand only when click on the sidebar toggle icon.</span></span><br><span class="line">  <span class="comment">#  - remove  totally remove sidebar including sidebar toggle.</span></span><br><span class="line">  <span class="attr">display:</span> <span class="string">post</span></span><br><span class="line"></span><br><span class="line">  <span class="comment"># Sidebar padding in pixels.</span></span><br><span class="line">  <span class="attr">padding:</span> <span class="number">18</span></span><br><span class="line">  <span class="comment"># Sidebar offset from top menubar in pixels (only for Pisces | Gemini).</span></span><br><span class="line">  <span class="attr">offset:</span> <span class="number">12</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Sidebar Avatar</span></span><br><span class="line"><span class="attr">avatar:</span></span><br><span class="line">  <span class="comment"># Replace the default image and set the url here.</span></span><br><span class="line">  <span class="attr">url:</span> <span class="string">/images/xiaoyugan.png</span> <span class="comment">#/images/avatar.gif</span></span><br><span class="line">  <span class="comment"># If true, the avatar will be displayed in circle.</span></span><br><span class="line">  <span class="attr">rounded:</span> <span class="literal">true</span></span><br><span class="line">  <span class="comment"># If true, the avatar will be rotated with the cursor.</span></span><br><span class="line">  <span class="attr">rotated:</span> <span class="literal">true</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Posts / Categories / Tags in sidebar.</span></span><br><span class="line"><span class="attr">site_state:</span> <span class="literal">true</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Social Links</span></span><br><span class="line"><span class="comment"># Usage: `Key: permalink || icon`</span></span><br><span class="line"><span class="comment"># Key is the link label showing to end users.</span></span><br><span class="line"><span class="comment"># Value before `||` delimiter is the target permalink, value after `||` delimiter is the name of Font Awesome icon.</span></span><br><span class="line"><span class="attr">social:</span></span><br><span class="line">  <span class="comment">#GitHub: https://github.com/yourname || fab fa-github</span></span><br><span class="line">  <span class="attr">E-Mail:</span> <span class="string">mailto:orange_lun@outlook.com</span> <span class="string">||</span> <span class="string">fa</span> <span class="string">fa-envelope</span></span><br><span class="line">  <span class="comment">#Weibo: https://weibo.com/yourname || fab fa-weibo</span></span><br><span class="line">  <span class="comment">#Google: https://plus.google.com/yourname || fab fa-google</span></span><br><span class="line">  <span class="comment">#Twitter: https://twitter.com/yourname || fab fa-twitter</span></span><br><span class="line">  <span class="comment">#FB Page: https://www.facebook.com/yourname || fab fa-facebook</span></span><br><span class="line">  <span class="comment">#StackOverflow: https://stackoverflow.com/yourname || fab fa-stack-overflow</span></span><br><span class="line">  <span class="comment">#YouTube: https://youtube.com/yourname || fab fa-youtube</span></span><br><span class="line">  <span class="comment">#Instagram: https://instagram.com/yourname || fab fa-instagram</span></span><br><span class="line">  <span class="comment">#Skype: skype:yourname?call|chat || fab fa-skype</span></span><br><span class="line"></span><br><span class="line"><span class="attr">social_icons:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">icons_only:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">transition:</span> <span class="literal">false</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Blog rolls</span></span><br><span class="line"><span class="attr">links_settings:</span></span><br><span class="line">  <span class="attr">icon:</span> <span class="string">fa</span> <span class="string">fa-globe</span></span><br><span class="line">  <span class="attr">title:</span> <span class="string">Links</span></span><br><span class="line">  <span class="comment"># Available values: block | inline</span></span><br><span class="line">  <span class="attr">layout:</span> <span class="string">block</span></span><br><span class="line"></span><br><span class="line"><span class="attr">links:</span></span><br><span class="line">  <span class="comment">#Title: https://example.com</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Table of Contents in the Sidebar</span></span><br><span class="line"><span class="comment"># Front-matter variable (nonsupport wrap expand_all).</span></span><br><span class="line"><span class="attr">toc:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="comment"># Automatically add list number to toc.</span></span><br><span class="line">  <span class="attr">number:</span> <span class="literal">false</span></span><br><span class="line">  <span class="comment"># If true, all words will placed on next lines if header width longer then sidebar width.</span></span><br><span class="line">  <span class="attr">wrap:</span> <span class="literal">false</span></span><br><span class="line">  <span class="comment"># If true, all level of TOC in a post will be displayed, rather than the activated part of it.</span></span><br><span class="line">  <span class="attr">expand_all:</span> <span class="literal">false</span></span><br><span class="line">  <span class="comment"># Maximum heading depth of generated toc.</span></span><br><span class="line">  <span class="attr">max_depth:</span> <span class="number">6</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># ---------------------------------------------------------------</span></span><br><span class="line"><span class="comment"># Footer Settings</span></span><br><span class="line"><span class="comment"># See: https://theme-next.js.org/docs/theme-settings/footer</span></span><br><span class="line"><span class="comment"># ---------------------------------------------------------------</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Show multilingual switcher in footer.</span></span><br><span class="line"><span class="attr">language_switcher:</span> <span class="literal">false</span></span><br><span class="line"></span><br><span class="line"><span class="attr">footer:</span></span><br><span class="line">  <span class="comment"># Specify the year when the site was setup. If not defined, current year will be used.</span></span><br><span class="line">  <span class="comment">#since: 2021</span></span><br><span class="line"></span><br><span class="line">  <span class="comment"># Icon between year and copyright info.</span></span><br><span class="line">  <span class="attr">icon:</span></span><br><span class="line">    <span class="comment"># Icon name in Font Awesome. See: https://fontawesome.com/icons</span></span><br><span class="line">    <span class="attr">name:</span> <span class="string">fa</span> <span class="string">fa-heart</span></span><br><span class="line">    <span class="comment"># If you want to animate the icon, set it to true.</span></span><br><span class="line">    <span class="attr">animated:</span> <span class="literal">false</span></span><br><span class="line">    <span class="comment"># Change the color of icon, using Hex Code.</span></span><br><span class="line">    <span class="attr">color:</span> <span class="string">&quot;#ff0000&quot;</span></span><br><span class="line"></span><br><span class="line">  <span class="comment"># If not defined, `author` from Hexo `_config.yml` will be used.</span></span><br><span class="line">  <span class="attr">copyright:</span></span><br><span class="line"></span><br><span class="line">  <span class="comment"># Powered by Hexo &amp; NexT</span></span><br><span class="line">  <span class="attr">powered:</span> <span class="literal">false</span></span><br><span class="line"></span><br><span class="line">  <span class="comment"># Beian ICP and gongan information for Chinese users. See: https://beian.miit.gov.cn, http://www.beian.gov.cn</span></span><br><span class="line">  <span class="attr">beian:</span></span><br><span class="line">    <span class="attr">enable:</span> <span class="literal">false</span></span><br><span class="line">    <span class="attr">icp:</span></span><br><span class="line">    <span class="comment"># The digit in the num of gongan beian.</span></span><br><span class="line">    <span class="attr">gongan_id:</span></span><br><span class="line">    <span class="comment"># The full num of gongan beian.</span></span><br><span class="line">    <span class="attr">gongan_num:</span></span><br><span class="line">    <span class="comment"># The icon for gongan beian. See: http://www.beian.gov.cn/portal/download</span></span><br><span class="line">    <span class="attr">gongan_icon_url:</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># ---------------------------------------------------------------</span></span><br><span class="line"><span class="comment"># Post Settings</span></span><br><span class="line"><span class="comment"># See: https://theme-next.js.org/docs/theme-settings/posts</span></span><br><span class="line"><span class="comment"># ---------------------------------------------------------------</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Automatically excerpt description in homepage as preamble text.</span></span><br><span class="line"><span class="attr">excerpt_description:</span> <span class="literal">true</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Read more button</span></span><br><span class="line"><span class="comment"># If true, the read more button will be displayed in excerpt section.</span></span><br><span class="line"><span class="attr">read_more_btn:</span> <span class="literal">true</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Post meta display settings</span></span><br><span class="line"><span class="attr">post_meta:</span></span><br><span class="line">  <span class="attr">item_text:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">created_at:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">updated_at:</span></span><br><span class="line">    <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">    <span class="attr">another_day:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">categories:</span> <span class="literal">true</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Post wordcount display settings</span></span><br><span class="line"><span class="comment"># Dependencies: https://github.com/next-theme/hexo-word-counter</span></span><br><span class="line"><span class="attr">symbols_count_time:</span></span><br><span class="line">  <span class="attr">separated_meta:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">item_text_total:</span> <span class="literal">true</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Use icon instead of the symbol # to indicate the tag at the bottom of the post</span></span><br><span class="line"><span class="attr">tag_icon:</span> <span class="literal">false</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Donate (Sponsor) settings</span></span><br><span class="line"><span class="comment"># Front-matter variable (nonsupport animation).</span></span><br><span class="line"><span class="attr">reward_settings:</span></span><br><span class="line">  <span class="comment"># If true, a donate button will be displayed in every article by default.</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">animation:</span> <span class="literal">false</span></span><br><span class="line">  <span class="comment">#comment: Buy me a coffee</span></span><br><span class="line"></span><br><span class="line"><span class="attr">reward:</span></span><br><span class="line">  <span class="comment">#wechatpay: /images/wechatpay.png</span></span><br><span class="line">  <span class="comment">#alipay: /images/alipay.png</span></span><br><span class="line">  <span class="comment">#paypal: /images/paypal.png</span></span><br><span class="line">  <span class="comment">#bitcoin: /images/bitcoin.png</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Subscribe through Telegram Channel, Twitter, etc.</span></span><br><span class="line"><span class="comment"># Usage: `Key: permalink || icon` (Font Awesome)</span></span><br><span class="line"><span class="attr">follow_me:</span></span><br><span class="line">  <span class="comment">#Twitter: https://twitter.com/username || fab fa-twitter</span></span><br><span class="line">  <span class="comment">#Telegram: https://t.me/channel_name || fab fa-telegram</span></span><br><span class="line">  <span class="comment">#WeChat: /images/wechat_channel.jpg || fab fa-weixin</span></span><br><span class="line">  <span class="comment">#RSS: /atom.xml || fa fa-rss</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Related popular posts</span></span><br><span class="line"><span class="comment"># Dependencies: https://github.com/sergeyzwezdin/hexo-related-posts</span></span><br><span class="line"><span class="attr">related_posts:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">title:</span> <span class="comment"># Custom header, leave empty to use the default one</span></span><br><span class="line">  <span class="attr">display_in_home:</span> <span class="literal">true</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Post edit</span></span><br><span class="line"><span class="comment"># Easily browse and edit blog source code online.</span></span><br><span class="line"><span class="attr">post_edit:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">url:</span> <span class="string">https://github.com/user-name/repo-name/tree/branch-name/subdirectory-name/</span> <span class="comment"># Link for view source</span></span><br><span class="line">  <span class="comment">#url: https://github.com/user-name/repo-name/edit/branch-name/subdirectory-name/ # Link for fork &amp; edit</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Show previous post and next post in post footer if exists</span></span><br><span class="line"><span class="comment"># Available values: left | right | false</span></span><br><span class="line"><span class="attr">post_navigation:</span> <span class="string">left</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># ---------------------------------------------------------------</span></span><br><span class="line"><span class="comment"># Custom Page Settings</span></span><br><span class="line"><span class="comment"># See: https://theme-next.js.org/docs/theme-settings/custom-pages</span></span><br><span class="line"><span class="comment"># ---------------------------------------------------------------</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># TagCloud settings for tags page.</span></span><br><span class="line"><span class="attr">tagcloud:</span></span><br><span class="line">  <span class="attr">min:</span> <span class="number">14</span> <span class="comment"># Minimum font size in px</span></span><br><span class="line">  <span class="attr">max:</span> <span class="number">14</span> <span class="comment"># Maximum font size in px</span></span><br><span class="line">  <span class="attr">amount:</span> <span class="number">200</span> <span class="comment"># Total amount of tags</span></span><br><span class="line">  <span class="attr">orderby:</span> <span class="string">name</span> <span class="comment"># Order of tags</span></span><br><span class="line">  <span class="attr">order:</span> <span class="number">1</span> <span class="comment"># Sort order</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Google Calendar</span></span><br><span class="line"><span class="comment"># Share your recent schedule to others via calendar page.</span></span><br><span class="line"><span class="attr">calendar:</span></span><br><span class="line">  <span class="attr">calendar_id:</span> <span class="string">&lt;required&gt;</span> <span class="comment"># Your Google account E-Mail</span></span><br><span class="line">  <span class="attr">api_key:</span> <span class="string">&lt;required&gt;</span></span><br><span class="line">  <span class="attr">orderBy:</span> <span class="string">startTime</span></span><br><span class="line">  <span class="attr">showLocation:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">offsetMax:</span> <span class="number">72</span> <span class="comment"># Time Range</span></span><br><span class="line">  <span class="attr">offsetMin:</span> <span class="number">4</span> <span class="comment"># Time Range</span></span><br><span class="line">  <span class="attr">showDeleted:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">singleEvents:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">maxResults:</span> <span class="number">250</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># ---------------------------------------------------------------</span></span><br><span class="line"><span class="comment"># Misc Theme Settings</span></span><br><span class="line"><span class="comment"># See: https://theme-next.js.org/docs/theme-settings/miscellaneous</span></span><br><span class="line"><span class="comment"># ---------------------------------------------------------------</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Preconnect CDN for fonts and plugins.</span></span><br><span class="line"><span class="comment"># For more information: https://www.w3.org/TR/resource-hints/#preconnect</span></span><br><span class="line"><span class="attr">preconnect:</span> <span class="literal">false</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Set the text alignment in posts / pages.</span></span><br><span class="line"><span class="attr">text_align:</span></span><br><span class="line">  <span class="comment"># Available values: start | end | left | right | center | justify | justify-all | match-parent</span></span><br><span class="line">  <span class="attr">desktop:</span> <span class="string">justify</span></span><br><span class="line">  <span class="attr">mobile:</span> <span class="string">justify</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Reduce padding / margin indents on devices with narrow width.</span></span><br><span class="line"><span class="attr">mobile_layout_economy:</span> <span class="literal">false</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Browser header panel color.</span></span><br><span class="line"><span class="attr">theme_color:</span></span><br><span class="line">  <span class="attr">light:</span> <span class="string">&quot;#222&quot;</span></span><br><span class="line">  <span class="attr">dark:</span> <span class="string">&quot;#222&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Override browsers&#x27; default behavior.</span></span><br><span class="line"><span class="attr">body_scrollbar:</span></span><br><span class="line">  <span class="comment"># Place the scrollbar over the content.</span></span><br><span class="line">  <span class="attr">overlay:</span> <span class="literal">false</span></span><br><span class="line">  <span class="comment"># Present the scrollbar even if the content is not overflowing.</span></span><br><span class="line">  <span class="attr">stable:</span> <span class="literal">false</span></span><br><span class="line"></span><br><span class="line"><span class="attr">codeblock:</span></span><br><span class="line">  <span class="comment"># Code Highlight theme</span></span><br><span class="line">  <span class="comment"># All available themes: https://theme-next.js.org/highlight/</span></span><br><span class="line">  <span class="attr">theme:</span></span><br><span class="line">    <span class="attr">light:</span> <span class="string">default</span></span><br><span class="line">    <span class="attr">dark:</span> <span class="string">stackoverflow-dark</span></span><br><span class="line">  <span class="attr">prism:</span></span><br><span class="line">    <span class="attr">light:</span> <span class="string">prism</span></span><br><span class="line">    <span class="attr">dark:</span> <span class="string">prism-dark</span></span><br><span class="line">  <span class="comment"># Add copy button on codeblock</span></span><br><span class="line">  <span class="attr">copy_button:</span></span><br><span class="line">    <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">    <span class="comment"># Available values: default | flat | mac</span></span><br><span class="line">    <span class="attr">style:</span> <span class="string">mac</span></span><br><span class="line"></span><br><span class="line"><span class="attr">back2top:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="comment"># Back to top in sidebar.</span></span><br><span class="line">  <span class="attr">sidebar:</span> <span class="literal">false</span></span><br><span class="line">  <span class="comment"># Scroll percent label in b2t button.</span></span><br><span class="line">  <span class="attr">scrollpercent:</span> <span class="literal">false</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Reading progress bar</span></span><br><span class="line"><span class="attr">reading_progress:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">false</span></span><br><span class="line">  <span class="comment"># Available values: left | right</span></span><br><span class="line">  <span class="attr">start_at:</span> <span class="string">left</span></span><br><span class="line">  <span class="comment"># Available values: top | bottom</span></span><br><span class="line">  <span class="attr">position:</span> <span class="string">top</span></span><br><span class="line">  <span class="attr">reversed:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">color:</span> <span class="string">&quot;#37c6c0&quot;</span></span><br><span class="line">  <span class="attr">height:</span> <span class="string">3px</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Bookmark Support</span></span><br><span class="line"><span class="attr">bookmark:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">false</span></span><br><span class="line">  <span class="comment"># Customize the color of the bookmark.</span></span><br><span class="line">  <span class="attr">color:</span> <span class="string">&quot;#222&quot;</span></span><br><span class="line">  <span class="comment"># If auto, save the reading progress when closing the page or clicking the bookmark-icon.</span></span><br><span class="line">  <span class="comment"># If manual, only save it by clicking the bookmark-icon.</span></span><br><span class="line">  <span class="attr">save:</span> <span class="string">auto</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># `Follow me on GitHub` banner in the top-right corner.</span></span><br><span class="line"><span class="attr">github_banner:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">permalink:</span> <span class="string">https://github.com/yourname</span></span><br><span class="line">  <span class="attr">title:</span> <span class="string">Follow</span> <span class="string">me</span> <span class="string">on</span> <span class="string">GitHub</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># ---------------------------------------------------------------</span></span><br><span class="line"><span class="comment"># Font Settings</span></span><br><span class="line"><span class="comment"># ---------------------------------------------------------------</span></span><br><span class="line"><span class="comment"># Find fonts on Google Fonts (https://fonts.google.com)</span></span><br><span class="line"><span class="comment"># All fonts set here will have the following styles:</span></span><br><span class="line"><span class="comment">#   light | light italic | normal | normal italic | bold | bold italic</span></span><br><span class="line"><span class="comment"># Be aware that setting too much fonts will cause site running slowly</span></span><br><span class="line"><span class="comment"># ---------------------------------------------------------------</span></span><br><span class="line"><span class="comment"># Web Safe fonts are recommended for `global` (and `title`):</span></span><br><span class="line"><span class="comment"># Arial | Tahoma | Helvetica | Times New Roman | Courier New | Verdana | Georgia | Palatino | Garamond | Comic Sans MS | Trebuchet MS</span></span><br><span class="line"><span class="comment"># ---------------------------------------------------------------</span></span><br><span class="line"></span><br><span class="line"><span class="attr">font:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">false</span></span><br><span class="line"></span><br><span class="line">  <span class="comment"># Uri of fonts host, e.g. https://fonts.googleapis.com (Default).</span></span><br><span class="line">  <span class="attr">host:</span></span><br><span class="line"></span><br><span class="line">  <span class="comment"># Font options:</span></span><br><span class="line">  <span class="comment"># `external: true` will load this font family from `host` above.</span></span><br><span class="line">  <span class="comment"># `family: Times New Roman`. Without any quotes.</span></span><br><span class="line">  <span class="comment"># `size: x.x`. Use `em` as unit. Default: 1 (16px)</span></span><br><span class="line"></span><br><span class="line">  <span class="comment"># Global font settings used for all elements inside &lt;body&gt;.</span></span><br><span class="line">  <span class="attr">global:</span></span><br><span class="line">    <span class="attr">external:</span> <span class="literal">true</span></span><br><span class="line">    <span class="attr">family:</span> <span class="string">Lato</span></span><br><span class="line">    <span class="attr">size:</span></span><br><span class="line"></span><br><span class="line">  <span class="comment"># Font settings for site title (.site-title).</span></span><br><span class="line">  <span class="attr">title:</span></span><br><span class="line">    <span class="attr">external:</span> <span class="literal">true</span></span><br><span class="line">    <span class="attr">family:</span></span><br><span class="line">    <span class="attr">size:</span></span><br><span class="line"></span><br><span class="line">  <span class="comment"># Font settings for headlines (&lt;h1&gt; to &lt;h6&gt;).</span></span><br><span class="line">  <span class="attr">headings:</span></span><br><span class="line">    <span class="attr">external:</span> <span class="literal">true</span></span><br><span class="line">    <span class="attr">family:</span></span><br><span class="line">    <span class="attr">size:</span></span><br><span class="line"></span><br><span class="line">  <span class="comment"># Font settings for posts (.post-body).</span></span><br><span class="line">  <span class="attr">posts:</span></span><br><span class="line">    <span class="attr">external:</span> <span class="literal">true</span></span><br><span class="line">    <span class="attr">family:</span></span><br><span class="line"></span><br><span class="line">  <span class="comment"># Font settings for &lt;code&gt; and code blocks.</span></span><br><span class="line">  <span class="attr">codes:</span></span><br><span class="line">    <span class="attr">external:</span> <span class="literal">true</span></span><br><span class="line">    <span class="attr">family:</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># ---------------------------------------------------------------</span></span><br><span class="line"><span class="comment"># SEO Settings</span></span><br><span class="line"><span class="comment"># See: https://theme-next.js.org/docs/theme-settings/seo</span></span><br><span class="line"><span class="comment"># ---------------------------------------------------------------</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># If true, site-subtitle will be added to index page.</span></span><br><span class="line"><span class="comment"># Remember to set up your site-subtitle in Hexo `_config.yml` (e.g. subtitle: Subtitle)</span></span><br><span class="line"><span class="attr">index_with_subtitle:</span> <span class="literal">false</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Automatically add external URL with Base64 encrypt &amp; decrypt.</span></span><br><span class="line"><span class="attr">exturl:</span> <span class="literal">false</span></span><br><span class="line"><span class="comment"># If true, an icon will be attached to each external URL</span></span><br><span class="line"><span class="attr">exturl_icon:</span> <span class="literal">true</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Google Webmaster tools verification.</span></span><br><span class="line"><span class="comment"># See: https://developers.google.com/search</span></span><br><span class="line"><span class="attr">google_site_verification:</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Bing Webmaster tools verification.</span></span><br><span class="line"><span class="comment"># See: https://www.bing.com/webmasters</span></span><br><span class="line"><span class="attr">bing_site_verification:</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Yandex Webmaster tools verification.</span></span><br><span class="line"><span class="comment"># See: https://webmaster.yandex.ru</span></span><br><span class="line"><span class="attr">yandex_site_verification:</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Baidu Webmaster tools verification.</span></span><br><span class="line"><span class="comment"># See: https://ziyuan.baidu.com/site</span></span><br><span class="line"><span class="attr">baidu_site_verification:</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># ---------------------------------------------------------------</span></span><br><span class="line"><span class="comment"># Third Party Plugins &amp; Services Settings</span></span><br><span class="line"><span class="comment"># See: https://theme-next.js.org/docs/third-party-services/</span></span><br><span class="line"><span class="comment"># More plugins: https://github.com/next-theme/awesome-next</span></span><br><span class="line"><span class="comment"># You may need to install the corresponding dependency packages</span></span><br><span class="line"><span class="comment"># ---------------------------------------------------------------</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Math Formulas Render Support</span></span><br><span class="line"><span class="comment"># Warning: Please install / uninstall the relevant renderer according to the documentation.</span></span><br><span class="line"><span class="comment"># See: https://theme-next.js.org/docs/third-party-services/math-equations</span></span><br><span class="line"><span class="comment"># Server-side plugin: https://github.com/next-theme/hexo-filter-mathjax</span></span><br><span class="line"><span class="attr">math:</span></span><br><span class="line">  <span class="comment"># Default (false) will load mathjax / katex script on demand.</span></span><br><span class="line">  <span class="comment"># That is it only render those page which has `mathjax: true` in front-matter.</span></span><br><span class="line">  <span class="comment"># If you set it to true, it will load mathjax / katex script EVERY PAGE.</span></span><br><span class="line">  <span class="attr">every_page:</span> <span class="literal">false</span></span><br><span class="line"></span><br><span class="line">  <span class="attr">mathjax:</span></span><br><span class="line">    <span class="attr">enable:</span> <span class="literal">false</span></span><br><span class="line">    <span class="comment"># Available values: none | ams | all</span></span><br><span class="line">    <span class="attr">tags:</span> <span class="string">none</span></span><br><span class="line"></span><br><span class="line">  <span class="attr">katex:</span></span><br><span class="line">    <span class="attr">enable:</span> <span class="literal">false</span></span><br><span class="line">    <span class="comment"># See: https://github.com/KaTeX/KaTeX/tree/master/contrib/copy-tex</span></span><br><span class="line">    <span class="attr">copy_tex:</span> <span class="literal">false</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Easily enable fast Ajax navigation on your website.</span></span><br><span class="line"><span class="comment"># For more information: https://github.com/next-theme/pjax</span></span><br><span class="line"><span class="attr">pjax:</span> <span class="literal">false</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># FancyBox is a tool that offers a nice and elegant way to add zooming functionality for images.</span></span><br><span class="line"><span class="comment"># For more information: https://fancyapps.com/fancybox/</span></span><br><span class="line"><span class="attr">fancybox:</span> <span class="literal">false</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># A JavaScript library for zooming images like Medium.</span></span><br><span class="line"><span class="comment"># Warning: Do not enable both `fancybox` and `mediumzoom`.</span></span><br><span class="line"><span class="comment"># For more information: https://medium-zoom.francoischalifour.com</span></span><br><span class="line"><span class="attr">mediumzoom:</span> <span class="literal">false</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Vanilla JavaScript plugin for lazyloading images.</span></span><br><span class="line"><span class="comment"># For more information: https://apoorv.pro/lozad.js/demo/</span></span><br><span class="line"><span class="attr">lazyload:</span> <span class="literal">false</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Pangu Support</span></span><br><span class="line"><span class="comment"># For more information: https://github.com/vinta/pangu.js</span></span><br><span class="line"><span class="comment"># Server-side plugin: https://github.com/next-theme/hexo-pangu</span></span><br><span class="line"><span class="attr">pangu:</span> <span class="literal">false</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Quicklink Support</span></span><br><span class="line"><span class="comment"># For more information: https://getquick.link</span></span><br><span class="line"><span class="comment"># Front-matter variable (nonsupport home archive).</span></span><br><span class="line"><span class="attr">quicklink:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">false</span></span><br><span class="line"></span><br><span class="line">  <span class="comment"># Home page and archive page can be controlled through home and archive options below.</span></span><br><span class="line">  <span class="comment"># This configuration item is independent of `enable`.</span></span><br><span class="line">  <span class="attr">home:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">archive:</span> <span class="literal">false</span></span><br><span class="line"></span><br><span class="line">  <span class="comment"># Default (true) will initialize quicklink after the load event fires.</span></span><br><span class="line">  <span class="attr">delay:</span> <span class="literal">true</span></span><br><span class="line">  <span class="comment"># Custom a time in milliseconds by which the browser must execute prefetching.</span></span><br><span class="line">  <span class="attr">timeout:</span> <span class="number">3000</span></span><br><span class="line">  <span class="comment"># Default (true) will attempt to use the fetch() API if supported (rather than link[rel=prefetch]).</span></span><br><span class="line">  <span class="attr">priority:</span> <span class="literal">true</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># ---------------------------------------------------------------</span></span><br><span class="line"><span class="comment"># Comments Settings</span></span><br><span class="line"><span class="comment"># See: https://theme-next.js.org/docs/third-party-services/comments</span></span><br><span class="line"><span class="comment"># ---------------------------------------------------------------</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Multiple Comment System Support</span></span><br><span class="line"><span class="attr">comments:</span></span><br><span class="line">  <span class="comment"># Available values: tabs | buttons</span></span><br><span class="line">  <span class="attr">style:</span> <span class="string">tabs</span></span><br><span class="line">  <span class="comment"># Choose a comment system to be displayed by default.</span></span><br><span class="line">  <span class="comment"># Available values: disqus | disqusjs | changyan | livere | gitalk | utterances</span></span><br><span class="line">  <span class="attr">active:</span></span><br><span class="line">  <span class="comment"># Setting `true` means remembering the comment system selected by the visitor.</span></span><br><span class="line">  <span class="attr">storage:</span> <span class="literal">true</span></span><br><span class="line">  <span class="comment"># Lazyload all comment systems.</span></span><br><span class="line">  <span class="attr">lazyload:</span> <span class="literal">false</span></span><br><span class="line">  <span class="comment"># Modify texts or order for any naves, here are some examples.</span></span><br><span class="line">  <span class="attr">nav:</span></span><br><span class="line">    <span class="comment">#disqus:</span></span><br><span class="line">    <span class="comment">#  text: Load Disqus</span></span><br><span class="line">    <span class="comment">#  order: -1</span></span><br><span class="line">    <span class="comment">#gitalk:</span></span><br><span class="line">    <span class="comment">#  order: -2</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Disqus</span></span><br><span class="line"><span class="comment"># For more information: https://disqus.com</span></span><br><span class="line"><span class="attr">disqus:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">shortname:</span></span><br><span class="line">  <span class="attr">count:</span> <span class="literal">true</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># DisqusJS</span></span><br><span class="line"><span class="comment"># For more information: https://disqusjs.skk.moe</span></span><br><span class="line"><span class="attr">disqusjs:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">false</span></span><br><span class="line">  <span class="comment"># API Endpoint of Disqus API (https://disqus.com/api/docs/).</span></span><br><span class="line">  <span class="comment"># Leave api empty if you are able to connect to Disqus API. Otherwise you need a reverse proxy for it.</span></span><br><span class="line">  <span class="comment"># For example:</span></span><br><span class="line">  <span class="comment"># api: https://disqus.skk.moe/disqus/</span></span><br><span class="line">  <span class="attr">api:</span></span><br><span class="line">  <span class="attr">apikey:</span> <span class="comment"># Register new application from https://disqus.com/api/applications/</span></span><br><span class="line">  <span class="attr">shortname:</span> <span class="comment"># See: https://disqus.com/admin/settings/general/</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Changyan</span></span><br><span class="line"><span class="comment"># For more information: https://changyan.kuaizhan.com</span></span><br><span class="line"><span class="attr">changyan:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">appid:</span></span><br><span class="line">  <span class="attr">appkey:</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># LiveRe comments system</span></span><br><span class="line"><span class="comment"># You can get your uid from https://livere.com/insight/myCode (General web site)</span></span><br><span class="line"><span class="attr">livere_uid:</span> <span class="comment"># &lt;your_uid&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Gitalk</span></span><br><span class="line"><span class="comment"># For more information: https://gitalk.github.io</span></span><br><span class="line"><span class="attr">gitalk:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">github_id:</span> <span class="comment"># GitHub repo owner</span></span><br><span class="line">  <span class="attr">repo:</span> <span class="comment"># Repository name to store issues</span></span><br><span class="line">  <span class="attr">client_id:</span> <span class="comment"># GitHub Application Client ID</span></span><br><span class="line">  <span class="attr">client_secret:</span> <span class="comment"># GitHub Application Client Secret</span></span><br><span class="line">  <span class="attr">admin_user:</span> <span class="comment"># GitHub repo owner and collaborators, only these guys can initialize gitHub issues</span></span><br><span class="line">  <span class="attr">distraction_free_mode:</span> <span class="literal">true</span> <span class="comment"># Facebook-like distraction free mode</span></span><br><span class="line">  <span class="comment"># When the official proxy is not available, you can change it to your own proxy address</span></span><br><span class="line">  <span class="attr">proxy:</span> <span class="string">https://cors-anywhere.azm.workers.dev/https://github.com/login/oauth/access_token</span> <span class="comment"># This is official proxy address</span></span><br><span class="line">  <span class="comment"># Gitalk&#x27;s display language depends on user&#x27;s browser or system environment</span></span><br><span class="line">  <span class="comment"># If you want everyone visiting your site to see a uniform language, you can set a force language value</span></span><br><span class="line">  <span class="comment"># Available values: en | es-ES | fr | ru | zh-CN | zh-TW</span></span><br><span class="line">  <span class="attr">language:</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Utterances</span></span><br><span class="line"><span class="comment"># For more information: https://utteranc.es</span></span><br><span class="line"><span class="attr">utterances:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">repo:</span> <span class="string">user-name/repo-name</span> <span class="comment"># Github repository owner and name</span></span><br><span class="line">  <span class="comment"># Available values: pathname | url | title | og:title</span></span><br><span class="line">  <span class="attr">issue_term:</span> <span class="string">pathname</span></span><br><span class="line">  <span class="comment"># Available values: github-light | github-dark | preferred-color-scheme | github-dark-orange | icy-dark | dark-blue | photon-dark | boxy-light</span></span><br><span class="line">  <span class="attr">theme:</span> <span class="string">github-light</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Isso</span></span><br><span class="line"><span class="comment"># For more information: https://posativ.org/isso/</span></span><br><span class="line"><span class="attr">isso:</span> <span class="comment"># &lt;data_isso&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># ---------------------------------------------------------------</span></span><br><span class="line"><span class="comment"># Post Widgets &amp; Content Sharing Services</span></span><br><span class="line"><span class="comment"># See: https://theme-next.js.org/docs/third-party-services/post-widgets</span></span><br><span class="line"><span class="comment"># ---------------------------------------------------------------</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Star rating support to each article.</span></span><br><span class="line"><span class="comment"># To get your ID visit https://widgetpack.com</span></span><br><span class="line"><span class="attr">rating:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">id:</span>     <span class="comment"># &lt;app_id&gt;</span></span><br><span class="line">  <span class="attr">color:</span>  <span class="string">&quot;#fc6423&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># AddThis Share. See: https://www.addthis.com</span></span><br><span class="line"><span class="comment"># Go to https://www.addthis.com/dashboard to customize your tools.</span></span><br><span class="line"><span class="attr">add_this_id:</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># ---------------------------------------------------------------</span></span><br><span class="line"><span class="comment"># Statistics and Analytics</span></span><br><span class="line"><span class="comment"># See: https://theme-next.js.org/docs/third-party-services/statistics-and-analytics</span></span><br><span class="line"><span class="comment"># ---------------------------------------------------------------</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Google Analytics</span></span><br><span class="line"><span class="comment"># See: https://analytics.google.com</span></span><br><span class="line"><span class="attr">google_analytics:</span></span><br><span class="line">  <span class="attr">tracking_id:</span> <span class="comment"># &lt;app_id&gt;</span></span><br><span class="line">  <span class="comment"># By default, NexT will load an external gtag.js script on your site.</span></span><br><span class="line">  <span class="comment"># If you only need the pageview feature, set the following option to true to get a better performance.</span></span><br><span class="line">  <span class="attr">only_pageview:</span> <span class="literal">false</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Baidu Analytics</span></span><br><span class="line"><span class="comment"># See: https://tongji.baidu.com</span></span><br><span class="line"><span class="attr">baidu_analytics:</span> <span class="comment"># &lt;app_id&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Growingio Analytics</span></span><br><span class="line"><span class="comment"># See: https://www.growingio.com</span></span><br><span class="line"><span class="attr">growingio_analytics:</span> <span class="comment"># &lt;project_id&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Cloudflare Web Analytics</span></span><br><span class="line"><span class="comment"># See: https://www.cloudflare.com/web-analytics/</span></span><br><span class="line"><span class="attr">cloudflare_analytics:</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Microsoft Clarity Analytics</span></span><br><span class="line"><span class="comment"># See: https://clarity.microsoft.com/</span></span><br><span class="line"><span class="attr">clarity_analytics:</span> <span class="comment"># &lt;project_id&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Show number of visitors of each article.</span></span><br><span class="line"><span class="comment"># You can visit https://www.leancloud.cn to get AppID and AppKey.</span></span><br><span class="line"><span class="attr">leancloud_visitors:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">app_id:</span> <span class="comment"># &lt;your app id&gt;</span></span><br><span class="line">  <span class="attr">app_key:</span> <span class="comment"># &lt;your app key&gt;</span></span><br><span class="line">  <span class="comment"># Required for apps from CN region</span></span><br><span class="line">  <span class="attr">server_url:</span> <span class="comment"># &lt;your server url&gt;</span></span><br><span class="line">  <span class="comment"># Dependencies: https://github.com/theme-next/hexo-leancloud-counter-security</span></span><br><span class="line">  <span class="comment"># If you don&#x27;t care about security in leancloud counter and just want to use it directly</span></span><br><span class="line">  <span class="comment"># (without hexo-leancloud-counter-security plugin), set `security` to `false`.</span></span><br><span class="line">  <span class="attr">security:</span> <span class="literal">true</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Another tool to show number of visitors to each article.</span></span><br><span class="line"><span class="comment"># Visit https://console.firebase.google.com/u/0/ to get apiKey and projectId.</span></span><br><span class="line"><span class="comment"># Visit https://firebase.google.com/docs/firestore/ to get more information about firestore.</span></span><br><span class="line"><span class="attr">firestore:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">collection:</span> <span class="string">articles</span> <span class="comment"># Required, a string collection name to access firestore database</span></span><br><span class="line">  <span class="attr">apiKey:</span> <span class="comment"># Required</span></span><br><span class="line">  <span class="attr">projectId:</span> <span class="comment"># Required</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Show Views / Visitors of the website / page with busuanzi.</span></span><br><span class="line"><span class="comment"># For more information: http://ibruce.info/2015/04/04/busuanzi/</span></span><br><span class="line"><span class="attr">busuanzi_count:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">total_visitors:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">total_visitors_icon:</span> <span class="string">fa</span> <span class="string">fa-user</span></span><br><span class="line">  <span class="attr">total_views:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">total_views_icon:</span> <span class="string">fa</span> <span class="string">fa-eye</span></span><br><span class="line">  <span class="attr">post_views:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">post_views_icon:</span> <span class="string">far</span> <span class="string">fa-eye</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># ---------------------------------------------------------------</span></span><br><span class="line"><span class="comment"># Search Services</span></span><br><span class="line"><span class="comment"># See: https://theme-next.js.org/docs/third-party-services/search-services</span></span><br><span class="line"><span class="comment"># ---------------------------------------------------------------</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Algolia Search</span></span><br><span class="line"><span class="comment"># For more information: https://www.algolia.com</span></span><br><span class="line"><span class="attr">algolia_search:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">hits:</span></span><br><span class="line">    <span class="attr">per_page:</span> <span class="number">10</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Local Search</span></span><br><span class="line"><span class="comment"># Dependencies: https://github.com/next-theme/hexo-generator-searchdb</span></span><br><span class="line"><span class="attr">local_search:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="comment"># If auto, trigger search by changing input.</span></span><br><span class="line">  <span class="comment"># If manual, trigger search by pressing enter key or search button.</span></span><br><span class="line">  <span class="attr">trigger:</span> <span class="string">auto</span></span><br><span class="line">  <span class="comment"># Show top n results per article, show all results by setting to -1</span></span><br><span class="line">  <span class="attr">top_n_per_article:</span> <span class="number">1</span></span><br><span class="line">  <span class="comment"># Unescape html strings to the readable one.</span></span><br><span class="line">  <span class="attr">unescape:</span> <span class="literal">false</span></span><br><span class="line">  <span class="comment"># Preload the search data when the page loads.</span></span><br><span class="line">  <span class="attr">preload:</span> <span class="literal">false</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># ---------------------------------------------------------------</span></span><br><span class="line"><span class="comment"># Chat Services</span></span><br><span class="line"><span class="comment"># See: https://theme-next.js.org/docs/third-party-services/chat-services</span></span><br><span class="line"><span class="comment"># ---------------------------------------------------------------</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># A button to open designated chat widget in sidebar.</span></span><br><span class="line"><span class="comment"># Firstly, you need to enable and configure the chat service.</span></span><br><span class="line"><span class="attr">chat:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">icon:</span> <span class="string">fa</span> <span class="string">fa-comment</span> <span class="comment"># Icon name in Font Awesome, set false to disable icon.</span></span><br><span class="line">  <span class="attr">text:</span> <span class="string">Chat</span> <span class="comment"># Button text, change it as you wish.</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Chatra Support</span></span><br><span class="line"><span class="comment"># For more information: https://chatra.com</span></span><br><span class="line"><span class="comment"># Dashboard: https://app.chatra.io/settings/general</span></span><br><span class="line"><span class="attr">chatra:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">async:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">id:</span> <span class="comment"># Visit Dashboard to get your ChatraID</span></span><br><span class="line">  <span class="comment">#embed: # Unfinished experimental feature for developers. See: https://chatra.com/help/api/#injectto</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Tidio Support</span></span><br><span class="line"><span class="comment"># For more information: https://www.tidio.com</span></span><br><span class="line"><span class="comment"># Dashboard: https://www.tidio.com/panel/dashboard</span></span><br><span class="line"><span class="attr">tidio:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">key:</span> <span class="comment"># Public Key, get it from dashboard. See: https://www.tidio.com/panel/settings/developer</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Gitter Support</span></span><br><span class="line"><span class="comment"># For more information: https://gitter.im</span></span><br><span class="line"><span class="attr">gitter:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">room:</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># ---------------------------------------------------------------</span></span><br><span class="line"><span class="comment"># Tags Settings</span></span><br><span class="line"><span class="comment"># See: https://theme-next.js.org/docs/tag-plugins/</span></span><br><span class="line"><span class="comment"># ---------------------------------------------------------------</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Note tag (bootstrap callout)</span></span><br><span class="line"><span class="attr">note:</span></span><br><span class="line">  <span class="comment"># Note tag style values:</span></span><br><span class="line">  <span class="comment">#  - simple    bootstrap callout old alert style. Default.</span></span><br><span class="line">  <span class="comment">#  - modern    bootstrap callout new (v2-v3) alert style.</span></span><br><span class="line">  <span class="comment">#  - flat      flat callout style with background, like on Mozilla or StackOverflow.</span></span><br><span class="line">  <span class="comment">#  - disabled  disable all CSS styles import of note tag.</span></span><br><span class="line">  <span class="attr">style:</span> <span class="string">simple</span></span><br><span class="line">  <span class="attr">icons:</span> <span class="literal">false</span></span><br><span class="line">  <span class="comment"># Offset lighter of background in % for modern and flat styles (modern: -12 | 12; flat: -18 | 6).</span></span><br><span class="line">  <span class="comment"># Offset also applied to label tag variables. This option can work with disabled note tag.</span></span><br><span class="line">  <span class="attr">light_bg_offset:</span> <span class="number">0</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Tabs tag</span></span><br><span class="line"><span class="attr">tabs:</span></span><br><span class="line">  <span class="comment"># Make the nav bar of tabs with long content stick to the top.</span></span><br><span class="line">  <span class="attr">sticky:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">transition:</span></span><br><span class="line">    <span class="attr">tabs:</span> <span class="literal">false</span></span><br><span class="line">    <span class="attr">labels:</span> <span class="literal">true</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># PDF tag</span></span><br><span class="line"><span class="comment"># NexT will try to load pdf files natively, if failed, pdf.js will be used.</span></span><br><span class="line"><span class="comment"># So, you have to install the dependency of pdf.js if you want to use pdf tag and make it available to all browsers.</span></span><br><span class="line"><span class="comment"># Dependencies: https://github.com/next-theme/theme-next-pdf</span></span><br><span class="line"><span class="attr">pdf:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">false</span></span><br><span class="line">  <span class="comment"># Default height</span></span><br><span class="line">  <span class="attr">height:</span> <span class="string">500px</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Mermaid tag</span></span><br><span class="line"><span class="attr">mermaid:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">false</span></span><br><span class="line">  <span class="comment"># Available themes: default | dark | forest | neutral</span></span><br><span class="line">  <span class="attr">theme:</span></span><br><span class="line">    <span class="attr">light:</span> <span class="string">default</span></span><br><span class="line">    <span class="attr">dark:</span> <span class="string">dark</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># ---------------------------------------------------------------</span></span><br><span class="line"><span class="comment"># Animation Settings</span></span><br><span class="line"><span class="comment"># ---------------------------------------------------------------</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Use Animate.css to animate everything.</span></span><br><span class="line"><span class="comment"># For more information: https://animate.style</span></span><br><span class="line"><span class="attr">motion:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">async:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">transition:</span></span><br><span class="line">    <span class="comment"># All available transition variants: https://theme-next.js.org/animate/</span></span><br><span class="line">    <span class="attr">post_block:</span> <span class="string">fadeIn</span></span><br><span class="line">    <span class="attr">post_header:</span> <span class="string">fadeInDown</span></span><br><span class="line">    <span class="attr">post_body:</span> <span class="string">fadeInDown</span></span><br><span class="line">    <span class="attr">coll_header:</span> <span class="string">fadeInLeft</span></span><br><span class="line">    <span class="comment"># Only for Pisces | Gemini.</span></span><br><span class="line">    <span class="attr">sidebar:</span> <span class="string">fadeInUp</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Progress bar in the top during page loading.</span></span><br><span class="line"><span class="comment"># For more information: https://github.com/CodeByZach/pace</span></span><br><span class="line"><span class="attr">pace:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="comment"># All available colors:</span></span><br><span class="line">  <span class="comment"># black | blue | green | orange | pink | purple | red | silver | white | yellow</span></span><br><span class="line">  <span class="attr">color:</span> <span class="string">black</span></span><br><span class="line">  <span class="comment"># All available themes:</span></span><br><span class="line">  <span class="comment"># big-counter | bounce | barber-shop | center-atom | center-circle | center-radar | center-simple</span></span><br><span class="line">  <span class="comment"># corner-indicator | fill-left | flat-top | flash | loading-bar | mac-osx | material | minimal</span></span><br><span class="line">  <span class="attr">theme:</span> <span class="string">material</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Canvas ribbon</span></span><br><span class="line"><span class="comment"># For more information: https://github.com/hustcc/ribbon.js</span></span><br><span class="line"><span class="attr">canvas_ribbon:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">size:</span> <span class="number">300</span> <span class="comment"># The width of the ribbon</span></span><br><span class="line">  <span class="attr">alpha:</span> <span class="number">0.4</span> <span class="comment"># The transparency of the ribbon</span></span><br><span class="line">  <span class="attr">zIndex:</span> <span class="number">-1</span> <span class="comment"># The display level of the ribbon</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># ---------------------------------------------------------------</span></span><br><span class="line"><span class="comment"># CDN Settings</span></span><br><span class="line"><span class="comment"># See: https://theme-next.js.org/docs/advanced-settings/vendors</span></span><br><span class="line"><span class="comment"># ---------------------------------------------------------------</span></span><br><span class="line"></span><br><span class="line"><span class="attr">vendors:</span></span><br><span class="line">  <span class="comment"># The CDN provider of NexT internal scripts.</span></span><br><span class="line">  <span class="comment"># Available values: local | jsdelivr | unpkg | cdnjs | custom</span></span><br><span class="line">  <span class="comment"># Warning: If you are using the latest master branch of NexT, please set `internal: local`</span></span><br><span class="line">  <span class="attr">internal:</span> <span class="string">local</span></span><br><span class="line">  <span class="comment"># The default CDN provider of third-party plugins.</span></span><br><span class="line">  <span class="comment"># Available values: local | jsdelivr | unpkg | cdnjs | custom</span></span><br><span class="line">  <span class="comment"># Dependencies for `plugins: local`: https://github.com/next-theme/plugins</span></span><br><span class="line">  <span class="attr">plugins:</span> <span class="string">jsdelivr</span></span><br><span class="line">  <span class="comment"># Custom CDN URL</span></span><br><span class="line">  <span class="comment"># For example:</span></span><br><span class="line">  <span class="comment"># custom_cdn_url: https://cdn.jsdelivr.net/npm/$&#123;npm_name&#125;@$&#123;version&#125;/$&#123;minified&#125;</span></span><br><span class="line">  <span class="comment"># custom_cdn_url: https://cdnjs.cloudflare.com/ajax/libs/$&#123;cdnjs_name&#125;/$&#123;version&#125;/$&#123;cdnjs_file&#125;</span></span><br><span class="line">  <span class="attr">custom_cdn_url:</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Assets</span></span><br><span class="line"><span class="comment"># Accelerate delivery of static files using a CDN</span></span><br><span class="line"><span class="comment"># The js option is only valid when vendors.internal is local.</span></span><br><span class="line"><span class="attr">css:</span> <span class="string">css</span></span><br><span class="line"><span class="attr">js:</span> <span class="string">js</span></span><br><span class="line"><span class="attr">images:</span> <span class="string">images</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># Waline</span></span><br><span class="line"><span class="comment"># For more information: https://waline.js.org, https://github.com/lizheming/waline</span></span><br><span class="line"><span class="attr">waline:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">avatarCDN:</span> <span class="string">https://sdn.geekzu.org/avatar/</span></span><br><span class="line">  <span class="attr">serverURL:</span> <span class="string">https://waline-qmkdgwexn-ivy-lun.vercel.app/</span>                     <span class="comment"># Waline server address url</span></span><br><span class="line">  <span class="attr">placeholder:</span> <span class="string">&#x27;请在评论时在上面留下昵称和邮箱哦😊&#x27;</span>                                    <span class="comment"># Comment box placeholder</span></span><br><span class="line">  <span class="attr">avatar:</span> <span class="string">robohash</span>                                          <span class="comment"># Gravatar style</span></span><br><span class="line">  <span class="attr">meta:</span> [<span class="string">nick</span>, <span class="string">mail</span>, <span class="string">link</span>]                                  <span class="comment"># Custom comment header</span></span><br><span class="line">  <span class="attr">pageSize:</span> <span class="number">10</span>                                              <span class="comment"># Pagination size</span></span><br><span class="line">  <span class="attr">lang:</span> <span class="string">zh-cn</span>                                               <span class="comment"># Language, available values: en, zh-cn</span></span><br><span class="line">  <span class="attr">visitor:</span> <span class="literal">false</span>                                            <span class="comment"># Article reading statistic</span></span><br><span class="line">  <span class="attr">comment_count:</span> <span class="literal">true</span>                                       <span class="comment"># If false, comment count will only be displayed in post page, not in home page</span></span><br><span class="line">  <span class="attr">requiredMeta:</span> []                                          <span class="comment"># Set required fields: [nick] | [nick, mail]</span></span><br><span class="line">  <span class="attr">libUrl:</span>                                                   <span class="comment"># Set custom library cdn url</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="2-花里胡哨的配置"><a href="#2-花里胡哨的配置" class="headerlink" title="2.花里胡哨的配置"></a>2.花里胡哨的配置</h4><p><strong>&#x3D;&#x3D;一些稍微高级点的配置教程&#x3D;&#x3D;</strong></p><p><strong>（1）添加waline评论系统</strong></p><p>具体文档请看——&gt;<a href="https://waline.js.org/">Waline官网</a>，按照官网教程配置后端。</p><p>配置完成后，在站点根目录打开命令执行下面的命令，安装waline插件最新版本：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install @waline/hexo-next --save</span><br></pre></td></tr></table></figure><p>随后在主题配置文件中引入waline：</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Waline</span></span><br><span class="line"><span class="comment"># For more information: https://waline.js.org, https://github.com/lizheming/waline</span></span><br><span class="line"><span class="attr">waline:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">serverURL:</span> <span class="string">https://waline.example.com</span>                     <span class="comment"># 在这里粘贴你获得的评论地址</span></span><br><span class="line">  <span class="attr">placeholder:</span> <span class="string">&#x27;Just go&#x27;</span>                                    <span class="comment"># 这里是评论框里显示的文字</span></span><br><span class="line">  <span class="attr">avatar:</span> <span class="string">mm</span>                                                <span class="comment"># 头像</span></span><br><span class="line">  <span class="attr">meta:</span> [<span class="string">nick</span>, <span class="string">mail</span>, <span class="string">link</span>]                                  <span class="comment"># Custom comment header</span></span><br><span class="line">  <span class="attr">pageSize:</span> <span class="number">10</span>                                              <span class="comment"># Pagination size</span></span><br><span class="line">  <span class="attr">lang:</span> <span class="string">zh-cn</span>                                               <span class="comment"># Language, available values: en, zh-cn</span></span><br><span class="line">  <span class="attr">visitor:</span> <span class="literal">false</span>                                            <span class="comment"># Article reading statistic</span></span><br><span class="line">  <span class="attr">comment_count:</span> <span class="literal">true</span>                                       <span class="comment"># If false, comment count will only be displayed in post page, not in home page</span></span><br><span class="line">  <span class="attr">requiredMeta:</span> []                                          <span class="comment"># Set required fields: [nick] | [nick, mail]</span></span><br><span class="line">  <span class="attr">libUrl:</span>                                                   <span class="comment"># Set custom library cdn url</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p>如果avatar无法使用，可以直接在waline的配置中添加gravatar的国内cdn：</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">https://sdn.geekzu.org/avatar/</span></span><br></pre></td></tr></table></figure><p><strong>（2）彩色标签云</strong></p><p>在<code>/themes/next/layout/</code>目录下，新增&#96;tag-color.njk文件，加入下方代码：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br></pre></td><td class="code"><pre><span class="line">  <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">     <span class="keyword">var</span> alltags = <span class="variable language_">document</span>.<span class="title function_">getElementsByClassName</span>(<span class="string">&#x27;tag-cloud-tags&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">     <span class="keyword">var</span> tags = alltags[<span class="number">0</span>].<span class="title function_">getElementsByTagName</span>(<span class="string">&#x27;a&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">     <span class="keyword">for</span> (<span class="keyword">var</span> i = tags.<span class="property">length</span> - <span class="number">1</span>; i &gt;= <span class="number">0</span>; i--) &#123;</span></span><br><span class="line"><span class="language-javascript">       <span class="keyword">var</span> golden_ratio = <span class="number">0.618033988749895</span>;</span></span><br><span class="line"><span class="language-javascript">       <span class="keyword">var</span> s = <span class="number">0.5</span>;</span></span><br><span class="line"><span class="language-javascript">       <span class="keyword">var</span> v = <span class="number">0.999</span>;</span></span><br><span class="line"><span class="language-javascript">       <span class="keyword">var</span> h = golden_ratio + <span class="title class_">Math</span>.<span class="title function_">random</span>()*<span class="number">0.8</span> - <span class="number">0.5</span>;</span></span><br><span class="line"><span class="language-javascript">       <span class="keyword">var</span> h_i = <span class="built_in">parseInt</span>(h * <span class="number">6</span>);</span></span><br><span class="line"><span class="language-javascript">       <span class="keyword">var</span> f = h * <span class="number">6</span> - h_i;</span></span><br><span class="line"><span class="language-javascript">       <span class="keyword">var</span> p = v * (<span class="number">1</span> - s);</span></span><br><span class="line"><span class="language-javascript">       <span class="keyword">var</span> q = v * (<span class="number">1</span> - f * s);</span></span><br><span class="line"><span class="language-javascript">       <span class="keyword">var</span> t = v * (<span class="number">1</span> - (<span class="number">1</span> - f) * s);</span></span><br><span class="line"><span class="language-javascript">       <span class="keyword">var</span> r, g, b;</span></span><br><span class="line"><span class="language-javascript">       <span class="keyword">switch</span> (h_i) &#123;</span></span><br><span class="line"><span class="language-javascript">          <span class="keyword">case</span> <span class="number">0</span>:</span></span><br><span class="line"><span class="language-javascript">              r = v;</span></span><br><span class="line"><span class="language-javascript">              g = t;</span></span><br><span class="line"><span class="language-javascript">              b = p;</span></span><br><span class="line"><span class="language-javascript">              <span class="keyword">break</span>;</span></span><br><span class="line"><span class="language-javascript">          <span class="keyword">case</span> <span class="number">1</span>:</span></span><br><span class="line"><span class="language-javascript">              r = q;</span></span><br><span class="line"><span class="language-javascript">              g = v;</span></span><br><span class="line"><span class="language-javascript">              b = p;</span></span><br><span class="line"><span class="language-javascript">              <span class="keyword">break</span>;</span></span><br><span class="line"><span class="language-javascript">          <span class="keyword">case</span> <span class="number">2</span>:</span></span><br><span class="line"><span class="language-javascript">              r = p;</span></span><br><span class="line"><span class="language-javascript">              g = v;</span></span><br><span class="line"><span class="language-javascript">              b = t;</span></span><br><span class="line"><span class="language-javascript">              <span class="keyword">break</span>;</span></span><br><span class="line"><span class="language-javascript">          <span class="keyword">case</span> <span class="number">3</span> :</span></span><br><span class="line"><span class="language-javascript">              r = p;</span></span><br><span class="line"><span class="language-javascript">              g = q;</span></span><br><span class="line"><span class="language-javascript">              b = v;</span></span><br><span class="line"><span class="language-javascript">              <span class="keyword">break</span>;</span></span><br><span class="line"><span class="language-javascript">          <span class="keyword">case</span> <span class="number">4</span>:</span></span><br><span class="line"><span class="language-javascript">              r = t;</span></span><br><span class="line"><span class="language-javascript">              g = p;</span></span><br><span class="line"><span class="language-javascript">              b = v;</span></span><br><span class="line"><span class="language-javascript">              <span class="keyword">break</span>;</span></span><br><span class="line"><span class="language-javascript">          <span class="keyword">case</span> <span class="number">5</span>:</span></span><br><span class="line"><span class="language-javascript">              r = v;</span></span><br><span class="line"><span class="language-javascript">              g = p;</span></span><br><span class="line"><span class="language-javascript">              b = q;</span></span><br><span class="line"><span class="language-javascript">              <span class="keyword">break</span>;</span></span><br><span class="line"><span class="language-javascript">          <span class="attr">default</span>:</span></span><br><span class="line"><span class="language-javascript">              r = <span class="number">1</span>;</span></span><br><span class="line"><span class="language-javascript">              g = <span class="number">1</span>;</span></span><br><span class="line"><span class="language-javascript">              b = <span class="number">1</span>;</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">       tags[i].<span class="property">style</span>.<span class="property">background</span> = <span class="string">&quot;rgba(&quot;</span>+<span class="built_in">parseInt</span>(r*<span class="number">255</span>)+<span class="string">&quot;,&quot;</span>+<span class="built_in">parseInt</span>(g*<span class="number">255</span>)+<span class="string">&quot;,&quot;</span>+<span class="built_in">parseInt</span>(b*<span class="number">255</span>)+<span class="string">&quot;,&quot;</span>+<span class="number">0.5</span>+<span class="string">&quot;)&quot;</span>;</span></span><br><span class="line"><span class="language-javascript">     &#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">  <span class="selector-class">.tag-cloud-tags</span>&#123;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">text-align</span>: center;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">counter-reset</span>: tags;</span></span><br><span class="line"><span class="language-css">  &#125;</span></span><br><span class="line"><span class="language-css">  <span class="selector-class">.tag-cloud-tags</span> <span class="selector-tag">a</span>&#123;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">display</span>: inline-block;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">border</span>: <span class="number">0px</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">border-radius</span>: <span class="number">10px</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">padding</span>: <span class="number">0px</span> <span class="number">10px</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">margin</span>: <span class="number">8px</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">color</span>: <span class="built_in">rgba</span>(<span class="number">34</span>, <span class="number">34</span>, <span class="number">34</span>, <span class="number">0.8</span>);</span></span><br><span class="line"><span class="language-css">    </span></span><br><span class="line"><span class="language-css">  &#125;</span></span><br><span class="line"><span class="language-css"><span class="comment">/* 文字前添加相应的符号，content后的Unicode可以自定义*/</span></span></span><br><span class="line"><span class="language-css">  <span class="selector-class">.tag-cloud-tags</span> <span class="selector-tag">a</span><span class="selector-pseudo">:before</span>&#123;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">font-family</span>: <span class="string">&#x27;Font Awesome 5 Free&#x27;</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">content</span>: <span class="string">&quot;\f02b&quot;</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">font-weight</span>: <span class="number">900</span>;</span></span><br><span class="line"><span class="language-css">  &#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">  <span class="selector-class">.tag-cloud-tags</span> <span class="selector-tag">a</span><span class="selector-pseudo">:hover</span>&#123;</span></span><br><span class="line"><span class="language-css">     <span class="attribute">box-shadow</span>: <span class="number">0px</span> <span class="number">5px</span> <span class="number">15px</span> <span class="number">0px</span> <span class="built_in">rgba</span>(<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,.<span class="number">4</span>);</span></span><br><span class="line"><span class="language-css">     <span class="attribute">transform</span>: <span class="built_in">scale</span>(<span class="number">1.1</span>);</span></span><br><span class="line"><span class="language-css">     <span class="attribute">transition-duration</span>: <span class="number">0.15s</span>;</span></span><br><span class="line"><span class="language-css">  &#125;</span></span><br><span class="line"><span class="language-css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br></pre></td></tr></table></figure><p>在&#x2F;themes&#x2F;next&#x2F;layout&#x2F;page.swig&#x2F;中引入tag-color.swig：</p><p>在下方加上 <code>&#123;% include 'tag-color.swig' %&#125;</code> 代码</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&lt;div</span> <span class="string">class=&quot;post-body&#123;%</span> <span class="string">if</span> <span class="string">page.direction</span> <span class="string">and</span> <span class="string">page.direction.toLowerCase()</span> <span class="string">===</span> <span class="string">&#x27;rtl&#x27;</span> <span class="string">%&#125;</span> <span class="string">rtl&#123;%</span> <span class="string">endif</span> <span class="string">%&#125;&quot;&gt;</span></span><br><span class="line">    &#123;<span class="string">%-</span> <span class="string">if</span> <span class="string">page.type</span> <span class="string">===</span> <span class="string">&#x27;tags&#x27;</span> <span class="string">%</span>&#125;</span><br><span class="line">          &#123;<span class="string">%-</span> <span class="string">include</span> <span class="string">&#x27;_partials/page/tags.njk&#x27;</span> <span class="string">-%</span>&#125;</span><br><span class="line">    &#123;<span class="string">%</span> <span class="string">elif</span> <span class="string">page.type</span> <span class="string">===</span> <span class="string">&#x27;categories&#x27;</span> <span class="string">%</span>&#125;</span><br><span class="line">      &#123;<span class="string">%-</span> <span class="string">include</span> <span class="string">&#x27;_partials/page/categories.njk&#x27;</span> <span class="string">-%</span>&#125;</span><br><span class="line">    &#123;<span class="string">%</span> <span class="string">elif</span> <span class="string">page.type</span> <span class="string">===</span> <span class="string">&#x27;schedule&#x27;</span> <span class="string">%</span>&#125;</span><br><span class="line">      &#123;<span class="string">%-</span> <span class="string">include</span> <span class="string">&#x27;_partials/page/schedule.njk&#x27;</span> <span class="string">-%</span>&#125;</span><br><span class="line">    &#123;<span class="string">%</span> <span class="string">else</span> <span class="string">%</span>&#125;</span><br><span class="line">      &#123;&#123; <span class="string">page.content</span> &#125;&#125;</span><br><span class="line">    &#123;<span class="string">%-</span> <span class="string">endif</span> <span class="string">%</span>&#125;</span><br><span class="line">    &#123;<span class="string">%-</span> <span class="string">include</span> <span class="string">&#x27;tag-color.njk&#x27;</span> <span class="string">%</span>&#125; <span class="comment">#这里是添加的代码</span></span><br><span class="line"><span class="string">&lt;/div&gt;</span></span><br></pre></td></tr></table></figure><p>修改文章底部标签样式</p><p>打开themes&#x2F;next&#x2F;layout&#x2F;_macro&#x2F;post.njk，找到以下代码并修改：</p><figure class="highlight twig"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="language-xml">- &#123;%- set tag_indicate = &#x27;<span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">&quot;fa fa-tag&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span>&#x27; if theme.tag_icon else &#x27;#&#x27; %&#125;</span></span><br><span class="line"><span class="language-xml">+ &#123;%- set tag_indicate = &#x27;<span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">&quot;fa fa-tag&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span>&#x27; if theme.tag_icon else &#x27;<span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">&quot;fa fa-tag&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span>&#x27; %&#125;</span></span><br></pre></td></tr></table></figure><p><strong>（3）启用圆角</strong></p><p>打开next&#x2F;source&#x2F;css&#x2F;_variables&#x2F;Gemini.styl，将以下两行代码取消注释：</p><figure class="highlight twig"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="language-xml">// $border-radius-inner     = 0 0 3px 3px;</span></span><br><span class="line"><span class="language-xml">// $border-radius           = 3px;</span></span><br></pre></td></tr></table></figure><p>并修改为：</p><figure class="highlight twig"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="language-xml">$border-radius-inner     = 25px 25px 25px 25px;</span></span><br><span class="line"><span class="language-xml">$border-radius           = 25px;</span></span><br></pre></td></tr></table></figure><p>即可启用大圆角，如不喜欢可以自行修改上面的值。</p><p><strong>（4）更改鼠标指针</strong></p><p>找到themes&#x2F;next&#x2F;source&#x2F;css&#x2F;_variables&#x2F;Gemini.styl，添加如下代码：</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">* &#123;</span><br><span class="line">  <span class="attribute">cursor</span>: <span class="built_in">url</span>(<span class="string">https://deerblog.xyz/blog-image/Arrow.cur</span>),auto;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-pseudo">:link</span> &#123;</span><br><span class="line">  <span class="attribute">cursor</span>: <span class="built_in">url</span>(<span class="string">https://deerblog.xyz/blog-image/Hand.cur</span>),auto</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>（5）添加全站美化元素</strong></p><p>找到文件themes&#x2F;next&#x2F;layout&#x2F;_partials&#x2F;footer.njk，在末尾添加以下代码：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&#123;# 樱花飘落 #&#125;</span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://cdn.jsdelivr.net/gh/wallleap/cdn@latest/js/sakura.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">&#123;# 星星跟随坠落 #&#125;</span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://cdn.jsdelivr.net/gh/cungudafa/cdn@2.1.2/js/cursor.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">&#123;# 搞怪标题 #&#125;</span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://cdn.jsdelivr.net/gh/wallleap/cdn@latest/js/hititle.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">&#123;# 爱心 #&#125;</span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://cdn.jsdelivr.net/gh/wallleap/cdn/js/love.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Hexo </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Hexo </tag>
            
            <tag> NexT主题 </tag>
            
            <tag> 主题美化 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>六、系统调用</title>
      <link href="/2022/04/13/1128377c/"/>
      <url>/2022/04/13/1128377c/</url>
      
        <content type="html"><![CDATA[<h4 id="1-什么是系统调用"><a href="#1-什么是系统调用" class="headerlink" title="1.什么是系统调用"></a>1.什么是系统调用</h4><p>操作系统是用户和计算机硬件之间的接口需要向上层提供一些简单易用的服务。主要包括<strong>命令接口</strong>和<strong>程序接口</strong>。其中，程序接口由一组&#x3D;&#x3D;<strong>系统调用</strong>&#x3D;&#x3D;组成。</p><blockquote><p>用户接口：</p><ol><li><p>命令接口（允许用户直接使用）</p><ul><li>联机命令接口：用户说一句，系统做一句</li><li>脱机命令接口：用户说一堆，系统做一堆。</li></ul><ol start="2"><li>程序接口（允许用户通过程序间接使用）：由一组系统调用组成。</li></ol><p>系统调用就是操作系统提供给程序使用的接口，可以理解为一种可供应用程序调用的函数，应用程序可以发出系统调用请求来获得操作系统的服务。</p></li></ol></blockquote><h5 id="2-系统调用的作用："><a href="#2-系统调用的作用：" class="headerlink" title="2.系统调用的作用："></a>2.系统调用的作用：</h5><p>应用程序通过系统调用请求操作系统的服务。系统中的各种共享资源由操作系统统一管理，因此在用户程序中，凡事与资源有关的操作（如存储分配，I&#x2F;O操作，文件管理等），都必须通过系统调用的方式像操作系统提出服务请求，由操作系统代为完成，这样<strong>可以保证系统的稳定性和安全性</strong>，防止用户进行非法操作。</p><blockquote><p><strong>系统调用</strong>（按功能分类）：</p><ul><li><strong>设备管理</strong>：完成设备的请求、释放、启动等工作</li><li><strong>文件管理</strong>：完成文件的读写、创建、删除等功能</li><li><strong>进程控制</strong>：完成进程的创建。撤销、阻塞、唤醒等功能</li><li><strong>进程通信</strong>：完成进程之间的消息传递、信号传递等功能</li><li><strong>内存管理</strong>：完成内存的分配、回收等功能</li></ul><blockquote><p>系统调用相关处理涉及到对系统资源的管理，对进程的控制，这些功能需要执行一些<strong>特权指令</strong>才能完成，因此<strong>系统调用的相关处理</strong>需要在<strong>核心态</strong>下完成。</p></blockquote></blockquote><h4 id="3-系统调用与库函数的区别"><a href="#3-系统调用与库函数的区别" class="headerlink" title="3.系统调用与库函数的区别"></a>3.系统调用与库函数的区别</h4><p><img src="https://s1.ax1x.com/2022/04/13/LMvy5D.png" alt="区别"></p><h4 id="4-系统调用背后的过程"><a href="#4-系统调用背后的过程" class="headerlink" title="4.系统调用背后的过程"></a>4.系统调用背后的过程</h4><p>首先需要做的是把传入系统调用的参数用相应的指令放入相应的通用寄存器中并执行相应的陷入指令（interrupt的缩写，此汇编指令的作用是引发一次系统中断），指令运行在<strong>用户态</strong>。当指令被执行时系统会执行相应的系统调用服务程序，这时候系统中断开始并运行在<strong>核心态</strong>，待系统调用完成后会把执行结果返回给用户程序，重新回到用户态，继续执行后续操作。如下图所示：</p><p><img src="https://s1.ax1x.com/2022/04/13/LMvRxA.png" alt="过程"></p><blockquote><p>有些书上陷入指令被叫做访管指令。概念是：因操作系统不允许用户态运行某些“危险性”高的指令，于是用户态运行这些指令的结果会转化成操作系统的核心态（管态）去运行。</p><p>上图注意3补充：<strong>核心态只能执行系统调用，不能请求系统调用；用户态不能执行系统调用，只能请求系统调用</strong>。</p><p>**系统调用发生在用户态，执行在核心态。**比如说你去仓库提货，仓库有专门的管理员而且你并不能进入仓库。管理员在门口待命。你过去跟他说你要什么什么，仓库管理员就进仓库提你想要的货物，提完货物后会回到仓库门口把货物交给你。在这个过程中，门外就相当于用户态，仓库内就相当于核心态。你跟管理员要货就相当于请求一次系统调用，管理员进仓库给你拿货就相当于执行了一次系统调用，并在拿完货后出门给我你货物，这个过程就相当于返回系统调用的结果。很简单的道理。</p></blockquote><blockquote><blockquote><blockquote><p><em><strong>吧啦吧啦：有的弹幕说中断就是切换任务的，我我个人觉得说的好像也蛮准确的</strong></em></p></blockquote></blockquote></blockquote><h4 id="5-知识回顾"><a href="#5-知识回顾" class="headerlink" title="5.知识回顾"></a>5.知识回顾</h4><p><img src="https://s1.ax1x.com/2022/04/13/LMxCiF.png" alt="回顾"></p>]]></content>
      
      
      <categories>
          
          <category> OS学习笔记 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 操作系统 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Hexo Next主题代码块美化</title>
      <link href="/2022/04/11/9ad71f09/"/>
      <url>/2022/04/11/9ad71f09/</url>
      
        <content type="html"><![CDATA[<h4 id="1-正文"><a href="#1-正文" class="headerlink" title="1.正文"></a>1.正文</h4><p>在NexT主题下的scripts目录中创建events.js</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="selector-tag">var</span> exec = require(&#x27;child_process&#x27;)<span class="selector-class">.exec</span>;</span><br><span class="line"></span><br><span class="line">hexo<span class="selector-class">.on</span>(&#x27;new&#x27;, function(data)&#123;</span><br><span class="line">    exec(&#x27;open -<span class="selector-tag">a</span> MacDown &#x27; + data<span class="selector-class">.path</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>在NexT主题下的scripts目录中创建codeblock.js</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="selector-tag">var</span> attributes = <span class="selector-attr">[</span></span><br><span class="line"><span class="selector-attr">  <span class="string">&#x27;autocomplete=&quot;off&quot;&#x27;</span>,</span></span><br><span class="line"><span class="selector-attr">  <span class="string">&#x27;autocorrect=&quot;off&quot;&#x27;</span>,</span></span><br><span class="line"><span class="selector-attr">  <span class="string">&#x27;autocapitalize=&quot;off&quot;&#x27;</span>,</span></span><br><span class="line"><span class="selector-attr">  <span class="string">&#x27;spellcheck=&quot;false&quot;&#x27;</span>,</span></span><br><span class="line"><span class="selector-attr">  <span class="string">&#x27;contenteditable=&quot;true&quot;&#x27;</span></span></span><br><span class="line"><span class="selector-attr">]</span></span><br><span class="line"></span><br><span class="line"><span class="selector-tag">var</span> attributesStr = attributes<span class="selector-class">.join</span>(&#x27; &#x27;)</span><br><span class="line"></span><br><span class="line">hexo<span class="selector-class">.extend</span><span class="selector-class">.filter</span><span class="selector-class">.register</span>(&#x27;after_post_render&#x27;, function (data) &#123;</span><br><span class="line">  while (/&lt;<span class="selector-tag">figure</span> class=&quot;highlight (<span class="selector-attr">[a-zA-Z]</span>+)&quot;&gt;.*?&lt;\/<span class="selector-tag">figure</span>&gt;/<span class="selector-class">.test</span>(data<span class="selector-class">.content</span>)) &#123;</span><br><span class="line">    data<span class="selector-class">.content</span> = data<span class="selector-class">.content</span><span class="selector-class">.replace</span>(/&lt;<span class="selector-tag">figure</span> class=&quot;highlight (<span class="selector-attr">[a-zA-Z]</span>+)&quot;&gt;.*?&lt;\/<span class="selector-tag">figure</span>&gt;/, function () &#123;</span><br><span class="line">      <span class="selector-tag">var</span> language = RegExp.$<span class="number">1</span> || &#x27;plain&#x27;</span><br><span class="line">      <span class="selector-tag">var</span> lastMatch = RegExp<span class="selector-class">.lastMatch</span></span><br><span class="line">      lastMatch = lastMatch<span class="selector-class">.replace</span>(/&lt;<span class="selector-tag">figure</span> class=&quot;highlight /, &#x27;&lt;<span class="selector-tag">figure</span> class=&quot;iseeu highlight /&#x27;)</span><br><span class="line">      return &#x27;&lt;<span class="selector-tag">div</span> class=&quot;highlight-wrap&quot;&#x27; + attributesStr + &#x27;data-rel=&quot;&#x27; + language<span class="selector-class">.toUpperCase</span>() + &#x27;&quot;&gt;&#x27; + lastMatch + &#x27;&lt;/<span class="selector-tag">div</span>&gt;&#x27;</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">  return data</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>在 themes&#x2F;next&#x2F;source&#x2F;css&#x2F;_common&#x2F;components&#x2F;highlight&#x2F;highlight.styl 的基础上调整了下样式，包裹上一层类 mac Panel 的效果。</p><p><strong>&#x3D;&#x3D;注： 这里不用删除原来highlight.styl里边的内容，只需要在末尾添加下面代码即可&#x3D;&#x3D;</strong></p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="selector-class">.highlight-wrap</span><span class="selector-attr">[data-rel]</span> &#123;</span><br><span class="line">  <span class="attribute">position</span>: relative;</span><br><span class="line">  <span class="attribute">overflow</span>: hidden;</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">5px</span>;</span><br><span class="line">  <span class="attribute">box-shadow</span>: <span class="number">0</span> <span class="number">10px</span> <span class="number">30px</span> <span class="number">0px</span> <span class="built_in">rgba</span>(<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0.4</span>);</span><br><span class="line">  <span class="attribute">margin</span>: <span class="number">35px</span> <span class="number">0</span>;</span><br><span class="line">  ::-webkit-scrollbar &#123;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">10px</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  ::-webkit-scrollbar-track &#123;</span><br><span class="line">      -webkit-<span class="attribute">box-shadow</span>: inset <span class="number">0</span> <span class="number">0</span> <span class="number">6px</span> <span class="built_in">rgba</span>(<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0.3</span>);</span><br><span class="line">      <span class="attribute">border-radius</span>: <span class="number">10px</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  ::-webkit-scrollbar-thumb &#123;</span><br><span class="line">      <span class="attribute">border-radius</span>: <span class="number">10px</span>;</span><br><span class="line">      -webkit-<span class="attribute">box-shadow</span>: inset <span class="number">0</span> <span class="number">0</span> <span class="number">6px</span> <span class="built_in">rgba</span>(<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0.5</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  &amp;<span class="selector-pseudo">::before</span> &#123;</span><br><span class="line">    <span class="attribute">color</span>: white;</span><br><span class="line">    <span class="attribute">content</span>: <span class="built_in">attr</span>(data-rel);</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">38px</span>;</span><br><span class="line">    <span class="attribute">line-height</span>: <span class="number">38px</span>;</span><br><span class="line">    <span class="attribute">background</span>: <span class="number">#21252b</span>;</span><br><span class="line">    <span class="attribute">color</span>: <span class="number">#fff</span>;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">16px</span>;</span><br><span class="line">    <span class="attribute">position</span>: absolute;</span><br><span class="line">    <span class="attribute">top</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">left</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">    <span class="attribute">font-family</span>: <span class="string">&#x27;Source Sans Pro&#x27;</span>, sans-serif;</span><br><span class="line">    <span class="attribute">font-weight</span>: bold;</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">0px</span> <span class="number">80px</span>;</span><br><span class="line">    <span class="attribute">text-indent</span>: <span class="number">15px</span>;</span><br><span class="line">    <span class="attribute">float</span>: left;</span><br><span class="line">  &#125;</span><br><span class="line">  &amp;<span class="selector-pseudo">::after</span> &#123;</span><br><span class="line">    <span class="attribute">content</span>: <span class="string">&quot; &quot;</span>;</span><br><span class="line">    <span class="attribute">position</span>: absolute;</span><br><span class="line">    -webkit-<span class="attribute">border-radius</span>: <span class="number">50%</span>;</span><br><span class="line">    <span class="attribute">border-radius</span>: <span class="number">50%</span>;</span><br><span class="line">    <span class="attribute">background</span>: <span class="number">#fc625d</span>;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">12px</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">12px</span>;</span><br><span class="line">    <span class="attribute">top</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">left</span>: <span class="number">20px</span>;</span><br><span class="line">    <span class="attribute">margin-top</span>: <span class="number">13px</span>;</span><br><span class="line">    -webkit-<span class="attribute">box-shadow</span>: <span class="number">20px</span> <span class="number">0px</span> <span class="number">#fdbc40</span>, <span class="number">40px</span> <span class="number">0px</span> <span class="number">#35cd4b</span>;</span><br><span class="line">    <span class="attribute">box-shadow</span>: <span class="number">20px</span> <span class="number">0px</span> <span class="number">#fdbc40</span>, <span class="number">40px</span> <span class="number">0px</span> <span class="number">#35cd4b</span>;</span><br><span class="line">    <span class="attribute">z-index</span>: <span class="number">3</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>在highlight.styl中找到如下部分代码，修改margin为36px 0 0 0：</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">$<span class="selector-tag">code</span>-block &#123;</span><br><span class="line">  <span class="attribute">overflow</span>: auto;</span><br><span class="line">-  <span class="attribute">margin</span>: <span class="number">20px</span> <span class="number">0</span>;  //这一行改为</span><br><span class="line">+  <span class="attribute">margin</span>: <span class="number">36px</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span>;  //这个</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">font-size</span> $<span class="selector-tag">code</span>-<span class="attribute">font-size</span>;</span><br><span class="line">  <span class="attribute">color</span>: $highlight-foreground;</span><br><span class="line">  <span class="attribute">background</span>: $highlight-background;</span><br><span class="line">  <span class="attribute">line-height</span>: $line-height-code-block;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>在主题中将高亮代码变为：night eighties</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">highlight_theme: night eighties</span><br></pre></td></tr></table></figure><p>最后来要在网站根目录下打开Git Bash，然后执行以下命令重新生成静态页面：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">hexo clean &amp;&amp; hexo g</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Hexo </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Hexo </tag>
            
            <tag> NexT主题 </tag>
            
            <tag> 主题美化 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>五、中断和异常</title>
      <link href="/2022/04/10/8cc319c6/"/>
      <url>/2022/04/10/8cc319c6/</url>
      
        <content type="html"><![CDATA[<h4 id="1-中断机制的诞生"><a href="#1-中断机制的诞生" class="headerlink" title="1.中断机制的诞生"></a>1.中断机制的诞生</h4><p>为了解决早期计算机资源利用率低的的问题，人们发明了<strong>操作系统</strong>，引入了<strong>中断机制</strong>，实现多道程序并发执行。</p><p><strong>本质：发生了中断也就意味着需要操作系统介入，展开管理工作。<strong>CPU 收到计时部件发送的</strong>中断信号</strong>，切换为<strong>内核态</strong>，操作系统负责处理中断。</p><h4 id="2-中断的概念和作用"><a href="#2-中断的概念和作用" class="headerlink" title="2.中断的概念和作用"></a>2.中断的概念和作用</h4><ol><li>当中断发生时，CPU 立即进入<strong>核心态</strong>。</li><li>当中断发生后，当前运行的进程暂停执行，并由操作系统内核对中断进行处理。</li><li>对于不用的中断信号，会进行不同的处理。</li></ol><p><strong>中断</strong>可以使 CPU 从<strong>用户态切换为核心态，使操作系统获得计算机的控制权。<strong>有了终端，才能够实现多道程序并发执行。只有在</strong>核心态</strong>操作系统才能够执行特权指令。从<strong>用户态切换到核心态是通过中断实现的，并且是唯一的途径</strong>。</p><h4 id="3-中断的分类"><a href="#3-中断的分类" class="headerlink" title="3.中断的分类"></a>3.中断的分类</h4><p><strong>中断（广义上的）：</strong></p><ol><li><p><strong>内中断（也称异常，例外，陷入）</strong></p><ul><li><p>信号来源：CPU<strong>内部</strong>，与当前执行的指令有关。</p></li><li><p>自愿中断——指令中断（系统中断）</p></li><li><p>强迫中断——硬件故障或软件中断</p></li></ul></li><li><p><strong>外中断（狭义上的中断）</strong></p><ul><li><p>信号来源：CPU<strong>外部</strong>与但钱执行的指令无关。</p></li><li><p>外设请求</p></li><li><p>人工干预</p></li></ul></li></ol><p><strong>另一种分类方式：</strong></p><p><img src="https://s1.ax1x.com/2022/04/10/LAsMqI.png" alt="分类"></p><h4 id="4-外部中断的处理过程"><a href="#4-外部中断的处理过程" class="headerlink" title="4.外部中断的处理过程"></a>4.外部中断的处理过程</h4><ol><li>每条指令执行结束后，CPU 检查是否有外部中断信号</li><li>若有外部中断信号，则需要保护中断进程的 CPU 环境</li><li>根据中断信号类型转入相应的中断处理程序</li><li>恢复原进程的 CPU 环境并推出中断，返回原进程继续往下执行</li></ol><hr><h4 id="5-知识图谱"><a href="#5-知识图谱" class="headerlink" title="5.知识图谱"></a>5.知识图谱</h4><p><img src="https://s1.ax1x.com/2022/04/10/LA6gbR.png" alt="图谱"></p>]]></content>
      
      
      <categories>
          
          <category> OS学习笔记 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 操作系统 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>四、操作系统的运行机制与体系系统</title>
      <link href="/2022/04/10/d023d6a0/"/>
      <url>/2022/04/10/d023d6a0/</url>
      
        <content type="html"><![CDATA[<h4 id="1-运行机制"><a href="#1-运行机制" class="headerlink" title="1.运行机制"></a>1.运行机制</h4><p>什么是指令， “指令”和“代码”有什么区别？</p><p>比如：C语言指令代码源文件经过编译后变成机器语言指令，而一条高级语言的代码可能对应着多条指令。</p><p>简而言之，<strong>“指令”就是CPU能够处理和执行的最基本的命令</strong>，就是让CPU干一件具体的事情。</p><p><strong>（1）两种指令：</strong></p><ul><li><strong>特权指令</strong>：如内存清零指令（不允许用户程序使用）</li><li><strong>非特权指令</strong>：如普通的运算指令</li></ul><p>问：CPU怎样执行特权指令？</p><p><strong>（2）两种处理器状态：</strong></p><ul><li><strong>用户态（目态）</strong>：在该状态下CPU只能执行非特权指令。</li><li><strong>核心态（管态）</strong>：在该状态下特权指令和非特权指令都可以执行。</li></ul><p>在CPU中存在一个<strong>用户程序状态寄存器（PSW）</strong>，在其中的某一个标志位来标识当前处理器处于什么状态。如0为用户态，1为核心态。</p><p><strong>（3）两种程序：</strong></p><ul><li><strong>内核程序</strong>：操作系统的内核程序是系统的管理者，既可以执行特权指令，也可以执行非特权指令，<strong>运行在核心态</strong>。</li><li><strong>应用程序</strong>：为了保证系统能安全运行，普通应用程序只能执行非特权指令，<strong>运行在用户态</strong>。</li></ul><h4 id="2-操作系统内核"><a href="#2-操作系统内核" class="headerlink" title="2.操作系统内核"></a>2.操作系统内核</h4><p>[<img src="https://s1.ax1x.com/2022/04/10/LANsi9.md.png" alt="LANsi9.md.png"></p><p><strong>内核</strong>是计算机配置上的底层<strong>软件</strong>，是操作系统最基本，最核心的部分。</p><p>实现操作系统内核功能的哪些程序就是<strong>内核程序</strong>。</p><blockquote><p>操作系统内核包括：</p><ol><li><strong>时钟管理</strong>：实现计时功能。</li><li><strong>中断处理</strong>：负责实现中断机制</li><li><strong>原语</strong>：<ul><li>是一种特殊的程序</li><li>处于操作系统最底层、最接近硬件的部分</li><li>这种运行的程序具有<strong>原子性</strong>，其运行过程不可中断</li><li>运行时间较短，调用频繁</li></ul></li><li><strong>对系统资源进行管理的功能</strong>：<ul><li>进程管理</li><li>存储管理</li><li>设备管理</li></ul></li></ol></blockquote><p>内核又可被分为：<strong>大内核</strong>和**微内核。**如果内核中包含存储管理，进程管理，设备管理等功能的就被叫做大内核，只包含最基本如时钟管理，中断处理，原语等的就被叫做微内核。</p><h4 id="3-操作系统的体系结构"><a href="#3-操作系统的体系结构" class="headerlink" title="3.操作系统的体系结构"></a>3.操作系统的体系结构</h4><p>操作系统的体系结构：</p><ol><li><strong>大内核</strong><ul><li>将操作系统的主要功能模块都作为系统内核，运行在核心态</li><li>优点：高性能</li><li>缺点：内核代码庞大，结构混乱，难以维护</li></ul></li><li><strong>微内核</strong><ul><li>只把最基本的功能保留在内核</li><li>优点：内核功能少，结构清晰，方便维护</li><li>缺点：需要频繁的在核心态和用户态之间切换，性能低</li></ul></li></ol><p>比如：</p><p><img src="https://s1.ax1x.com/2022/04/10/LAU2fs.png" alt="比喻"></p>]]></content>
      
      
      <categories>
          
          <category> OS学习笔记 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 操作系统 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>在GithubPages上搭建Hexo并配置NexT主题</title>
      <link href="/2022/04/10/cd425cb6/"/>
      <url>/2022/04/10/cd425cb6/</url>
      
        <content type="html"><![CDATA[<h2 id="在GithubPages上搭建Hexo并配置NexT主题"><a href="#在GithubPages上搭建Hexo并配置NexT主题" class="headerlink" title="在GithubPages上搭建Hexo并配置NexT主题"></a>在GithubPages上搭建Hexo并配置NexT主题</h2><h4 id="啰里啰唆"><a href="#啰里啰唆" class="headerlink" title="啰里啰唆"></a>啰里啰唆</h4><p>记录一下自己搭建blog的过程，之前在vps上配置过word press，但是一直也没更新，而且好的vps很贵维护成本也很高，索性干脆不用了，就尝试一下使用hexo在github上搭建blog，效果还不错，总共也就历时两天。网上类似的教程也很多，这里总结记录一下，方便以后开新坑</p><h4 id="首先安装Node-js和Git-for-Windows"><a href="#首先安装Node-js和Git-for-Windows" class="headerlink" title="首先安装Node.js和Git for Windows"></a>首先安装Node.js和Git for Windows</h4><p>[Node.js官网](<a href="https://nodejs.org/en/">Node.js (nodejs.org)</a>)，[Git for windows官网](<a href="https://git-scm.com/">Git (git-scm.com)</a>)，Node.js建议安装LTS长期支持版，支持周期更长且更稳定</p><p>Node.js:点击第一个绿色的按钮下载Node.js,版本不需要和图示一致，直接下载最新版即可。</p><p><img src="https://s1.ax1x.com/2022/04/10/LkbK0K.png" alt="LkbK0K.png"></p><p>Git:点击网页左侧小电脑当中的Download for windows，直接下载最新版即可无需与图示中版本一致。</p><p><img src="https://s1.ax1x.com/2022/04/10/LkbmOx.png" alt="LkbmOx.png"></p><p>下载完成后按照默认安装设置安装即可。</p><h4 id="在GitHub上创建一个仓库"><a href="#在GitHub上创建一个仓库" class="headerlink" title="在GitHub上创建一个仓库"></a>在GitHub上创建一个仓库</h4><p>首先，需要一个GitHub账号。打开GitHub官网点击左上角的sign in就能注册了，不复述了很简单。进行这个过程可能需要<strong>科学</strong>上网，具体自行百度。</p><p><strong>创建一个Github仓库</strong></p><p>点击左上角头像，在弹出的下拉菜单中选择 <strong>Your repositories</strong>，待页面加载完毕后点击左上角绿色的<strong>new</strong>创建一个仓库。</p><p><img src="https://s1.ax1x.com/2022/04/10/Lkbum6.png" alt="Lkbum6.png"></p><p><strong>注意</strong>：仓库名务必是**&#x3D;&#x3D;你的用户名.github.io&#x3D;&#x3D;**,比如上面我的用户名是ivy-lun,那么仓库名就是ivy-lun.github.io,其他的保持默认即可，点击绿色按钮Create repositories即可创建一个仓库。</p><h1 id="太累了，过两天再更吧"><a href="#太累了，过两天再更吧" class="headerlink" title="太累了，过两天再更吧"></a>太累了，过两天再更吧</h1>]]></content>
      
      
      <categories>
          
          <category> Hexo </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Hexo </tag>
            
            <tag> GithubPages </tag>
            
            <tag> Blog </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>markdown笔记</title>
      <link href="/2022/04/09/7417429a/"/>
      <url>/2022/04/09/7417429a/</url>
      
        <content type="html"><![CDATA[<h3 id="·-markdown笔记"><a href="#·-markdown笔记" class="headerlink" title="· markdown笔记"></a>· markdown笔记</h3><h5 id="1-代码块"><a href="#1-代码块" class="headerlink" title="1.代码块"></a>1.代码块</h5><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="code">```java 语言代码</span></span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span>&#123;</span><br><span class="line">    System.out.print(<span class="string">&quot;Hello World!&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="2-标题"><a href="#2-标题" class="headerlink" title="2.标题"></a>2.标题</h5><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="section"># 一级标题</span></span><br><span class="line"><span class="section">## 二级标题</span></span><br><span class="line"><span class="section">### 三级标题</span></span><br><span class="line">...</span><br><span class="line"><span class="section">###### 六级标题</span></span><br></pre></td></tr></table></figure><h1 id="一级标题"><a href="#一级标题" class="headerlink" title="一级标题"></a>一级标题</h1><h2 id="二级标题"><a href="#二级标题" class="headerlink" title="二级标题"></a>二级标题</h2><h3 id="三级标题"><a href="#三级标题" class="headerlink" title="三级标题"></a>三级标题</h3><h3 id="…"><a href="#…" class="headerlink" title="…"></a>…</h3><h6 id="六级标题"><a href="#六级标题" class="headerlink" title="六级标题"></a>六级标题</h6><h3 id="3-字体"><a href="#3-字体" class="headerlink" title="3.字体"></a>3.字体</h3><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="strong">**加粗**</span></span><br><span class="line">==高亮==</span><br><span class="line">~~删除线~~</span><br><span class="line"><span class="emphasis">*斜体*</span></span><br></pre></td></tr></table></figure><p><strong>加粗</strong></p><p><del>删除线</del></p><p><em>斜体</em></p><h3 id="4-引用"><a href="#4-引用" class="headerlink" title="4.引用"></a>4.引用</h3><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&gt;作者：某某某</span><br><span class="line">&gt;&gt;二级作者</span><br><span class="line">&gt;&gt;&gt;三级作者</span><br></pre></td></tr></table></figure><blockquote><p>作者：某某某</p><blockquote><p>二级作者</p><blockquote><p>三级作者</p></blockquote></blockquote></blockquote><h3 id="5-分割"><a href="#5-分割" class="headerlink" title="5.分割"></a>5.分割</h3><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">分割线</span></span><br><span class="line"><span class="section">---</span></span><br><span class="line">分割线2</span><br><span class="line"><span class="strong">**<span class="emphasis">*</span></span></span><br></pre></td></tr></table></figure><p>分割线1</p><hr><p>分割线2</p><hr><h3 id="6-插图"><a href="#6-插图" class="headerlink" title="6.插图"></a>6.插图</h3><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">在线图片</span><br><span class="line">![<span class="string">图片的名字</span>](<span class="link">/图片路径</span>)</span><br><span class="line">本地图片</span><br><span class="line">![<span class="string">图片的名字</span>](<span class="link">/图片url</span>)</span><br></pre></td></tr></table></figure><p><img src="https://gimg2.baidu.com/image_search/src=http%3A%2F%2Fb-ssl.duitang.com%2Fuploads%2Fitem%2F201804%2F18%2F2018041882506_fGU3F.thumb.700_0.jpeg&refer=http%3A%2F%2Fb-ssl.duitang.com&app=2002&size=f9999,10000&q=a80&n=0&g=0n&fmt=auto?sec=1651976555&t=832a30901b8a64eb4e655e9170d08f84" alt="照片"></p><h3 id="7-超链接"><a href="#7-超链接" class="headerlink" title="7.超链接"></a>7.超链接</h3><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[<span class="string">名字</span>](<span class="link">地址</span>)</span><br></pre></td></tr></table></figure><p><a href="https://music.163.com/playlist?id=557481298&userid=392935859">我的网易云歌单</a></p><h3 id="8-列表"><a href="#8-列表" class="headerlink" title="8.列表"></a>8.列表</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">无序列表</span><br><span class="line">- 目录1</span><br><span class="line">- 目录2</span><br><span class="line">- 目录3</span><br><span class="line">- 目录4</span><br><span class="line">有序列表</span><br><span class="line">1. 名称</span><br></pre></td></tr></table></figure><ul><li><p>无序列表</p></li><li><p>目录1</p></li><li><p>目录2</p></li></ul><ol><li><p>有序列表</p></li><li><p>自动生成的2</p></li></ol><h3 id="9-表格"><a href="#9-表格" class="headerlink" title="9.表格"></a>9.表格</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">| 你好 | 你好 | 早安 |</span><br><span class="line">| ---- | ---- | ---- |</span><br><span class="line">| 晚安 |      |      |</span><br><span class="line">|      |      |      |</span><br><span class="line">|      |      |      |</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><strong>表格</strong></p><table><thead><tr><th>你好</th><th>你好</th><th>早安</th></tr></thead><tbody><tr><td>晚安</td><td></td><td></td></tr><tr><td></td><td></td><td></td></tr><tr><td></td><td></td><td></td></tr></tbody></table>]]></content>
      
      
      <categories>
          
          <category> markdown </category>
          
      </categories>
      
      
        <tags>
            
            <tag> markdown笔记 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>三、操作系统的发展和分类</title>
      <link href="/2022/04/09/e941f8da/"/>
      <url>/2022/04/09/e941f8da/</url>
      
        <content type="html"><![CDATA[<h4 id="1-手工操作阶段"><a href="#1-手工操作阶段" class="headerlink" title="1. 手工操作阶段"></a>1. 手工操作阶段</h4><p>缺点：用户独占全机，人机速度矛盾导致资源利用率极低。人的速度慢，输入输出速度也慢，但计算机处理速度极快，人机速度矛盾。</p><p><img src="https://s1.ax1x.com/2022/04/10/LA2eu4.png" alt="手工操作阶段"></p><h4 id="2-批处理阶段"><a href="#2-批处理阶段" class="headerlink" title="2. 批处理阶段"></a>2. 批处理阶段</h4><p><strong>（1）单道批处理系统</strong></p><p>引入<strong>脱机输入&#x2F;输出技术</strong>（用磁带完成），并<strong>监督程序</strong>负责控制作业的输入、输出。</p><p>主要优点：一定程度缓解了人机速度矛盾，资源利用率有所提升</p><p>主要缺点：<strong>内存中仅能有一道程序运行</strong>，只有该程序运行结束之后才能进入到下一道程序，**cpu有大量的时间都是在空闲等待I&#x2F;O完成，**资源利用率仍然很低。</p><p><img src="https://s1.ax1x.com/2022/04/10/LA2nb9.png" alt="单道批处理系统"></p><p><strong>（2）多道批处理系统</strong></p><p> 在多道批处理系统中，<strong>操作系统</strong>开始出现。</p><p>主要优点：多道程序<strong>并发</strong>执行，<strong>共享</strong>计算机资源，<strong>资源利用率大幅度提升</strong>。</p><p>主要缺点：用户响应时间长，<strong>没有人机交互功能</strong>（用户不能对执行的程序进行任何操作）。</p><blockquote><p>在单道批处理系统中，输入，计算和输出都是串行进行，资源利用率低。</p></blockquote><p> <img src="https://s1.ax1x.com/2022/04/10/LA2gbj.png" alt="1"></p><blockquote><p>而在多道批处理系统中，当一个系统资源不再被使用时，可以提前进行下一个任务，系统<strong>并行执行任务</strong>，资源利用率大幅度提高。</p></blockquote><p><img src="https://s1.ax1x.com/2022/04/10/LA2Wan.png" alt="2"></p><p><strong>（3）分时操作系统</strong></p><p>计算机以<strong>时间片</strong>为单位<strong>轮流为各个用户&#x2F;作业服务</strong>，各个用户可通过终端与计算机交互。</p><p>主要优点：用户请求可以被即时响应，<strong>解决了人机交互的问题</strong>，允许多个用户同时使用一台计算机，并且用户对计算机的操作<strong>相互独立</strong>，感受不到别人的存在。</p><p>主要却带你：<strong>不能优先处理一些紧急任务</strong>，操作系统的各个用户、作业都是完全公平的，循环为每个用户、作业服务一个时间片，不区分任务的紧急性。</p><p><strong>（4）实时操作系统</strong></p><p>主要优点：可以实时处理一些紧急任务，某些紧急任务不需要时间片排队。</p><p>在实时操作系统的控制下，计算机接受到外部信号后及时进行处理，并且<strong>要在严格的时间限制内处理完成事件</strong>，实时操作系统的主要特点是<strong>及时性和可靠性</strong>。</p><p>实时操作系统可分为：</p><ul><li><p>硬实时系统：必须在<strong>绝对严格</strong>的规定时间内完成处理。如导弹控制系统，自动驾驶系统。</p></li><li><p>软实时系统：能接受偶尔违反时间规定。如12306火车订票系统。</p></li></ul><p><strong>（5）网络操作系统</strong></p><p>伴随计算机网络的发展而诞生的，能把网络的各个计算机有机地结合起来，实现数据传送等功能，<strong>实现网络中各种资源的共享（如文件共享）和各个计算机之间的通信</strong>。</p><p><strong>（6）分布式操作系统</strong></p><p>主要特点是<strong>分布性和并行性</strong>，系统中的割台计算机地位相同，<strong>任何工作都可以分布在这些计算机上，由他们并行、协同完成这个任务。</strong></p><p><strong>（7）个人计算机操作系统</strong></p><p>略，如windows，macos等</p>]]></content>
      
      
      <categories>
          
          <category> OS学习笔记 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 操作系统 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>二、操作系统的概念、功能和目标</title>
      <link href="/2022/04/09/1928491a/"/>
      <url>/2022/04/09/1928491a/</url>
      
        <content type="html"><![CDATA[<h4 id="1-操作系统的概念"><a href="#1-操作系统的概念" class="headerlink" title="1.操作系统的概念"></a>1.操作系统的概念</h4><p>（1）操作系统是计算机中最基本的系统软件。</p><p>（2）负责管理协调硬件、软件等计算机资源的工作</p><p>（3）为上层用户、应用程序提供简单易用的服务</p><h4 id="2-操作系统的功能和目标"><a href="#2-操作系统的功能和目标" class="headerlink" title="2.操作系统的功能和目标"></a>2.操作系统的功能和目标</h4><p><strong>（1）作为系统资源的管理者</strong></p><ul><li><p>处理机管理</p></li><li><p>存储管理</p></li><li><p>文件管理</p></li><li><p>设备管理</p></li></ul><p><strong>（2）作为用户和计算机硬件之间的接口</strong></p><ol><li><p>命令接口</p><p>用户直接使用的</p><ul><li>联机命令接口（也叫<strong>交互式命令接口</strong>，输入一句执行一句）</li><li>脱机命令接口（也叫<strong>批处理命令接口</strong>，输入一堆执行一堆）</li></ul></li><li><p>程序接口（系统调用）</p><p>用户通过程序间接实用</p></li><li><p>GUI（图形用户界面）</p><p>图形化用户操作界面</p></li></ol><p><strong>（3）作为最接近硬件的层次</strong></p><p>扩充机器</p>]]></content>
      
      
      <categories>
          
          <category> OS学习笔记 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 操作系统 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>一、操作系统的基本特征</title>
      <link href="/2022/04/09/2cbee40b/"/>
      <url>/2022/04/09/2cbee40b/</url>
      
        <content type="html"><![CDATA[<h2 id="●-操作系统的基本特征"><a href="#●-操作系统的基本特征" class="headerlink" title="● 操作系统的基本特征"></a>● 操作系统的基本特征</h2><p>操作系统的四个特性：<strong>并发性，共享性，虚拟性，异步性</strong></p><h4 id="1-并发性"><a href="#1-并发性" class="headerlink" title="1. 并发性"></a>1. 并发性</h4><p>并发是指两个或多个事件在同一时间间隔内发生，<strong>宏观上是同时发生的</strong>，但是<strong>微观上是交替发生的</strong>。</p><p><strong>操作系统的并发性</strong>指计算机系统中同时存在多个运行的程序。</p><h4 id="2-共享性"><a href="#2-共享性" class="headerlink" title="2. 共享性"></a>2. 共享性</h4><p>即资源共享，是指系统中的资源可供内存中多个并发执行的进程共同使用。</p><p>（1）两种资源共享方式</p><ul><li>互斥共享方式（<strong>一个时间段内只允许一个进程访问资源</strong>）</li><li>同时共享方式（<strong>允许一个时间段内由多个进程“同时”对他们进行访问</strong>）</li></ul><p><strong>同时</strong>是宏观上的概念，微观上资源往往是交替进行资源访问的（分时共享）。</p><blockquote><p>&#x3D;&#x3D;并发性和共享性两者的关系：&#x3D;&#x3D;</p><p>假如使用 QQ 发送文件 A，使用微信发送文件 B. 1.两个进程正在并发执行（并发性） 2.需要共享地访问硬盘资源（共享性）</p><p>如果失去并发行，系统中只有一个程序在执行，则共享性即失去意义。<br>如果失去共享性，QQ 和微信不能同时访问硬盘资源，就无法实现同时发送文件，也就无法并发。</p><p><strong>即并发性和共享性二者互为存在条件</strong></p></blockquote><h4 id="3-虚拟性"><a href="#3-虚拟性" class="headerlink" title="3. 虚拟性"></a>3. 虚拟性</h4><p>虚拟是指把一个物理上的实体变为逻辑上的对应物，物理实体是实际存在的，而逻辑上对应物是用户感受到的。</p><ul><li>空分复用技术（如虚拟存储器）</li><li>时分复用技术（如虚拟处理器），微观上处理机在各个微小的时间段内交替着为各个进程服务。</li></ul><h4 id="4-异步性"><a href="#4-异步性" class="headerlink" title="4. 异步性"></a>4. 异步性</h4><p>异步是指，在多道程序环境下，允许多个程序并发执行，但由于资源有限，进程的执行不是一贯到底的，而是走走停停，以不可预知的速度向前推进，这就是进程的异步性。</p><p>如果失去了并发性，则系统只能串行的执行所有的进程，每个程序的执行会一贯到底，<strong>只有系统拥有并发性，才有可能导致异步性。</strong></p>]]></content>
      
      
      <categories>
          
          <category> OS学习笔记 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 操作系统 </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
